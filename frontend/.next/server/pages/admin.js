"use strict";(()=>{var e={};e.id=964,e.ids=[964],e.modules={2140:(e,t,s)=>{s.r(t),s.d(t,{config:()=>T,default:()=>S,getServerSideProps:()=>C,getStaticPaths:()=>P,getStaticProps:()=>k,reportWebVitals:()=>A,routeModule:()=>I,unstable_getServerProps:()=>E,unstable_getServerSideProps:()=>F,unstable_getStaticParams:()=>O,unstable_getStaticPaths:()=>D,unstable_getStaticProps:()=>R});var a={};s.r(a),s.d(a,{default:()=>y,getServerSideProps:()=>w});var l=s(7093),r=s(5244),n=s(1323),i=s(7645),d=s(6814),o=s(997),c=s(6689),x=s(1507),m=s(1163),u=s(968),p=s.n(u),h=s(1101),b=s(7980),g=s(3935),f=s(9553),j=s(9747),N=s(9767),v=s(3546);function y({brands:e,properties:t,bookings:s,loyalty:a,users:l,roomTypes:r,stats:n}){let{data:i,signOut:d}=(0,x.a)(),u=(0,m.useRouter)(),[y,w]=(0,c.useState)(t||[]),[S,k]=(0,c.useState)(r||[]),[P,C]=(0,c.useState)({}),[T,A]=(0,c.useState)(!1),[R,D]=(0,c.useState)(!1),[O,E]=(0,c.useState)(!1),[F,I]=(0,c.useState)(!1),[Z,B]=(0,c.useState)(!1),[M,L]=(0,c.useState)(null),[z,K]=(0,c.useState)(null),[_,U]=(0,c.useState)(null),[G,$]=(0,c.useState)([]),[W,q]=(0,c.useState)("overview"),[Y,H]=(0,c.useState)(""),J=y?.[0]?.id||null,V=e?.[0]?.id||null,X=J?"PROPERTY":V?"BRAND":"ORG",Q="PROPERTY"===X?J:"BRAND"===X?V:null,[ee,et]=(0,c.useState)({razorpayKeyId:"rzp_test_placeholder",isTestMode:!0,autoCapture:!0}),[es,ea]=(0,c.useState)([{id:1,name:"Booking.com",enabled:!1,connected:!1,apiKey:""},{id:2,name:"MakeMyTrip",enabled:!1,connected:!1,apiKey:""},{id:3,name:"Airbnb",enabled:!1,connected:!1,apiKey:""},{id:4,name:"Goibibo",enabled:!1,connected:!1,apiKey:""}]),[el,er]=(0,c.useState)({email:"",roleKey:"STAFF_FRONTDESK",scopeType:X,scopeId:Q}),[en,ei]=(0,c.useState)(!1),[ed,eo]=(0,c.useState)(null),[ec,ex]=(0,c.useState)(null),[em,eu]=(0,c.useState)(!1),[ep,eh]=(0,c.useState)(""),[eb,eg]=(0,c.useState)(null),[ef,ej]=(0,c.useState)(!1),[eN,ev]=(0,c.useState)(0),[ey,ew]=(0,c.useState)(0),[eS,ek]=(0,c.useState)(""),[eP,eC]=(0,c.useState)(l||[]),[eT,eA]=(0,c.useState)(""),[eR,eD]=(0,c.useState)(null),[eO,eE]=(0,c.useState)(!1),[eF,eI]=(0,c.useState)(!1),[eZ,eB]=(0,c.useState)("STAFF_FRONTDESK"),[eM,eL]=(0,c.useState)("ORG"),[ez,eK]=(0,c.useState)(null),[e_,eU]=(0,c.useState)(""),[eG,e$]=(0,c.useState)(""),[eW,eq]=(0,c.useState)(""),[eY,eH]=(0,c.useState)({firstName:"",lastName:"",email:"",phone:"",roleKey:"STAFF_FRONTDESK",scopeType:X,scopeId:Q}),eJ=(0,c.useMemo)(()=>{let e=new Map;return(S||[]).forEach(t=>{let s=t?.property?.id;s&&(e.has(s)||e.set(s,[]),e.get(s)?.push(t))}),e},[S]),[eV,eX]=(0,c.useState)(J),[eQ,e0]=(0,c.useState)(7),[e2,e4]=(0,c.useState)(null),[e6,e1]=(0,c.useState)(!1),[e9,e3]=(0,c.useState)(null),[e5,e7]=(0,c.useState)(0),e8=e=>new Date(e).toLocaleDateString("en-IN",{month:"short",day:"numeric"}),te=e=>new Date(e).toLocaleDateString("en-IN",{weekday:"short"}),tt=eV&&y.find(e=>e.id===eV)||null,ts=eV&&eJ.get(eV)||[],ta=z?P[z]:null,tl=()=>{E(!1),I(!1),B(!1),L(null),K(null),U(null),$([])},tr=()=>{tl()},tn=async e=>{E(!0),I(!0),L(null),K(e);let t=y.find(t=>t.id===e)||null;U({name:t?.name||"",phone:t?.phone||"",email:t?.email||"",defaultBuffer:t?.defaultBuffer!==void 0&&t?.defaultBuffer!==null?String(t.defaultBuffer):"0",timezone:t?.timezone||"Asia/Kolkata",overbookingEnabled:t?.overbookingEnabled!==!1,address:t?.address||"",city:t?.city||"",state:t?.state||"",pincode:t?.pincode||"",currency:t?.currency||"INR"});try{let t=await fetch(`/api/admin/properties/${e}/room-types`,{credentials:"include",headers:{Accept:"application/json"}});if(!t.ok){let e=await t.text();throw Error(e||"Failed to load property room types")}let s=await t.json(),a=s?.data;a?.property&&U(e=>({...e||{},defaultBuffer:void 0!==a.property.defaultBuffer&&null!==a.property.defaultBuffer?String(a.property.defaultBuffer):e?.defaultBuffer??"0",timezone:a.property.timezone||e?.timezone||"Asia/Kolkata",overbookingEnabled:void 0!==a.property.overbookingEnabled?a.property.overbookingEnabled:e?.overbookingEnabled??!0,currency:a.property.currency||e?.currency||"INR"}));let l=(a?.roomTypes||[]).map((e,t)=>({id:e.id,tempId:`existing-${e.id}`,name:e.name||"",code:e.code||"",baseRooms:void 0!==e.baseRooms&&null!==e.baseRooms?String(e.baseRooms):"0",capacity:void 0!==e.capacity&&null!==e.capacity?String(e.capacity):"1",description:e.description||"",isActive:!1!==e.isActive,ratePlanPrice:e?.ratePlan?.seasonalPrice!==void 0&&e?.ratePlan?.seasonalPrice!==null?String(Number(e.ratePlan.seasonalPrice)):"",sortOrder:void 0!==e.sortOrder&&null!==e.sortOrder?String(e.sortOrder):String(t),inventorySummary:e.inventorySummary||null}));$(l),C(t=>({...t,[e]:a}))}catch(e){console.error("Failed to load property editor data",e),L(e?.message||"Failed to load property data")}finally{I(!1)}},ti=(e,t)=>{U(s=>({...s||{},[e]:t}))},td=(e,t,s)=>{$(a=>{let l=[...a];return l[e]={...l[e],[t]:s},l})},to=e=>{$(t=>t.filter((t,s)=>s!==e))},tc=async()=>{if(z&&_){if(!G||0===G.length){L("Add at least one room type before saving.");return}if(G.find(e=>!e.name||!e.name.trim())){L("Every room type needs a name.");return}if(G.some(e=>""!==e.ratePlanPrice&&null!==e.ratePlanPrice&&void 0!==e.ratePlanPrice&&Number.isNaN(Number(e.ratePlanPrice)))){L("BAR price must be a valid number.");return}B(!0),L(null);try{let e={name:_.name?.trim()||_.name,phone:_.phone?.trim()||null,email:_.email?.trim()||null,defaultBuffer:Number(_.defaultBuffer??0)||0,timezone:_.timezone||"Asia/Kolkata",overbookingEnabled:!1!==_.overbookingEnabled,address:_.address?.trim()||null,city:_.city?.trim()||null,state:_.state?.trim()||null,pincode:_.pincode?.trim()||null,currency:_.currency||"INR"},t=await fetch(`/api/properties/${z}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.text();throw Error(e||"Failed to update property details.")}let s=await t.json(),a=s?.property||s?.data?.property||null,l=G.map((e,t)=>({...e.id?{id:e.id}:{},name:e.name?.trim(),code:e.code?.trim()||void 0,baseRooms:Number(e.baseRooms??0)||0,capacity:Number(e.capacity??1)||1,isActive:!1!==e.isActive,description:e.description?.trim()||null,sortOrder:Number(e.sortOrder??t),ratePlanPrice:""===e.ratePlanPrice||null===e.ratePlanPrice?null:Number(e.ratePlanPrice)})),r=await fetch(`/api/admin/properties/${z}/room-types`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({roomTypes:l})});if(!r.ok){let e=await r.text();throw Error(e||"Failed to save room types.")}let n=await r.json(),i=n?.data;i?.roomTypes&&($(i.roomTypes.map((e,t)=>({id:e.id,tempId:`existing-${e.id}`,name:e.name||"",code:e.code||"",baseRooms:void 0!==e.baseRooms&&null!==e.baseRooms?String(e.baseRooms):"0",capacity:void 0!==e.capacity&&null!==e.capacity?String(e.capacity):"1",description:e.description||"",isActive:!1!==e.isActive,ratePlanPrice:e?.ratePlan?.seasonalPrice!==void 0&&e?.ratePlan?.seasonalPrice!==null?String(Number(e.ratePlan.seasonalPrice)):"",sortOrder:void 0!==e.sortOrder&&null!==e.sortOrder?String(e.sortOrder):String(t),inventorySummary:e.inventorySummary||null}))),C(e=>({...e,[z]:i})),k(e=>{let t=e.filter(e=>e?.property?.id!==z),s=i.roomTypes.map(e=>({...e,property:{id:i.property.id,name:i.property.name}}));return[...t,...s]})),a&&w(e=>e.map(e=>e.id===z?{...e,...a}:e)),e7(e=>e+1),tl()}catch(e){console.error("Failed to save property configuration",e),L(e?.message||"Failed to save property configuration.")}finally{B(!1)}}},tx=a.filter(e=>{if(!ep)return!0;let t=ep.toLowerCase();return e.userName?.toLowerCase().includes(t)||e.userEmail?.toLowerCase().includes(t)||e.memberNumber?.includes(t)}),tm=eP.filter(e=>{if(!eT)return!0;let t=eT.toLowerCase();return e.name&&e.name.toLowerCase().includes(t)||e.email?.toLowerCase().includes(t)||e.phone&&e.phone.toLowerCase().includes(t)||e.roleName?.toLowerCase().includes(t)}),tu=async e=>{e.preventDefault(),ei(!0),eo(null),ex(null);let t=el.email.trim();if(!t){eo({type:"error",text:"Email address is required."}),ei(!1);return}try{let e=await fetch("/api/admin/invites",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...el,email:t})}),s=await e.json();if(e.ok){let e=s?.invite?.inviteUrl;eo({type:"success",text:`Invite sent to ${el.email}!`}),ex(e||null),er({email:"",roleKey:"STAFF_FRONTDESK",scopeType:X,scopeId:Q})}else eo({type:"error",text:s.error||"Failed to send invite"}),ex(null)}catch(e){eo({type:"error",text:"Network error. Please try again."}),ex(null)}finally{ei(!1)}};return(0,o.jsxs)("div",{className:"min-h-screen bg-neutral-50",children:[(0,o.jsxs)(p(),{children:[o.jsx("title",{children:"Admin Dashboard | POD N BEYOND"}),o.jsx("meta",{name:"description",content:"POD N BEYOND Admin Dashboard"}),o.jsx("link",{rel:"icon",href:"/favicon.ico"}),o.jsx("link",{rel:"apple-touch-icon",href:"/logo-podnbeyond.png"})]}),o.jsx(h.Z,{}),o.jsx("section",{className:"pt-24 pb-6 bg-gradient-to-br from-neutral-900 to-neutral-800 text-white",children:(0,o.jsxs)(g.Z,{children:[(0,o.jsxs)("div",{className:"flex items-start justify-between flex-wrap gap-4 mb-6",children:[o.jsx("div",{className:"flex items-start gap-6",children:(0,o.jsxs)("div",{className:"flex items-center gap-4",children:[(0,o.jsxs)("div",{className:"text-left",children:[o.jsx("p",{className:"text-xs text-neutral-400 uppercase tracking-wide",children:"Signed in as"}),o.jsx("p",{className:"text-white font-semibold text-sm mt-0.5",children:i?.user?.email||"Loading..."}),o.jsx("p",{className:"text-xs text-neutral-500 mt-0.5",children:i?.user?.roles?.[0]?.key?.replace(/_/g," ")||"MEMBER"})]}),o.jsx("div",{className:"h-12 w-px bg-neutral-700"}),o.jsx("button",{onClick:()=>d({callbackUrl:"/"}),className:"px-4 py-2 bg-white/10 border border-white/20 text-white rounded-button text-sm font-semibold hover:bg-white hover:text-neutral-900 transition-all",children:"Sign Out"})]})}),(0,o.jsxs)("div",{className:"text-right",children:[o.jsx("h1",{className:"text-3xl font-bold mb-1",children:"Admin Dashboard"}),o.jsx("p",{className:"text-neutral-300 text-sm",children:"POD N BEYOND Group Management"})]})]}),(0,o.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[o.jsx("a",{href:"/admin/communication-hub",children:o.jsx("button",{className:`px-6 py-2 rounded-button font-semibold transition-all ${u.asPath?.startsWith("/admin/communication-hub")?"bg-white text-neutral-900":"bg-white/10 border border-white/20 text-white hover:bg-white hover:text-neutral-900"}`,children:"\uD83D\uDCAC Communication Hub"})}),o.jsx("a",{href:"/admin/integrations",children:o.jsx("button",{className:`px-6 py-2 rounded-button font-semibold transition-all ${u.asPath?.startsWith("/admin/integrations")?"bg-white text-neutral-900":"bg-white/10 border border-white/20 text-white hover:bg-white hover:text-neutral-900"}`,children:"⚙️ Integrations"})})]})]})}),o.jsx("section",{className:"bg-white border-b border-neutral-200 sticky top-0 z-20",children:o.jsx(g.Z,{children:o.jsx("div",{className:"flex space-x-8 overflow-x-auto py-4",children:["overview","brands","properties","bookings","loyalty","users","cms"].map(e=>o.jsx("button",{onClick:()=>q(e),className:`pb-2 px-1 font-semibold capitalize whitespace-nowrap transition-colors border-b-2 ${W===e?"border-neutral-900 text-neutral-900":"border-transparent text-neutral-500 hover:text-neutral-700"}`,children:"cms"===e?"CMS":e},e))})})}),o.jsx("section",{className:"py-12",children:(0,o.jsxs)(g.Z,{children:["overview"===W&&(0,o.jsxs)("div",{className:"space-y-8 animate-fade-in",children:[(0,o.jsxs)("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-neutral-900 mb-6",children:"Dashboard Overview"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[(0,o.jsxs)(f.Z,{variant:"default",padding:"lg",children:[o.jsx("div",{className:"text-sm font-semibold text-neutral-600 mb-2",children:"Total Brands"}),o.jsx("div",{className:"text-4xl font-bold text-capsule-500",children:n.brands}),(0,o.jsxs)("div",{className:"text-sm text-neutral-500 mt-2",children:[e.filter(e=>"ACTIVE"===e.status).length," active"]})]}),(0,o.jsxs)(f.Z,{variant:"default",padding:"lg",children:[o.jsx("div",{className:"text-sm font-semibold text-neutral-600 mb-2",children:"Total Properties"}),o.jsx("div",{className:"text-4xl font-bold text-smart-500",children:n.properties}),(0,o.jsxs)("div",{className:"text-sm text-neutral-500 mt-2",children:["Across ",e.length," brands"]})]}),(0,o.jsxs)(f.Z,{variant:"default",padding:"lg",children:[o.jsx("div",{className:"text-sm font-semibold text-neutral-600 mb-2",children:"Total Bookings"}),o.jsx("div",{className:"text-4xl font-bold text-sanctuary-500",children:s?.length||0}),(0,o.jsxs)("div",{className:"text-sm text-neutral-500 mt-2",children:[s?.filter(e=>"CONFIRMED"===e.status).length||0," confirmed"]})]}),(0,o.jsxs)(f.Z,{variant:"default",padding:"lg",children:[o.jsx("div",{className:"text-sm font-semibold text-neutral-600 mb-2",children:"Loyalty Members"}),o.jsx("div",{className:"text-4xl font-bold text-sauna-500",children:a?.length||0}),(0,o.jsxs)("div",{className:"text-sm text-neutral-500 mt-2",children:[a?.filter(e=>"PLATINUM"===e.tier).length||0," platinum"]})]}),(0,o.jsxs)(f.Z,{variant:"default",padding:"lg",children:[o.jsx("div",{className:"text-sm font-semibold text-neutral-600 mb-2",children:"Staff Members"}),o.jsx("div",{className:"text-4xl font-bold text-neutral-900",children:eP?.length||0}),(0,o.jsxs)("div",{className:"text-sm text-neutral-500 mt-2",children:[eP?.filter(e=>"SUPERADMIN"===e.roleKey||"ADMIN"===e.roleKey).length||0," admins"]})]})]})]}),(0,o.jsxs)("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-neutral-900 mb-4",children:"Recent Bookings"}),o.jsx(f.Z,{variant:"default",padding:"none",children:o.jsx("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-neutral-100 border-b border-neutral-200",children:(0,o.jsxs)("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-700 uppercase tracking-wider",children:"Guest"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-700 uppercase tracking-wider",children:"Check-in"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-700 uppercase tracking-wider",children:"Room"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-700 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-700 uppercase tracking-wider",children:"Total"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-neutral-200",children:s&&s.length>0?s.slice(0,5).map(e=>(0,o.jsxs)("tr",{className:"hover:bg-neutral-50",children:[(0,o.jsxs)("td",{className:"px-6 py-4",children:[o.jsx("div",{className:"font-medium text-neutral-900",children:e.guestName}),o.jsx("div",{className:"text-sm text-neutral-500",children:e.email})]}),o.jsx("td",{className:"px-6 py-4 text-sm text-neutral-700",children:new Date(e.checkIn).toLocaleDateString()}),(0,o.jsxs)("td",{className:"px-6 py-4 text-sm text-neutral-700",children:[o.jsx("div",{className:"font-medium text-neutral-900",children:e.roomType?.name||e.roomType?.type||"N/A"}),o.jsx("div",{className:"text-xs text-neutral-500",children:e.property?.name||e.source||"Direct"})]}),o.jsx("td",{className:"px-6 py-4",children:o.jsx(j.Z,{variant:"CONFIRMED"===e.status?"success":"HOLD"===e.status?"warning":"PENDING"===e.status?"warning":"CANCELLED"===e.status?"error":"FAILED"===e.status?"error":"NO_SHOW"===e.status?"error":"neutral",size:"sm",children:e.status})}),(0,o.jsxs)("td",{className:"px-6 py-4 font-semibold text-neutral-900",children:["₹",Number(e.totalPrice||0).toLocaleString()]})]},e.id)):o.jsx("tr",{children:(0,o.jsxs)("td",{colSpan:5,className:"px-6 py-12 text-center text-neutral-500",children:[o.jsx("p",{className:"mb-2",children:"No bookings data available"}),(0,o.jsxs)("p",{className:"text-sm",children:["Test data: ",s?.length||0," bookings in database"]})]})})})]})})})]})]}),"brands"===W&&(0,o.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[o.jsx("h2",{className:"text-2xl font-bold text-neutral-900 mb-6",children:"Brand Management"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(e=>(0,o.jsxs)(f.Z,{variant:"default",padding:"lg",children:[(0,o.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[e.logoUrl&&o.jsx("img",{src:e.logoUrl,alt:e.name,className:"h-10"}),(0,o.jsxs)("div",{children:[o.jsx("h3",{className:"font-bold text-lg text-neutral-900",children:e.name}),o.jsx("p",{className:"text-sm text-neutral-600",children:e.tagline})]})]}),o.jsx(j.Z,{variant:"ACTIVE"===e.status?"success":"warning",size:"sm",children:e.status})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4 text-sm",children:[(0,o.jsxs)("div",{children:[o.jsx("span",{className:"text-neutral-600",children:"Properties:"}),o.jsx("span",{className:"ml-2 font-semibold",children:e._count?.properties||0})]}),(0,o.jsxs)("div",{children:[o.jsx("span",{className:"text-neutral-600",children:"Color:"}),o.jsx("div",{className:"inline-flex items-center ml-2",children:o.jsx("div",{className:"w-4 h-4 rounded-full border border-neutral-300",style:{backgroundColor:e.primaryColor}})})]})]}),e.targetAudience&&(0,o.jsxs)("p",{className:"text-sm text-neutral-700 border-t border-neutral-100 pt-4",children:[o.jsx("span",{className:"font-semibold",children:"Target:"})," ",e.targetAudience]}),o.jsx("div",{className:"mt-4 pt-4 border-t border-neutral-100",children:o.jsx("a",{href:`/brands/${e.slug}`,children:o.jsx(N.Z,{variant:"ghost",size:"sm",fullWidth:!0,children:"View Brand Page →"})})})]},e.id))})]}),"properties"===W&&(0,o.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[o.jsx("h2",{className:"text-2xl font-bold text-neutral-900 mb-6",children:"Property Management"}),R&&o.jsx("div",{className:"rounded-lg border border-neutral-200 bg-neutral-50 px-4 py-3 text-sm text-neutral-600",children:"Syncing latest room types and inventory data..."}),o.jsx("div",{className:"grid grid-cols-1 gap-6",children:y.map(e=>{let t=eJ.get(e.id)||[],s=t.reduce((e,t)=>e+(t.baseRooms||0),0);return(0,o.jsxs)(f.Z,{variant:"default",padding:"lg",children:[(0,o.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[o.jsx("h3",{className:"font-bold text-xl text-neutral-900",children:e.name}),e.brand&&o.jsx(j.Z,{variant:"neutral",size:"sm",children:e.brand.name})]}),(0,o.jsxs)("p",{className:"text-neutral-600",children:["\uD83D\uDCCD ",e.address||e.location,", ",e.city,", ",e.state]})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-1 mb-1",children:[o.jsx("span",{className:"text-smart-500",children:"⭐"}),o.jsx("span",{className:"font-semibold",children:e.rating}),(0,o.jsxs)("span",{className:"text-sm text-neutral-500",children:["(",e.totalRatings,")"]})]}),o.jsx(j.Z,{variant:"success",size:"sm",children:e.status})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4 text-sm",children:[(0,o.jsxs)("div",{children:[o.jsx("span",{className:"text-neutral-600",children:"Room Types:"}),o.jsx("span",{className:"ml-2 font-semibold",children:t.length})]}),(0,o.jsxs)("div",{children:[o.jsx("span",{className:"text-neutral-600",children:"Base Pods:"}),o.jsx("span",{className:"ml-2 font-semibold",children:s})]}),(0,o.jsxs)("div",{children:[o.jsx("span",{className:"text-neutral-600",children:"Phone:"}),o.jsx("span",{className:"ml-2 font-semibold",children:e.phone})]}),(0,o.jsxs)("div",{children:[o.jsx("span",{className:"text-neutral-600",children:"Email:"}),o.jsx("span",{className:"ml-2 font-semibold text-xs",children:e.email})]})]}),(0,o.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-neutral-100",children:[o.jsx("a",{href:`/locations/${e.slug}`,className:"flex-1",children:o.jsx(N.Z,{variant:"ghost",size:"sm",fullWidth:!0,children:"View Page"})}),o.jsx(N.Z,{variant:"primary",size:"sm",onClick:()=>tn(e.id),children:"Edit"})]})]},e.id)})}),y.length>0&&(0,o.jsxs)(f.Z,{variant:"default",padding:"lg",children:[(0,o.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4",children:[(0,o.jsxs)("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-neutral-900",children:"Inventory Snapshot"}),(0,o.jsxs)("p",{className:"text-sm text-neutral-500",children:["Buffer-aware availability for the next ",eQ," days."]})]}),(0,o.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[o.jsx("select",{className:"px-3 py-2 border border-neutral-200 rounded-md text-sm bg-white",value:eV??"",onChange:e=>{let t=e.target.value;eX(t?Number(t):null)},children:y.map(e=>o.jsx("option",{value:e.id,children:e.name},e.id))}),o.jsx("select",{className:"px-3 py-2 border border-neutral-200 rounded-md text-sm bg-white",value:eQ,onChange:e=>e0(Number(e.target.value)),children:[7,14,30].map(e=>(0,o.jsxs)("option",{value:e,children:[e," days"]},e))}),o.jsx(N.Z,{variant:"ghost",size:"sm",onClick:()=>e7(e=>e+1),children:"Refresh"})]})]}),e9&&o.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 border border-red-100 rounded-md px-3 py-2",children:e9}),e6&&o.jsx("div",{className:"py-6 text-sm text-neutral-500",children:"Loading inventory..."}),!e6&&e2&&e2.roomTypes&&(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-sm text-neutral-600",children:[(0,o.jsxs)("span",{children:["Window:"," ",(0,o.jsxs)("strong",{children:[e8(e2.range.start)," → ",e8(e2.range.end)]})]}),tt&&(0,o.jsxs)("span",{children:["Timezone: ",o.jsx("strong",{children:tt.timezone||"Asia/Kolkata"})]}),(0,o.jsxs)("span",{children:["Buffer: ",(0,o.jsxs)("strong",{children:[e2.property?.defaultBuffer??tt?.defaultBuffer??0,"%"]})]}),(0,o.jsxs)("span",{children:["Room types tracked:"," ",o.jsx("strong",{children:ts.length})]})]}),0===e2.roomTypes.length&&o.jsx("div",{className:"text-sm text-neutral-500",children:"No inventory configured for this property."}),o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:e2.roomTypes.map(e=>(0,o.jsxs)("div",{className:"border border-neutral-200 rounded-lg p-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,o.jsxs)("div",{children:[o.jsx("h4",{className:"font-semibold text-neutral-900",children:e.name}),(0,o.jsxs)("p",{className:"text-xs text-neutral-500",children:["Capacity ",e.capacity," \xb7 Base ",e.baseRooms]})]}),(0,o.jsxs)("div",{className:"text-right text-xs text-neutral-500",children:[(0,o.jsxs)("div",{children:["Free to sell total:"," ",o.jsx("span",{className:"font-semibold text-neutral-900",children:e.summary.totalFreeToSell})]}),(0,o.jsxs)("div",{children:["Booked:"," ",o.jsx("span",{className:"font-semibold text-neutral-900",children:e.summary.totalBooked})]}),(0,o.jsxs)("div",{children:["Holds:"," ",o.jsx("span",{className:"font-semibold text-neutral-900",children:e.summary.totalHolds})]})]})]}),o.jsx("div",{className:"grid grid-cols-3 gap-2 text-xs",children:e.availability.slice(0,Math.min(eQ,9)).map(e=>(0,o.jsxs)("div",{className:"border border-neutral-200 rounded-md px-3 py-2 bg-neutral-50",children:[o.jsx("div",{className:"font-semibold text-neutral-900",children:te(e.date)}),o.jsx("div",{className:"text-neutral-500",children:e8(e.date)}),(0,o.jsxs)("div",{className:"mt-2",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-neutral-500",children:"Sellable"}),o.jsx("span",{className:"font-semibold text-neutral-900",children:e.sellable})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-neutral-500",children:"Booked"}),o.jsx("span",{className:"font-semibold text-neutral-900",children:e.booked})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-neutral-500",children:"Holds"}),o.jsx("span",{className:"font-semibold text-neutral-900",children:e.holds})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-neutral-500",children:"Free"}),o.jsx("span",{className:"font-semibold text-sanctuary-500",children:e.freeToSell})]})]})]},e.date))})]},e.roomTypeId))})]}),!e6&&!e2&&!e9&&o.jsx("div",{className:"text-sm text-neutral-500",children:"Select a property to view inventory."})]})]}),"bookings"===W&&(0,o.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"Bookings Management"}),(0,o.jsxs)("div",{className:"text-sm text-neutral-600",children:["Total: ",s.length," bookings"]})]}),o.jsx(f.Z,{variant:"default",padding:"none",children:o.jsx("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-neutral-900 text-white",children:(0,o.jsxs)("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"ID"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Guest"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Room"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Check-in"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Nights"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Total"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-neutral-200",children:s.map(e=>{let t=Math.ceil((new Date(e.checkOut).getTime()-new Date(e.checkIn).getTime())/864e5);return(0,o.jsxs)("tr",{className:"hover:bg-neutral-50 transition-colors",children:[(0,o.jsxs)("td",{className:"px-6 py-4 text-sm font-mono text-neutral-500",children:["#",e.id]}),(0,o.jsxs)("td",{className:"px-6 py-4",children:[o.jsx("div",{className:"font-medium text-neutral-900",children:e.guestName}),o.jsx("div",{className:"text-sm text-neutral-500",children:e.email}),e.phone&&o.jsx("div",{className:"text-xs text-neutral-400",children:e.phone})]}),(0,o.jsxs)("td",{className:"px-6 py-4 text-sm text-neutral-700",children:[o.jsx("div",{className:"font-medium text-neutral-900",children:e.roomType?.name||e.roomType?.type||"N/A"}),o.jsx("div",{className:"text-xs text-neutral-500",children:e.property?.name||e.source||"Direct"})]}),o.jsx("td",{className:"px-6 py-4 text-sm text-neutral-700",children:new Date(e.checkIn).toLocaleDateString()}),(0,o.jsxs)("td",{className:"px-6 py-4 text-sm text-neutral-700",children:[t," ",1===t?"night":"nights"]}),(0,o.jsxs)("td",{className:"px-6 py-4",children:[o.jsx(j.Z,{variant:"CONFIRMED"===e.status?"success":"HOLD"===e.status?"warning":"PENDING"===e.status?"warning":"CANCELLED"===e.status?"error":"FAILED"===e.status?"error":"NO_SHOW"===e.status?"error":"neutral",size:"sm",children:e.status}),e.externalChannel&&(0,o.jsxs)("div",{className:"text-xs text-neutral-500 mt-1",children:["via ",e.externalChannel]})]}),(0,o.jsxs)("td",{className:"px-6 py-4",children:[(0,o.jsxs)("div",{className:"font-bold text-neutral-900",children:["₹",Number(e.totalPrice||0).toLocaleString()]}),e.specialRequests&&o.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:"Has special requests"})]})]},e.id)})})]})})}),0===s.length&&o.jsx("div",{className:"text-center py-12 text-neutral-500",children:"No bookings yet. Test data should be seeded."})]}),"loyalty"===W&&(0,o.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[o.jsx("div",{className:"flex items-center justify-between mb-6",children:(0,o.jsxs)("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"Loyalty Program"}),(0,o.jsxs)("div",{className:"text-sm text-neutral-600 mt-1",children:[a.length," total members"]})]})}),o.jsx(f.Z,{variant:"default",padding:"md",children:(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx("input",{type:"text",placeholder:"Search by name, email, or member number...",value:ep,onChange:e=>eh(e.target.value),className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})}),(0,o.jsxs)("div",{className:"text-sm text-neutral-600",children:[tx.length," results"]})]})}),tx.length>0?o.jsx(f.Z,{variant:"default",padding:"none",children:o.jsx("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-neutral-50 border-b border-neutral-200",children:(0,o.jsxs)("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-600 uppercase tracking-wider",children:"Member"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-600 uppercase tracking-wider",children:"Contact"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-600 uppercase tracking-wider",children:"Tier"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-neutral-600 uppercase tracking-wider",children:"Points"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-neutral-600 uppercase tracking-wider",children:"Stays"}),o.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-neutral-600 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-neutral-200",children:tx.map(e=>(0,o.jsxs)("tr",{className:"hover:bg-neutral-50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsxs)("div",{children:[o.jsx("div",{className:"font-semibold text-neutral-900",children:e.userName||"N/A"}),(0,o.jsxs)("div",{className:"text-sm text-neutral-500",children:["Member #",e.memberNumber]})]})}),o.jsx("td",{className:"px-6 py-4",children:(0,o.jsxs)("div",{className:"text-sm",children:[o.jsx("div",{className:"text-neutral-900",children:e.userEmail}),e.userPhone&&o.jsx("div",{className:"text-neutral-500",children:e.userPhone})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(j.Z,{variant:"PLATINUM"===e.tier?"neutral":"GOLD"===e.tier?"smart":"capsule",size:"sm",children:e.tier})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:o.jsx("div",{className:"font-semibold text-neutral-900",children:e.points.toLocaleString()})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:o.jsx("div",{className:"text-neutral-900",children:e.lifetimeStays||0})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:o.jsx("button",{onClick:()=>{eg(e),ev(0),ew(0),ek(""),ej(!0)},className:"text-neutral-900 hover:text-neutral-700 font-semibold text-sm",children:"Manage Member"})})]},e.id))})]})})}):o.jsx("div",{className:"text-center py-12 text-neutral-500",children:ep?"No members found matching your search.":"No loyalty members yet."})]}),"users"===W&&(0,o.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,o.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,o.jsxs)("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"User Management"}),o.jsx("p",{className:"text-neutral-600 mt-1",children:"Invite staff members, manage permissions, and track access scopes."})]}),(0,o.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[o.jsx(N.Z,{variant:"secondary",onClick:()=>{eo(null),eu(!0)},children:"Invite User"}),o.jsx(N.Z,{variant:"primary",onClick:()=>eI(!0),children:"Add User"})]})]}),o.jsx(f.Z,{variant:"default",padding:"md",children:(0,o.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx("input",{type:"text",placeholder:"Search by name, email, phone, or role...",value:eT,onChange:e=>eA(e.target.value),className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})}),(0,o.jsxs)("div",{className:"text-sm text-neutral-600",children:[tm.length," of ",eP.length," users"]})]})}),tm.length>0?o.jsx(f.Z,{variant:"default",padding:"none",children:o.jsx("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-neutral-50 border-b border-neutral-200",children:(0,o.jsxs)("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-600 uppercase tracking-wider",children:"User"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-600 uppercase tracking-wider",children:"Role"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-600 uppercase tracking-wider",children:"Scope"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-600 uppercase tracking-wider",children:"Contact"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-600 uppercase tracking-wider",children:"Joined"}),o.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-neutral-600 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-neutral-200",children:tm.map(t=>{let s="ORG"===t.scopeType?"All Locations":"PROPERTY"===t.scopeType?y.find(e=>e.id===t.scopeId)?.name||`Property #${t.scopeId}`:e.find(e=>e.id===t.scopeId)?.name||`Brand #${t.scopeId}`;return(0,o.jsxs)("tr",{className:"hover:bg-neutral-50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsxs)("div",{children:[o.jsx("div",{className:"font-semibold text-neutral-900",children:t.name||"Unnamed User"}),o.jsx("div",{className:"text-sm text-neutral-500",children:t.email})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(j.Z,{variant:"neutral",size:"sm",children:t.roleName||t.roleKey})}),(0,o.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[o.jsx("div",{className:"text-sm text-neutral-900",children:s}),o.jsx("div",{className:"text-xs text-neutral-500 uppercase",children:t.scopeType})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-neutral-900",children:t.phone||"—"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-neutral-500",children:new Date(t.createdAt).toLocaleDateString()}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:o.jsx("button",{onClick:()=>{let e=(t.name||"").trim().split(/\s+/),s=e.shift()||"",a=e.join(" ");eD(t),eB(t.roleKey||"STAFF_FRONTDESK"),eL(t.scopeType||"ORG"),eK("ORG"===t.scopeType?null:t.scopeId||null),eU(s),e$(a),eq(t.phone||""),eE(!0)},className:"text-neutral-900 hover:text-neutral-700 font-semibold text-sm",children:"Manage User"})})]},t.id)})})]})})}):o.jsx("div",{className:"text-center py-12 text-neutral-500",children:eT?"No users found for this search.":"No staff members yet."}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,o.jsxs)(f.Z,{variant:"bordered",padding:"lg",children:[o.jsx("h4",{className:"font-bold text-sm text-neutral-700 mb-2",children:"\uD83D\uDCE7 Invite Process"}),o.jsx("p",{className:"text-sm text-neutral-600",children:"Users receive an email with a secure link valid for 7 days"})]}),(0,o.jsxs)(f.Z,{variant:"bordered",padding:"lg",children:[o.jsx("h4",{className:"font-bold text-sm text-neutral-700 mb-2",children:"\uD83D\uDD12 Security"}),o.jsx("p",{className:"text-sm text-neutral-600",children:"Magic links for authentication - no passwords required"})]}),(0,o.jsxs)(f.Z,{variant:"bordered",padding:"lg",children:[o.jsx("h4",{className:"font-bold text-sm text-neutral-700 mb-2",children:"⚡ Instant Access"}),o.jsx("p",{className:"text-sm text-neutral-600",children:"Staff can log in immediately after accepting the invite"})]})]}),(0,o.jsxs)(f.Z,{variant:"default",padding:"lg",children:[o.jsx("h3",{className:"text-xl font-bold text-neutral-900 mb-4",children:"Role Permissions"}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"bg-neutral-100 px-3 py-1 rounded-lg font-mono text-sm font-semibold text-neutral-900 mt-0.5",children:"STAFF_FRONTDESK"}),o.jsx("p",{className:"text-sm text-neutral-600 flex-1",children:"Check-in/out guests, view bookings, basic room status (property-scoped)"})]}),(0,o.jsxs)("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"bg-neutral-100 px-3 py-1 rounded-lg font-mono text-sm font-semibold text-neutral-900 mt-0.5",children:"STAFF_OPS"}),o.jsx("p",{className:"text-sm text-neutral-600 flex-1",children:"Manage inventory, update pricing, room availability (property-scoped)"})]}),(0,o.jsxs)("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"bg-neutral-100 px-3 py-1 rounded-lg font-mono text-sm font-semibold text-neutral-900 mt-0.5",children:"MANAGER"}),o.jsx("p",{className:"text-sm text-neutral-600 flex-1",children:"Full property management, staff management, revenue reports, refunds"})]}),(0,o.jsxs)("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"bg-neutral-100 px-3 py-1 rounded-lg font-mono text-sm font-semibold text-neutral-900 mt-0.5",children:"ADMIN"}),o.jsx("p",{className:"text-sm text-neutral-600 flex-1",children:"Group-wide access: all properties, OTA management, payment settings"})]}),(0,o.jsxs)("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"bg-neutral-100 px-3 py-1 rounded-lg font-mono text-sm font-semibold text-neutral-900 mt-0.5",children:"SUPERADMIN"}),o.jsx("p",{className:"text-sm text-neutral-600 flex-1",children:"Platform owner: full system access, feature flags, user impersonation"})]})]})]})]}),"cms"===W&&(0,o.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[o.jsx("h2",{className:"text-2xl font-bold text-neutral-900 mb-6",children:"Content Management System"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,o.jsxs)(f.Z,{variant:"default",padding:"lg",children:[o.jsx("h3",{className:"text-xl font-bold text-neutral-900 mb-4",children:"\uD83D\uDCF8 Image Management"}),o.jsx("p",{className:"text-neutral-600 mb-6",children:"Upload and manage property images"}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"border-2 border-dashed border-neutral-300 rounded-lg p-8 text-center hover:border-neutral-400 transition-colors cursor-pointer",children:[o.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),o.jsx("p",{className:"text-neutral-600",children:"Click to upload images"}),o.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:"or drag and drop"})]}),o.jsx(N.Z,{variant:"primary",fullWidth:!0,children:"Browse Images"})]})]}),(0,o.jsxs)(f.Z,{variant:"default",padding:"lg",children:[o.jsx("h3",{className:"text-xl font-bold text-neutral-900 mb-4",children:"\uD83D\uDCDD Content Sections"}),o.jsx("p",{className:"text-neutral-600 mb-6",children:"Manage homepage and property content"}),o.jsx("div",{className:"space-y-3",children:["Hero Section","About Section","Amenities","Testimonials","Contact Info"].map((e,t)=>(0,o.jsxs)("div",{className:"flex items-center justify-between p-3 bg-neutral-50 rounded-lg hover:bg-neutral-100 transition-colors",children:[o.jsx("span",{className:"font-medium text-neutral-900",children:e}),o.jsx(N.Z,{variant:"ghost",size:"sm",children:"Edit"})]},t))})]}),(0,o.jsxs)(f.Z,{variant:"default",padding:"lg",className:"md:col-span-2",children:[o.jsx("h3",{className:"text-xl font-bold text-neutral-900 mb-4",children:"\uD83D\uDDBC️ Gallery"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4,5,6,7,8].map(e=>o.jsx("div",{className:"aspect-video bg-neutral-100 rounded-lg flex items-center justify-center text-neutral-400 hover:bg-neutral-200 transition-colors cursor-pointer",children:(0,o.jsxs)("span",{className:"text-sm",children:["Slot ",e]})},e))}),o.jsx("div",{className:"mt-4",children:o.jsx(N.Z,{variant:"primary",size:"sm",children:"Upload to Gallery"})})]})]})]}),!1,!1,!1]})}),ef&&eb&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsx("div",{className:"p-6 border-b border-neutral-200",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-xl font-bold text-neutral-900",children:"Manage Member"}),o.jsx("button",{onClick:()=>{ej(!1),eg(null),ev(0),ew(0),ek("")},className:"text-neutral-500 hover:text-neutral-900 text-2xl font-bold",children:"\xd7"})]})}),(0,o.jsxs)("div",{className:"p-6 space-y-8",children:[(0,o.jsxs)("div",{className:"space-y-4",children:[o.jsx("h4",{className:"font-bold text-lg text-neutral-900 border-b pb-2",children:"Contact Information"}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-1",children:"Name"}),o.jsx("p",{className:"text-neutral-900",children:eb.userName||"N/A"})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-1",children:"Member #"}),o.jsx("p",{className:"text-neutral-900 font-mono",children:eb.memberNumber})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-1",children:"Member Since"}),o.jsx("p",{className:"text-neutral-900",children:new Date(eb.createdAt).toLocaleDateString()})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-1",children:"Status"}),o.jsx(j.Z,{variant:"PLATINUM"===eb.tier?"neutral":"GOLD"===eb.tier?"smart":"capsule",size:"sm",children:eb.tier})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Email Address"}),o.jsx("input",{type:"email",value:eb.userEmail,onChange:e=>eg({...eb,userEmail:e.target.value}),className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Phone Number"}),o.jsx("input",{type:"tel",value:eb.userPhone||"",onChange:e=>eg({...eb,userPhone:e.target.value}),placeholder:"+91 98765 43210",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})]})]}),o.jsx("div",{className:"flex justify-end pt-2",children:o.jsx(N.Z,{variant:"primary",size:"sm",onClick:async()=>{try{let e=await fetch(`/api/loyalty/accounts/${eb.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:eb.userEmail,phone:eb.userPhone})});if(e.ok)alert("Contact info updated successfully!"),window.location.reload();else{let t=await e.json();alert("Failed to update: "+t.error)}}catch(e){alert("Error updating contact info"),console.error(e)}},children:"Update Contact Info"})})]}),(0,o.jsxs)("div",{className:"space-y-4",children:[o.jsx("h4",{className:"font-bold text-lg text-neutral-900 border-b pb-2",children:"Loyalty Management"}),(0,o.jsxs)("div",{className:"grid grid-cols-3 gap-4 bg-neutral-50 p-4 rounded-lg",children:[(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-xs text-neutral-600 mb-1",children:"Current Points"}),o.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:eb.points.toLocaleString()})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-xs text-neutral-600 mb-1",children:"Lifetime Stays"}),o.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:eb.lifetimeStays||0})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-xs text-neutral-600 mb-1",children:"Current Tier"}),o.jsx(j.Z,{variant:"PLATINUM"===eb.tier?"neutral":"GOLD"===eb.tier?"smart":"capsule",size:"md",children:eb.tier})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Add Bonus Points"}),o.jsx("input",{type:"number",value:eN,onChange:e=>ev(parseInt(e.target.value)||0),placeholder:"0",min:"0",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"}),(0,o.jsxs)("p",{className:"text-xs text-neutral-500 mt-1",children:["New balance: ",(eb.points+eN).toLocaleString()]})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Add Bonus Stays"}),o.jsx("input",{type:"number",value:ey,onChange:e=>ew(parseInt(e.target.value)||0),placeholder:"0",min:"0",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"}),(0,o.jsxs)("p",{className:"text-xs text-neutral-500 mt-1",children:["New total: ",eb.lifetimeStays+ey]})]})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Reason for Adjustment"}),o.jsx("textarea",{value:eS,onChange:e=>ek(e.target.value),placeholder:"E.g., Compensation for service issue, promotional bonus, etc.",rows:2,className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Membership Tier"}),(0,o.jsxs)("select",{value:eb.tier,onChange:e=>eg({...eb,tier:e.target.value}),className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900",children:[o.jsx("option",{value:"SILVER",children:"Silver"}),o.jsx("option",{value:"GOLD",children:"Gold"}),o.jsx("option",{value:"PLATINUM",children:"Platinum"})]})]})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-neutral-200",children:[o.jsx(N.Z,{variant:"secondary",onClick:()=>{ej(!1),eg(null),ev(0),ew(0),ek("")},children:"Cancel"}),o.jsx(N.Z,{variant:"primary",onClick:async()=>{try{if(0!==eN||0!==ey||eS){let e=await fetch(`/api/loyalty/accounts/${eb.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({addPoints:eN,addStays:ey,reason:eS||"Admin adjustment",tier:eb.tier})});if(e.ok)alert("Member updated successfully!"),ej(!1),eg(null),ev(0),ew(0),ek(""),window.location.reload();else{let t=await e.json();alert("Failed to update: "+t.error)}}else{let e=await fetch(`/api/loyalty/accounts/${eb.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({tier:eb.tier})});if(e.ok)alert("Tier updated successfully!"),ej(!1),eg(null),window.location.reload();else{let t=await e.json();alert("Failed to update: "+t.error)}}}catch(e){alert("Error updating member"),console.error(e)}},children:"Save Changes"})]})]})]})}),em&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,o.jsxs)("div",{className:"p-6 border-b border-neutral-200 flex items-center justify-between",children:[o.jsx("h3",{className:"text-xl font-bold text-neutral-900",children:"Invite Staff Member"}),o.jsx("button",{onClick:()=>{eu(!1),eo(null),ex(null),er({email:"",roleKey:"STAFF_FRONTDESK",scopeType:X,scopeId:Q})},className:"text-neutral-500 hover:text-neutral-900 text-2xl font-bold",children:"\xd7"})]}),(0,o.jsxs)("form",{onSubmit:tu,className:"p-6 space-y-4",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Email Address *"}),o.jsx("input",{type:"email",required:!0,value:el.email,onChange:e=>er({...el,email:e.target.value}),placeholder:"staff@podnbeyond.com",className:"w-full px-4 py-3 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Role *"}),(0,o.jsxs)("select",{value:el.roleKey,onChange:e=>er({...el,roleKey:e.target.value}),className:"w-full px-4 py-3 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900",children:[o.jsx("option",{value:"STAFF_FRONTDESK",children:"Front Desk Staff"}),o.jsx("option",{value:"STAFF_OPS",children:"Operations Staff"}),o.jsx("option",{value:"MANAGER",children:"Property Manager"}),o.jsx("option",{value:"ADMIN",children:"Group Administrator"}),o.jsx("option",{value:"SUPERADMIN",children:"Super Administrator"})]})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Access Scope *"}),(0,o.jsxs)("select",{value:el.scopeType,onChange:t=>{let s=t.target.value;er({...el,scopeType:s,scopeId:"ORG"===s?null:"PROPERTY"===s?y?.[0]?.id||null:e?.[0]?.id||null})},className:"w-full px-4 py-3 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900",children:[o.jsx("option",{value:"PROPERTY",children:"Single Property"}),o.jsx("option",{value:"BRAND",children:"Brand-Wide"}),o.jsx("option",{value:"ORG",children:"Organization-Wide"})]})]})]}),"ORG"!==el.scopeType&&(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:["PROPERTY"===el.scopeType?"Property":"Brand"," *"]}),o.jsx("select",{value:el.scopeId||"",onChange:e=>{let t=e.target.value;er({...el,scopeId:t?parseInt(t,10):null})},className:"w-full px-4 py-3 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900",children:("PROPERTY"===el.scopeType?y:e).map(e=>o.jsx("option",{value:e.id,children:e.name},e.id))})]}),ed&&(0,o.jsxs)("div",{className:`p-4 rounded-lg ${"success"===ed.type?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[o.jsx("p",{children:ed.text}),"success"===ed.type&&ec&&(0,o.jsxs)("p",{className:"mt-2 text-sm",children:[o.jsx("span",{className:"font-semibold",children:"Invite Link:"})," ",o.jsx("a",{href:ec,target:"_blank",rel:"noopener noreferrer",className:"underline break-all",children:ec})]})]}),(0,o.jsxs)("div",{className:"flex justify-end gap-3",children:[o.jsx(N.Z,{variant:"secondary",onClick:()=>{eu(!1),eo(null),ex(null),er({email:"",roleKey:"STAFF_FRONTDESK",scopeType:X,scopeId:Q})},type:"button",children:"Cancel"}),o.jsx(N.Z,{type:"submit",variant:"primary",size:"lg",disabled:en,children:en?"Sending Invitation...":"Send Invitation"})]})]})]})}),eO&&eR&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[(0,o.jsxs)("div",{className:"p-6 border-b border-neutral-200 flex items-center justify-between",children:[o.jsx("h3",{className:"text-xl font-bold text-neutral-900",children:"Manage User"}),o.jsx("button",{onClick:()=>{eE(!1),eD(null),eU(""),e$(""),eq("")},className:"text-neutral-500 hover:text-neutral-900 text-2xl font-bold",children:"\xd7"})]}),(0,o.jsxs)("div",{className:"p-6 space-y-6",children:[o.jsx("div",{className:"bg-neutral-50 p-4 rounded-lg",children:(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-xs text-neutral-500 uppercase tracking-wide",children:"Name"}),o.jsx("p",{className:"text-neutral-900 font-semibold",children:[e_,eG].filter(Boolean).join(" ")||"N/A"})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-xs text-neutral-500 uppercase tracking-wide",children:"Joined"}),o.jsx("p",{className:"text-neutral-900",children:new Date(eR.createdAt).toLocaleDateString()})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-xs text-neutral-500 uppercase tracking-wide",children:"Email"}),o.jsx("p",{className:"text-neutral-900",children:eR.email})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-xs text-neutral-500 uppercase tracking-wide",children:"Current Role"}),o.jsx(j.Z,{variant:"neutral",size:"sm",children:eR.roleName||eR.roleKey})]})]})}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"First Name *"}),o.jsx("input",{type:"text",value:e_,onChange:e=>eU(e.target.value),placeholder:"First name",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Last Name *"}),o.jsx("input",{type:"text",value:eG,onChange:e=>e$(e.target.value),placeholder:"Last name",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Role"}),(0,o.jsxs)("select",{value:eZ,onChange:e=>eB(e.target.value),className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900",children:[o.jsx("option",{value:"STAFF_FRONTDESK",children:"Front Desk Staff"}),o.jsx("option",{value:"STAFF_OPS",children:"Operations Staff"}),o.jsx("option",{value:"MANAGER",children:"Property Manager"}),o.jsx("option",{value:"ADMIN",children:"Group Administrator"}),o.jsx("option",{value:"SUPERADMIN",children:"Super Administrator"})]})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Access Scope"}),(0,o.jsxs)("select",{value:eM,onChange:t=>{let s=t.target.value;eL(s),"PROPERTY"===s?eK(y?.[0]?.id||null):"BRAND"===s?eK(e?.[0]?.id||null):eK(null)},className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900",children:[o.jsx("option",{value:"PROPERTY",children:"Single Property"}),o.jsx("option",{value:"BRAND",children:"Brand-Wide"}),o.jsx("option",{value:"ORG",children:"Organization-Wide"})]})]})]}),"ORG"!==eM&&(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"PROPERTY"===eM?"Property":"Brand"}),o.jsx("select",{value:ez||"",onChange:e=>{let t=e.target.value;eK(t?parseInt(t):null)},className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900",children:("PROPERTY"===eM?y:e).map(e=>o.jsx("option",{value:e.id,children:e.name},e.id))})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Phone Number *"}),o.jsx("input",{type:"tel",value:eW,onChange:e=>eq(e.target.value),placeholder:"+91 98765 43210",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})]})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-neutral-200",children:[o.jsx(N.Z,{variant:"secondary",onClick:()=>{eE(!1),eD(null),eU(""),e$(""),eq("")},children:"Cancel"}),o.jsx(N.Z,{variant:"primary",onClick:async()=>{let e=e_.trim(),t=eG.trim(),s=eW.trim();if(!e||!t||!s){alert("First name, last name, and phone number are required.");return}try{let a=await fetch(`/api/users/${eR.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({roleKey:eZ,scopeType:eM,scopeId:"ORG"===eM?null:ez,phone:s,firstName:e,lastName:t})});if(a.ok)alert("User updated successfully!"),eE(!1),eD(null),window.location.reload();else{let e=await a.json();alert("Failed to update user: "+e.error)}}catch(e){alert("Error updating user"),console.error(e)}},children:"Save Changes"})]})]})]})}),eF&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,o.jsxs)("div",{className:"p-6 border-b border-neutral-200 flex items-center justify-between",children:[o.jsx("h3",{className:"text-xl font-bold text-neutral-900",children:"Add User"}),o.jsx("button",{onClick:()=>{eI(!1),eH({firstName:"",lastName:"",email:"",phone:"",roleKey:"STAFF_FRONTDESK",scopeType:X,scopeId:Q})},className:"text-neutral-500 hover:text-neutral-900 text-2xl font-bold",children:"\xd7"})]}),(0,o.jsxs)("div",{className:"p-6 space-y-4",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"First Name *"}),o.jsx("input",{type:"text",value:eY.firstName,onChange:e=>eH({...eY,firstName:e.target.value}),placeholder:"First name",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Last Name *"}),o.jsx("input",{type:"text",value:eY.lastName,onChange:e=>eH({...eY,lastName:e.target.value}),placeholder:"Last name",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})]})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Email Address *"}),o.jsx("input",{type:"email",required:!0,value:eY.email,onChange:e=>eH({...eY,email:e.target.value}),placeholder:"staff@podnbeyond.com",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Phone Number *"}),o.jsx("input",{type:"tel",value:eY.phone,onChange:e=>eH({...eY,phone:e.target.value}),placeholder:"+91 98765 43210",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Role *"}),(0,o.jsxs)("select",{value:eY.roleKey,onChange:e=>eH({...eY,roleKey:e.target.value}),className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900",children:[o.jsx("option",{value:"STAFF_FRONTDESK",children:"Front Desk Staff"}),o.jsx("option",{value:"STAFF_OPS",children:"Operations Staff"}),o.jsx("option",{value:"MANAGER",children:"Property Manager"}),o.jsx("option",{value:"ADMIN",children:"Group Administrator"}),o.jsx("option",{value:"SUPERADMIN",children:"Super Administrator"})]})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Access Scope *"}),(0,o.jsxs)("select",{value:eY.scopeType,onChange:t=>{let s=t.target.value;eH({...eY,scopeType:s,scopeId:"ORG"===s?null:"PROPERTY"===s?y?.[0]?.id||null:e?.[0]?.id||null})},className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900",children:[o.jsx("option",{value:"PROPERTY",children:"Single Property"}),o.jsx("option",{value:"BRAND",children:"Brand-Wide"}),o.jsx("option",{value:"ORG",children:"Organization-Wide"})]})]})]}),"ORG"!==eY.scopeType&&(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:["PROPERTY"===eY.scopeType?"Property":"Brand"," *"]}),o.jsx("select",{value:eY.scopeId||"",onChange:e=>{let t=e.target.value;eH({...eY,scopeId:t?parseInt(t,10):null})},className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900",children:("PROPERTY"===eY.scopeType?y:e).map(e=>o.jsx("option",{value:e.id,children:e.name},e.id))})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-neutral-200",children:[o.jsx(N.Z,{variant:"secondary",onClick:()=>{eI(!1),eH({firstName:"",lastName:"",email:"",phone:"",roleKey:"STAFF_FRONTDESK",scopeType:X,scopeId:Q})},children:"Cancel"}),o.jsx(N.Z,{variant:"primary",onClick:async()=>{let e=eY.firstName.trim(),t=eY.lastName.trim(),s=eY.phone.trim();if(!e||!t||!s){alert("First name, last name, and phone number are required.");return}try{let a=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:e,lastName:t,email:eY.email,phone:s,roleKey:eY.roleKey,scopeType:eY.scopeType,scopeId:"ORG"===eY.scopeType?null:eY.scopeId})});if(a.ok)alert("User created successfully!"),eH({firstName:"",lastName:"",email:"",phone:"",roleKey:"STAFF_FRONTDESK",scopeType:X,scopeId:Q}),eI(!1),window.location.reload();else{let e=await a.json();alert("Failed to create user: "+e.error)}}catch(e){alert("Error creating user"),console.error(e)}},children:"Create User"})]})]})]})}),O&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-neutral-900/40 backdrop-blur-sm px-4 py-8",children:(0,o.jsxs)("div",{className:"w-full max-w-5xl overflow-hidden rounded-2xl bg-white shadow-2xl",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between border-b border-neutral-100 px-6 py-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("h3",{className:"text-xl font-semibold text-neutral-900",children:["Edit ",_?.name||"Property"]}),o.jsx("p",{className:"text-sm text-neutral-500",children:"Update property information, room types, and base availability."})]}),o.jsx("button",{type:"button",onClick:tr,className:"text-sm font-medium text-neutral-500 transition hover:text-neutral-900",disabled:Z,children:"Close"})]}),o.jsx("div",{className:"max-h-[70vh] overflow-y-auto px-6 py-5 space-y-6",children:F?o.jsx("div",{className:"py-10 text-center text-sm text-neutral-500",children:"Loading property configuration…"}):(0,o.jsxs)(o.Fragment,{children:[M&&o.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-600",children:M}),(0,o.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,o.jsxs)("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wide text-neutral-700",children:"Property Details"}),o.jsx(v.Z,{label:"Property Name",value:_?.name??"",onChange:e=>ti("name",e.target.value),fullWidth:!0}),(0,o.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsx(v.Z,{label:"Phone",value:_?.phone??"",onChange:e=>ti("phone",e.target.value),fullWidth:!0}),o.jsx(v.Z,{label:"Email",type:"email",value:_?.email??"",onChange:e=>ti("email",e.target.value),fullWidth:!0}),o.jsx(v.Z,{label:"Timezone",value:_?.timezone??"Asia/Kolkata",onChange:e=>ti("timezone",e.target.value),fullWidth:!0}),o.jsx(v.Z,{label:"Currency",value:_?.currency??"INR",onChange:e=>ti("currency",e.target.value),fullWidth:!0}),o.jsx(v.Z,{label:"Default Buffer (%)",type:"number",value:_?.defaultBuffer??"0",onChange:e=>ti("defaultBuffer",e.target.value),fullWidth:!0})]}),(0,o.jsxs)("label",{className:"flex items-center gap-3 rounded-lg border border-neutral-200 bg-neutral-50 px-4 py-3 text-sm text-neutral-700",children:[o.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-neutral-300 text-neutral-900 focus:ring-neutral-900",checked:_?.overbookingEnabled!==!1,onChange:e=>ti("overbookingEnabled",e.target.checked)}),"Allow controlled overbooking (respect property buffer)"]}),(0,o.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsx(v.Z,{label:"City",value:_?.city??"",onChange:e=>ti("city",e.target.value),fullWidth:!0}),o.jsx(v.Z,{label:"State",value:_?.state??"",onChange:e=>ti("state",e.target.value),fullWidth:!0}),o.jsx(v.Z,{label:"Postal Code",value:_?.pincode??"",onChange:e=>ti("pincode",e.target.value),fullWidth:!0})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Address"}),o.jsx("textarea",{className:"w-full rounded-lg border border-neutral-300 px-4 py-3 text-sm text-neutral-800 focus:outline-none focus:ring-2 focus:ring-neutral-900",rows:3,value:_?.address??"",onChange:e=>ti("address",e.target.value)})]}),ta?.property?.defaultBuffer!==void 0&&(0,o.jsxs)("div",{className:"rounded-lg bg-neutral-50 px-4 py-3 text-xs text-neutral-600",children:[o.jsx("span",{className:"font-semibold text-neutral-900",children:"Property Buffer:"}),(0,o.jsxs)("span",{className:"ml-2",children:[ta.property.defaultBuffer,"%"]}),o.jsx("span",{className:"ml-3 font-semibold text-neutral-900",children:"Timezone:"}),o.jsx("span",{className:"ml-2",children:ta.property.timezone||"Asia/Kolkata"})]})]}),(0,o.jsxs)("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wide text-neutral-700",children:"Notes"}),o.jsx("p",{className:"rounded-lg border border-dashed border-neutral-200 bg-neutral-50 px-4 py-3 text-sm text-neutral-600",children:"Updating property details and room types will regenerate BAR pricing and recalculate inventory buffers for the next 60 days."})]})]}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,o.jsxs)("div",{children:[o.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wide text-neutral-700",children:"Room Types & Base Pods"}),o.jsx("p",{className:"text-xs text-neutral-500",children:"Adjust base availability and BAR (Best Available Rate) pricing. Remove a room type to deactivate it."})]}),o.jsx(N.Z,{variant:"primary",size:"sm",onClick:()=>{$(e=>[...e,{id:null,tempId:`new-${Date.now()}`,name:"",code:"",baseRooms:"0",capacity:"1",description:"",isActive:!0,ratePlanPrice:"",sortOrder:String(e.length),inventorySummary:null}])},children:"Add Room Type"})]}),0===G.length?o.jsx("div",{className:"rounded-lg border border-neutral-200 bg-neutral-50 px-4 py-6 text-center text-sm text-neutral-500",children:"No room types configured yet. Add your first room type to begin syncing availability."}):o.jsx("div",{className:"space-y-4",children:G.map((e,t)=>{let s=e.id??e.tempId??t;return(0,o.jsxs)("div",{className:"rounded-xl border border-neutral-200 px-4 py-4 shadow-sm",children:[(0,o.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[o.jsx("div",{className:"flex-1",children:o.jsx(v.Z,{label:"Room Type Name",value:e.name,onChange:e=>td(t,"name",e.target.value),fullWidth:!0})}),(0,o.jsxs)("div",{className:"flex items-center gap-4",children:[(0,o.jsxs)("label",{className:"flex items-center gap-2 text-xs font-medium text-neutral-600",children:[o.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-neutral-300 text-neutral-900 focus:ring-neutral-900",checked:!1!==e.isActive,onChange:e=>td(t,"isActive",e.target.checked)}),"Active"]}),o.jsx("button",{type:"button",className:"text-xs font-medium text-red-600 hover:text-red-700",onClick:()=>to(t),disabled:Z,children:"Remove"})]})]}),(0,o.jsxs)("div",{className:"grid gap-4 pt-4 md:grid-cols-5",children:[o.jsx(v.Z,{label:"Base Pods",type:"number",value:e.baseRooms,onChange:e=>td(t,"baseRooms",e.target.value),fullWidth:!0}),o.jsx(v.Z,{label:"Capacity",type:"number",value:e.capacity,onChange:e=>td(t,"capacity",e.target.value),fullWidth:!0}),o.jsx(v.Z,{label:"BAR Price (INR)",type:"number",value:e.ratePlanPrice??"",onChange:e=>td(t,"ratePlanPrice",e.target.value),fullWidth:!0}),o.jsx(v.Z,{label:"Sort Order",type:"number",value:e.sortOrder??String(t),onChange:e=>td(t,"sortOrder",e.target.value),fullWidth:!0}),o.jsx(v.Z,{label:"Code (optional)",value:e.code??"",onChange:e=>td(t,"code",e.target.value),fullWidth:!0})]}),(0,o.jsxs)("div",{className:"pt-4",children:[o.jsx("label",{className:"block text-xs font-semibold text-neutral-600 mb-2",children:"Description"}),o.jsx("textarea",{className:"w-full rounded-lg border border-neutral-200 px-3 py-2 text-sm text-neutral-700 focus:outline-none focus:ring-2 focus:ring-neutral-900",rows:2,value:e.description||"",onChange:e=>td(t,"description",e.target.value)})]}),e.inventorySummary&&(0,o.jsxs)("div",{className:"mt-4 grid gap-3 rounded-lg bg-neutral-50 px-4 py-3 text-xs text-neutral-600 md:grid-cols-3",children:[(0,o.jsxs)("div",{children:[o.jsx("span",{className:"font-semibold text-neutral-900",children:e.inventorySummary.totalFreeToSell??0}),o.jsx("span",{className:"ml-1",children:"free to sell (next window)"})]}),(0,o.jsxs)("div",{children:[o.jsx("span",{className:"font-semibold text-neutral-900",children:e.inventorySummary.totalBooked??0}),o.jsx("span",{className:"ml-1",children:"booked"})]}),(0,o.jsxs)("div",{children:[o.jsx("span",{className:"font-semibold text-neutral-900",children:e.inventorySummary.totalHolds??0}),o.jsx("span",{className:"ml-1",children:"on hold"})]})]})]},s)})})]})]})}),(0,o.jsxs)("div",{className:"flex flex-col gap-3 border-t border-neutral-100 bg-neutral-50 px-6 py-4 text-sm text-neutral-600 md:flex-row md:items-center md:justify-between",children:[o.jsx("span",{children:"Saving will refresh BAR pricing and re-sync OTA availability automatically."}),(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[o.jsx(N.Z,{variant:"ghost",size:"sm",onClick:tr,disabled:Z,children:"Cancel"}),o.jsx(N.Z,{variant:"primary",size:"sm",onClick:tc,disabled:Z,children:Z?"Saving…":"Save Changes"})]})]})]})}),o.jsx(b.Z,{})]})}async function w(){let e=process.env.NEXT_PUBLIC_BACKEND_URL||process.env.BACKEND_URL||"http://localhost:4000";try{console.log("Fetching admin data from:",e);let[t,s,a,l,r]=await Promise.all([fetch(`${e}/api/brands`).catch(e=>(console.error("Brands fetch failed:",e),null)),fetch(`${e}/api/properties`).catch(e=>(console.error("Properties fetch failed:",e),null)),fetch(`${e}/api/booking/bookings`).catch(e=>(console.error("Bookings fetch failed:",e),null)),fetch(`${e}/api/users`).catch(e=>(console.error("Users fetch failed:",e),null)),fetch(`${e}/api/booking/rooms`).catch(e=>(console.error("Room types fetch failed:",e),null))]),n=t&&(await t.json()).brands||[],i=s&&(await s.json()).properties||[],d=a&&(await a.json()).bookings||[],o=l&&(await l.json()).users||[],c=r?await r.json():[],x=await fetch(`${e}/api/loyalty/accounts`).catch(e=>(console.error("Loyalty fetch failed:",e),null)),m=x&&(await x.json()).accounts||[];return console.log("Admin data fetched:",{brands:n.length,properties:i.length,bookings:Array.isArray(d)?d.length:0}),{props:{brands:n,properties:i,bookings:Array.isArray(d)?d:[],users:o,roomTypes:Array.isArray(c)?c:[],loyalty:m,stats:{brands:n.length,properties:i.length,bookings:Array.isArray(d)?d.length:0,loyalty:m.length,users:o.length}}}}catch(e){return console.error("Error in getServerSideProps:",e),{props:{brands:[],properties:[],bookings:[],users:[],roomTypes:[],loyalty:[],stats:{brands:0,properties:0,bookings:0,loyalty:0,users:0}}}}}let S=(0,n.l)(a,"default"),k=(0,n.l)(a,"getStaticProps"),P=(0,n.l)(a,"getStaticPaths"),C=(0,n.l)(a,"getServerSideProps"),T=(0,n.l)(a,"config"),A=(0,n.l)(a,"reportWebVitals"),R=(0,n.l)(a,"unstable_getStaticProps"),D=(0,n.l)(a,"unstable_getStaticPaths"),O=(0,n.l)(a,"unstable_getStaticParams"),E=(0,n.l)(a,"unstable_getServerProps"),F=(0,n.l)(a,"unstable_getServerSideProps"),I=new l.PagesRouteModule({definition:{kind:r.x.PAGES,page:"/admin",pathname:"/admin",bundlePath:"",filename:""},components:{App:d.default,Document:i.default},userland:a})},9747:(e,t,s)=>{s.d(t,{Z:()=>l});var a=s(997);s(6689);let l=({children:e,variant:t="neutral",size:s="md",className:l=""})=>a.jsx("span",{className:`inline-flex items-center font-medium rounded-full ${{capsule:"bg-capsule-100 text-capsule-800 border border-capsule-200",smart:"bg-smart-100 text-smart-800 border border-smart-200",sanctuary:"bg-sanctuary-100 text-sanctuary-800 border border-sanctuary-200",sauna:"bg-sauna-100 text-sauna-800 border border-sauna-200",neutral:"bg-neutral-100 text-neutral-800 border border-neutral-200",success:"bg-green-100 text-green-800 border border-green-200",warning:"bg-yellow-100 text-yellow-800 border border-yellow-200",error:"bg-red-100 text-red-800 border border-red-200"}[t]} ${{sm:"px-2 py-0.5 text-xs",md:"px-3 py-1 text-sm",lg:"px-4 py-1.5 text-base"}[s]} ${l}`,children:e})},9767:(e,t,s)=>{s.d(t,{Z:()=>l});var a=s(997);s(6689);let l=({variant:e="primary",size:t="md",fullWidth:s=!1,children:l,className:r="",disabled:n=!1,...i})=>a.jsx("button",{className:`font-semibold rounded-button transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${{primary:"bg-neutral-900 text-white hover:bg-neutral-800 focus:ring-neutral-900",secondary:"border-2 border-neutral-900 text-neutral-900 hover:bg-neutral-900 hover:text-white focus:ring-neutral-900",capsule:"bg-capsule-500 text-white hover:bg-capsule-600 focus:ring-capsule-500",smart:"bg-smart-500 text-white hover:bg-smart-600 focus:ring-smart-500",sanctuary:"bg-sanctuary-500 text-white hover:bg-sanctuary-600 focus:ring-sanctuary-500",sauna:"bg-sauna-500 text-white hover:bg-sauna-600 focus:ring-sauna-500",ghost:"text-neutral-700 hover:bg-neutral-100 focus:ring-neutral-500"}[e]} ${{sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg",xl:"px-10 py-5 text-xl"}[t]} ${s?"w-full":""} ${r}`,disabled:n,...i,children:l})},3546:(e,t,s)=>{s.d(t,{Z:()=>l});var a=s(997);s(6689);let l=({label:e,error:t,helperText:s,fullWidth:l=!1,className:r="",id:n,...i})=>{let d=n||e?.toLowerCase().replace(/\s+/g,"-"),o=l?"w-full":"";return(0,a.jsxs)("div",{className:`${o}`,children:[e&&a.jsx("label",{htmlFor:d,className:"block text-sm font-semibold text-neutral-700 mb-2",children:e}),a.jsx("input",{id:d,className:`
          px-4 py-3 
          border rounded-lg 
          ${t?"border-red-500":"border-neutral-300"}
          focus:outline-none focus:ring-2 
          ${t?"focus:ring-red-500":"focus:ring-neutral-900"}
          focus:border-transparent
          disabled:bg-neutral-100 disabled:cursor-not-allowed
          transition-all duration-200
          ${o}
          ${r}
        `,...i}),t&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:t}),s&&!t&&a.jsx("p",{className:"mt-1 text-sm text-neutral-600",children:s})]})}},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[859,132,664,163,407],()=>s(2140));module.exports=a})();