(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[462],{5014:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/logout",function(){return a(8806)}])},5094:function(t,e,a){"use strict";a.d(e,{a:function(){return s}});var n=a(7294);let o=null;function s(){let[t,e]=(0,n.useState)(o&&Date.now()-o.timestamp<6e4?{data:o.data,status:o.data?"authenticated":"unauthenticated",error:null}:localStorage.getItem("pod-session-token")?{data:null,status:"loading",error:null}:{data:null,status:"unauthenticated",error:null}),a=(0,n.useCallback)(async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{if(console.log("\uD83D\uDD0D [useAuth] Fetching session... forceRefresh:",t),!t&&o&&Date.now()-o.timestamp<6e4){console.log("✅ [useAuth] Using cached session"),e({data:o.data,status:o.data?"authenticated":"unauthenticated",error:null});return}let a=localStorage.getItem("pod-session-token");if(console.log("\uD83D\uDD11 [useAuth] Session token from localStorage:",a?a.substring(0,20)+"...":"NULL"),!a){console.log("❌ [useAuth] No session token found"),o={data:null,timestamp:Date.now()},e({data:null,status:"unauthenticated",error:null});return}let n=await fetch("/api/auth/session",{credentials:"include",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(n.ok){let t=await n.json();o={data:t,timestamp:Date.now()},e({data:t,status:"authenticated",error:null})}else 401===n.status?(localStorage.removeItem("pod-session-token"),o={data:null,timestamp:Date.now()},e({data:null,status:"unauthenticated",error:"Session expired. Please log in again."})):(console.error("Session fetch failed with status:",n.status),localStorage.removeItem("pod-session-token"),o={data:null,timestamp:Date.now()},e({data:null,status:"unauthenticated",error:"Failed to verify session. Please log in again."}))}catch(t){console.error("Failed to fetch session:",t),localStorage.removeItem("pod-session-token"),o={data:null,timestamp:Date.now()},e({data:null,status:"unauthenticated",error:"Connection error. Please check your internet."})}},[]);(0,n.useEffect)(()=>{(!o||Date.now()-o.timestamp>=6e4)&&a()},[a]);let s=(0,n.useCallback)(async t=>{try{let a=localStorage.getItem("pod-session-token");a&&await fetch("/api/auth/signout",{method:"POST",credentials:"include",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}}),localStorage.removeItem("pod-session-token"),o=null,e({data:null,status:"unauthenticated",error:null}),window.location.href=(null==t?void 0:t.callbackUrl)||"/"}catch(e){console.error("Failed to sign out:",e),localStorage.removeItem("pod-session-token"),o=null,window.location.href=(null==t?void 0:t.callbackUrl)||"/"}},[]),l=(0,n.useCallback)(()=>{a(!0)},[a]);return{data:t.data,status:t.status,error:t.error,signOut:s,refreshSession:l}}},8806:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return u}});var n=a(5893),o=a(7294),s=a(5094),l=a(9008),r=a.n(l);function u(){let{signOut:t}=(0,s.a)();return(0,o.useEffect)(()=>{t({callbackUrl:"/"})},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r(),{children:[(0,n.jsx)("title",{children:"Signing Out... | POD N BEYOND"}),(0,n.jsx)("meta",{name:"robots",content:"noindex,nofollow"})]}),(0,n.jsx)("div",{className:"min-h-screen bg-neutral-900 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-white text-lg",children:"Signing you out..."})]})})]})}},9008:function(t,e,a){t.exports=a(3867)}},function(t){t.O(0,[888,774,179],function(){return t(t.s=5014)}),_N_E=t.O()}]);