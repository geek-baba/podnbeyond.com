(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[300],{6177:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/login",function(){return n(6311)}])},7360:function(e,t,n){"use strict";var r=n(5893);n(7294),t.Z=e=>{let{children:t,size:n="xl",className:s=""}=e;return(0,r.jsx)("div",{className:"container ".concat({sm:"max-w-3xl",md:"max-w-5xl",lg:"max-w-6xl",xl:"max-w-7xl",full:"max-w-full"}[n]," mx-auto px-4 sm:px-6 lg:px-8 ").concat(s),children:t})}},4410:function(e,t,n){"use strict";var r=n(5893);n(7294),t.Z=e=>{let{variant:t="primary",size:n="md",fullWidth:s=!1,children:a,className:o="",disabled:l=!1,...i}=e;return(0,r.jsx)("button",{className:"".concat("font-semibold rounded-button transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-neutral-900 text-white hover:bg-neutral-800 focus:ring-neutral-900",secondary:"border-2 border-neutral-900 text-neutral-900 hover:bg-neutral-900 hover:text-white focus:ring-neutral-900",capsule:"bg-capsule-500 text-white hover:bg-capsule-600 focus:ring-capsule-500",smart:"bg-smart-500 text-white hover:bg-smart-600 focus:ring-smart-500",sanctuary:"bg-sanctuary-500 text-white hover:bg-sanctuary-600 focus:ring-sanctuary-500",sauna:"bg-sauna-500 text-white hover:bg-sauna-600 focus:ring-sauna-500",ghost:"text-neutral-700 hover:bg-neutral-100 focus:ring-neutral-500"}[t]," ").concat({sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg",xl:"px-10 py-5 text-xl"}[n]," ").concat(s?"w-full":""," ").concat(o),disabled:l,...i,children:a})}},6650:function(e,t,n){"use strict";var r=n(5893);n(7294),t.Z=e=>{let{children:t,variant:n="default",padding:s="md",hover:a=!1,className:o="",onClick:l}=e;return(0,r.jsx)("div",{className:"".concat("bg-white rounded-card overflow-hidden"," ").concat({default:"shadow-card",elevated:"shadow-card-hover",bordered:"border border-neutral-200"}[n]," ").concat({none:"",sm:"p-4",md:"p-6",lg:"p-8"}[s]," ").concat(a?"hover:shadow-card-hover transition-shadow duration-300 cursor-pointer":""," ").concat(l?"cursor-pointer":""," ").concat(o),onClick:l,children:t})}},6311:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(5893),s=n(7294),a=n(1163),o=n(9008),l=n.n(o),i=n(7360),c=n(4410),d=n(6650);function u(){let e=(0,a.useRouter)(),[t,n]=(0,s.useState)(""),[o,u]=(0,s.useState)(["","","","","",""]),[x,m]=(0,s.useState)(!1),[h,f]=(0,s.useState)(!1),[g,p]=(0,s.useState)(""),[b,v]=(0,s.useState)(60),j=[(0,s.useRef)(null),(0,s.useRef)(null),(0,s.useRef)(null),(0,s.useRef)(null),(0,s.useRef)(null),(0,s.useRef)(null)],{callbackUrl:N}=e.query;(0,s.useEffect)(()=>{if(h&&b>0){let e=setTimeout(()=>v(b-1),1e3);return()=>clearTimeout(e)}},[h,b]);let y=async e=>{e.preventDefault(),p(""),m(!0);try{let e=await fetch("".concat("http://localhost:4000","/api/otp/send"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})}),n=await e.json();n.success?(f(!0),v(60),p(""),setTimeout(()=>{var e;return null===(e=j[0].current)||void 0===e?void 0:e.focus()},100)):p(n.error||"Failed to send OTP. Please try again.")}catch(e){console.error("Send OTP error:",e),p("Unable to send OTP. Please check your connection and try again.")}finally{m(!1)}},w=(e,t)=>{if(t&&!/^\d$/.test(t))return;let n=[...o];if(n[e]=t,u(n),t&&e<5){var r;null===(r=j[e+1].current)||void 0===r||r.focus()}if(5===e&&t){let e=n.join("");6===e.length&&P(e)}},D=(e,t)=>{if("Backspace"===t.key&&!o[e]&&e>0){var n;null===(n=j[e-1].current)||void 0===n||n.focus()}},k=e=>{e.preventDefault();let t=e.clipboardData.getData("text/plain").trim();if(/^\d{6}$/.test(t)){var n;u(t.split("")),null===(n=j[5].current)||void 0===n||n.focus(),setTimeout(()=>{P(t)},100)}},P=async e=>{let n=e||o.join("");if(6!==n.length){p("Please enter all 6 digits");return}p(""),m(!0);try{let e=await fetch("".concat("http://localhost:4000","/api/otp/verify"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:t,otp:n})});if(!e.ok){let t=await e.json();throw Error(t.error||"Verification failed")}let r=await e.json();if(r.success&&r.sessionToken){console.log("\uD83D\uDCDD Storing session token:",r.sessionToken.substring(0,20)+"..."),localStorage.setItem("pod-session-token",r.sessionToken);let e=localStorage.getItem("pod-session-token");console.log("✅ Session token verified in localStorage:",e?"YES":"NO"),console.log("\uD83D\uDD0D Stored value:",(null==e?void 0:e.substring(0,20))+"..."),await new Promise(e=>setTimeout(e,300)),console.log("\uD83D\uDE80 Redirecting to:",r.redirectTo||"/admin"),window.location.href=r.redirectTo||"/admin"}else throw console.error("❌ No session token in response:",r),Error("No session token received")}catch(t){var r;console.error("Verify OTP error:",t);let e="Verification failed. Please try again.";t.message.includes("Invalid OTP")?e=t.message:t.message.includes("expired")?e="OTP expired. Please request a new code.":t.message.includes("attempts")?e=t.message:t.message.includes("not found")&&(e="OTP not found. Please request a new code."),p(e),u(["","","","","",""]),null===(r=j[0].current)||void 0===r||r.focus()}finally{m(!1)}},S=async()=>{p(""),v(60),await y({preventDefault:()=>{}})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l(),{children:[(0,r.jsx)("title",{children:"Admin Login | POD N BEYOND"}),(0,r.jsx)("meta",{name:"robots",content:"noindex,nofollow"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-neutral-900 via-neutral-800 to-neutral-900 flex items-center justify-center px-4",children:(0,r.jsx)(i.Z,{children:(0,r.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("a",{href:"/",children:(0,r.jsx)("img",{src:"/logo-podnbeyond.png",alt:"POD N BEYOND",className:"h-12 mx-auto mb-4"})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Admin Portal"}),(0,r.jsx)("p",{className:"text-neutral-400",children:"POD N BEYOND GROUP Management"})]}),(0,r.jsx)(d.Z,{variant:"elevated",padding:"lg",children:h?(0,r.jsxs)("div",{className:"py-4",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,r.jsx)("h3",{className:"text-2xl font-bold text-neutral-900 mb-2",children:"Enter Verification Code"}),(0,r.jsx)("p",{className:"text-neutral-600 mb-1",children:"We sent a 6-digit code to:"}),(0,r.jsx)("p",{className:"text-lg font-semibold text-neutral-900 mb-4",children:t})]}),(0,r.jsx)("div",{className:"flex justify-center gap-2 mb-6",children:o.map((e,t)=>(0,r.jsx)("input",{ref:j[t],type:"text",inputMode:"numeric",maxLength:1,value:e,onChange:e=>w(t,e.target.value),onKeyDown:e=>D(t,e),onPaste:0===t?k:void 0,className:"w-12 h-14 text-center text-2xl font-bold border-2 border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-neutral-900",disabled:x},t))}),g&&(0,r.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm mb-4",children:g}),(0,r.jsx)(c.Z,{variant:"primary",size:"lg",fullWidth:!0,onClick:()=>P(),disabled:x||6!==o.join("").length,children:x?"Verifying...":"Verify Code"}),(0,r.jsxs)("div",{className:"mt-6 pt-6 border-t border-neutral-200 text-center",children:[(0,r.jsx)("p",{className:"text-sm text-neutral-600 mb-2",children:"Didn't receive the code?"}),b>0?(0,r.jsxs)("p",{className:"text-sm text-neutral-500",children:["Resend in ",b,"s"]}):(0,r.jsx)("button",{onClick:S,className:"text-sm text-neutral-900 hover:underline font-semibold",children:"Resend Code"}),(0,r.jsx)("button",{onClick:()=>{f(!1),u(["","","","","",""]),p("")},className:"block mx-auto mt-4 text-sm text-neutral-600 hover:text-neutral-900",children:"Use Different Email"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-neutral-900 mb-2",children:"Sign In"}),(0,r.jsx)("p",{className:"text-neutral-600 mb-6",children:"Enter your email to receive a login code"}),(0,r.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Email Address"}),(0,r.jsx)("input",{type:"email",value:t,onChange:e=>n(e.target.value),placeholder:"admin@podnbeyond.com",required:!0,className:"w-full px-4 py-3 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900",disabled:x})]}),g&&(0,r.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:g}),(0,r.jsx)(c.Z,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,disabled:x,children:x?"Sending...":"Send Login Code"})]}),(0,r.jsx)("div",{className:"mt-6 pt-6 border-t border-neutral-200",children:(0,r.jsx)("p",{className:"text-sm text-neutral-600 text-center",children:(0,r.jsx)("a",{href:"/",className:"text-neutral-900 hover:underline",children:"← Back to Website"})})})]})}),(0,r.jsxs)("div",{className:"mt-6 text-center text-sm text-neutral-400",children:[(0,r.jsx)("p",{children:"\uD83D\uDD12 Secure authentication via 6-digit code"}),(0,r.jsx)("p",{className:"mt-1",children:"Code expires in 10 minutes"})]})]})})})]})}},9008:function(e,t,n){e.exports=n(3867)},1163:function(e,t,n){e.exports=n(3079)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=6177)}),_N_E=e.O()}]);