(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[546],{6230:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/forbidden",function(){return a(1576)}])},7360:function(e,t,a){"use strict";var n=a(5893);a(7294),t.Z=e=>{let{children:t,size:a="xl",className:s=""}=e;return(0,n.jsx)("div",{className:"container ".concat({sm:"max-w-3xl",md:"max-w-5xl",lg:"max-w-6xl",xl:"max-w-7xl",full:"max-w-full"}[a]," mx-auto px-4 sm:px-6 lg:px-8 ").concat(s),children:t})}},4410:function(e,t,a){"use strict";var n=a(5893);a(7294),t.Z=e=>{let{variant:t="primary",size:a="md",fullWidth:s=!1,children:r,className:o="",disabled:l=!1,...i}=e;return(0,n.jsx)("button",{className:"".concat("font-semibold rounded-button transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-neutral-900 text-white hover:bg-neutral-800 focus:ring-neutral-900",secondary:"border-2 border-neutral-900 text-neutral-900 hover:bg-neutral-900 hover:text-white focus:ring-neutral-900",capsule:"bg-capsule-500 text-white hover:bg-capsule-600 focus:ring-capsule-500",smart:"bg-smart-500 text-white hover:bg-smart-600 focus:ring-smart-500",sanctuary:"bg-sanctuary-500 text-white hover:bg-sanctuary-600 focus:ring-sanctuary-500",sauna:"bg-sauna-500 text-white hover:bg-sauna-600 focus:ring-sauna-500",ghost:"text-neutral-700 hover:bg-neutral-100 focus:ring-neutral-500"}[t]," ").concat({sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg",xl:"px-10 py-5 text-xl"}[a]," ").concat(s?"w-full":""," ").concat(o),disabled:l,...i,children:r})}},6650:function(e,t,a){"use strict";var n=a(5893);a(7294),t.Z=e=>{let{children:t,variant:a="default",padding:s="md",hover:r=!1,className:o="",onClick:l}=e;return(0,n.jsx)("div",{className:"".concat("bg-white rounded-card overflow-hidden"," ").concat({default:"shadow-card",elevated:"shadow-card-hover",bordered:"border border-neutral-200"}[a]," ").concat({none:"",sm:"p-4",md:"p-6",lg:"p-8"}[s]," ").concat(r?"hover:shadow-card-hover transition-shadow duration-300 cursor-pointer":""," ").concat(l?"cursor-pointer":""," ").concat(o),onClick:l,children:t})}},5094:function(e,t,a){"use strict";a.d(t,{a:function(){return r}});var n=a(7294);let s=null;function r(){let[e,t]=(0,n.useState)(s&&Date.now()-s.timestamp<6e4?{data:s.data,status:s.data?"authenticated":"unauthenticated",error:null}:localStorage.getItem("pod-session-token")?{data:null,status:"loading",error:null}:{data:null,status:"unauthenticated",error:null}),a=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{if(console.log("\uD83D\uDD0D [useAuth] Fetching session... forceRefresh:",e),!e&&s&&Date.now()-s.timestamp<6e4){console.log("✅ [useAuth] Using cached session"),t({data:s.data,status:s.data?"authenticated":"unauthenticated",error:null});return}let a=localStorage.getItem("pod-session-token");if(console.log("\uD83D\uDD11 [useAuth] Session token from localStorage:",a?a.substring(0,20)+"...":"NULL"),!a){console.log("❌ [useAuth] No session token found"),s={data:null,timestamp:Date.now()},t({data:null,status:"unauthenticated",error:null});return}let n=await fetch("/api/auth/session",{credentials:"include",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(n.ok){let e=await n.json();s={data:e,timestamp:Date.now()},t({data:e,status:"authenticated",error:null})}else 401===n.status?(localStorage.removeItem("pod-session-token"),s={data:null,timestamp:Date.now()},t({data:null,status:"unauthenticated",error:"Session expired. Please log in again."})):(console.error("Session fetch failed with status:",n.status),localStorage.removeItem("pod-session-token"),s={data:null,timestamp:Date.now()},t({data:null,status:"unauthenticated",error:"Failed to verify session. Please log in again."}))}catch(e){console.error("Failed to fetch session:",e),localStorage.removeItem("pod-session-token"),s={data:null,timestamp:Date.now()},t({data:null,status:"unauthenticated",error:"Connection error. Please check your internet."})}},[]);(0,n.useEffect)(()=>{(!s||Date.now()-s.timestamp>=6e4)&&a()},[a]);let r=(0,n.useCallback)(async e=>{try{let a=localStorage.getItem("pod-session-token");a&&await fetch("/api/auth/signout",{method:"POST",credentials:"include",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}}),localStorage.removeItem("pod-session-token"),s=null,t({data:null,status:"unauthenticated",error:null}),window.location.href=(null==e?void 0:e.callbackUrl)||"/"}catch(t){console.error("Failed to sign out:",t),localStorage.removeItem("pod-session-token"),s=null,window.location.href=(null==e?void 0:e.callbackUrl)||"/"}},[]),o=(0,n.useCallback)(()=>{a(!0)},[a]);return{data:e.data,status:e.status,error:e.error,signOut:r,refreshSession:o}}},1576:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var n=a(5893),s=a(9008),r=a.n(s),o=a(5094),l=a(7360),i=a(4410),c=a(6650);function u(){var e;let{data:t,signOut:a}=(0,o.a)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r(),{children:[(0,n.jsx)("title",{children:"Access Denied | POD N BEYOND"}),(0,n.jsx)("meta",{name:"robots",content:"noindex,nofollow"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsx)("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center px-4",children:(0,n.jsx)(l.Z,{children:(0,n.jsxs)("div",{className:"max-w-md mx-auto text-center",children:[(0,n.jsxs)(c.Z,{variant:"elevated",padding:"lg",children:[(0,n.jsx)("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,n.jsx)("svg",{className:"w-10 h-10 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,n.jsx)("h1",{className:"text-3xl font-bold text-neutral-900 mb-3",children:"Access Denied"}),(0,n.jsx)("p",{className:"text-neutral-600 mb-2",children:"You don't have permission to access the admin portal."}),(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.email)&&(0,n.jsxs)("p",{className:"text-sm text-neutral-500 mb-6",children:["Signed in as: ",(0,n.jsx)("strong",{children:t.user.email})]}),(0,n.jsx)("div",{className:"space-y-3 mb-6",children:(0,n.jsxs)("div",{className:"p-4 bg-neutral-100 rounded-lg text-left",children:[(0,n.jsx)("p",{className:"text-sm font-semibold text-neutral-900 mb-2",children:"Admin access is restricted to:"}),(0,n.jsxs)("ul",{className:"text-sm text-neutral-600 space-y-1",children:[(0,n.jsx)("li",{children:"• Super Administrators"}),(0,n.jsx)("li",{children:"• Group Administrators"}),(0,n.jsx)("li",{children:"• Property Managers"}),(0,n.jsx)("li",{children:"• Front Desk Staff"}),(0,n.jsx)("li",{children:"• Operations Staff"})]})]})}),(0,n.jsx)("div",{className:"space-y-3",children:t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("a",{href:"/account",children:(0,n.jsx)(i.Z,{variant:"primary",fullWidth:!0,children:"Go to My Account"})}),(0,n.jsx)(i.Z,{variant:"secondary",fullWidth:!0,onClick:()=>a({callbackUrl:"/"}),children:"Sign Out"})]}):(0,n.jsx)("a",{href:"/",children:(0,n.jsx)(i.Z,{variant:"primary",fullWidth:!0,children:"Return to Homepage"})})})]}),(0,n.jsxs)("p",{className:"mt-6 text-sm text-neutral-600",children:["Need admin access?"," ",(0,n.jsx)("a",{href:"mailto:admin@podnbeyond.com",className:"text-neutral-900 hover:underline",children:"Contact Support"})]})]})})})]})}},9008:function(e,t,a){e.exports=a(3867)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=6230)}),_N_E=e.O()}]);