(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[462],{5014:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/logout",function(){return n(8806)}])},5094:function(t,e,n){"use strict";n.d(e,{a:function(){return s}});var a=n(7294);let o=null;function s(){let[t,e]=(0,a.useState)(o&&Date.now()-o.timestamp<6e4?{data:o.data,status:o.data?"authenticated":"unauthenticated",error:null}:{data:null,status:"loading",error:null});(0,a.useEffect)(()=>{(!o||Date.now()-o.timestamp>=6e4)&&n()},[]);let n=(0,a.useCallback)(async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{if(console.log("\uD83D\uDD0D [useAuth] Fetching session... forceRefresh:",t),!t&&o&&Date.now()-o.timestamp<6e4){console.log("✅ [useAuth] Using cached session"),e({data:o.data,status:o.data?"authenticated":"unauthenticated",error:null});return}let n=localStorage.getItem("pod-session-token");if(console.log("\uD83D\uDD11 [useAuth] Session token from localStorage:",n?n.substring(0,20)+"...":"NULL"),!n){console.log("❌ [useAuth] No session token found"),o={data:null,timestamp:Date.now()},e({data:null,status:"unauthenticated",error:null});return}let a=await fetch("".concat("http://localhost:4000","/api/auth/session"),{credentials:"include",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});if(a.ok){let t=await a.json();o={data:t,timestamp:Date.now()},e({data:t,status:"authenticated",error:null})}else if(401===a.status)localStorage.removeItem("pod-session-token"),o={data:null,timestamp:Date.now()},e({data:null,status:"unauthenticated",error:"Session expired. Please log in again."});else throw Error("Failed to fetch session")}catch(t){console.error("Failed to fetch session:",t),e(t=>({...t,status:t.data?"authenticated":"unauthenticated",error:"Connection error. Please check your internet."}))}},[]),s=(0,a.useCallback)(async t=>{try{let n=localStorage.getItem("pod-session-token");n&&await fetch("".concat("http://localhost:4000","/api/auth/signout"),{method:"POST",credentials:"include",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}}),localStorage.removeItem("pod-session-token"),o=null,e({data:null,status:"unauthenticated",error:null}),window.location.href=(null==t?void 0:t.callbackUrl)||"/"}catch(e){console.error("Failed to sign out:",e),localStorage.removeItem("pod-session-token"),o=null,window.location.href=(null==t?void 0:t.callbackUrl)||"/"}},[]),l=(0,a.useCallback)(()=>{n(!0)},[n]);return{data:t.data,status:t.status,error:t.error,signOut:s,refreshSession:l}}},8806:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return i}});var a=n(5893),o=n(7294),s=n(5094),l=n(9008),r=n.n(l);function i(){let{signOut:t}=(0,s.a)();return(0,o.useEffect)(()=>{t({callbackUrl:"/"})},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r(),{children:[(0,a.jsx)("title",{children:"Signing Out... | POD N BEYOND"}),(0,a.jsx)("meta",{name:"robots",content:"noindex,nofollow"})]}),(0,a.jsx)("div",{className:"min-h-screen bg-neutral-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-white text-lg",children:"Signing you out..."})]})})]})}},9008:function(t,e,n){t.exports=n(3867)}},function(t){t.O(0,[888,774,179],function(){return t(t.s=5014)}),_N_E=t.O()}]);