(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[300],{3454:function(e,t,n){"use strict";var r,s;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(s=n.g.process)?void 0:s.env)?n.g.process:n(7663)},6177:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/login",function(){return n(6311)}])},7360:function(e,t,n){"use strict";var r=n(5893);n(7294),t.Z=e=>{let{children:t,size:n="xl",className:s=""}=e;return(0,r.jsx)("div",{className:"container ".concat({sm:"max-w-3xl",md:"max-w-5xl",lg:"max-w-6xl",xl:"max-w-7xl",full:"max-w-full"}[n]," mx-auto px-4 sm:px-6 lg:px-8 ").concat(s),children:t})}},4410:function(e,t,n){"use strict";var r=n(5893);n(7294),t.Z=e=>{let{variant:t="primary",size:n="md",fullWidth:s=!1,children:o,className:a="",disabled:i=!1,...l}=e;return(0,r.jsx)("button",{className:"".concat("font-semibold rounded-button transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-neutral-900 text-white hover:bg-neutral-800 focus:ring-neutral-900",secondary:"border-2 border-neutral-900 text-neutral-900 hover:bg-neutral-900 hover:text-white focus:ring-neutral-900",capsule:"bg-capsule-500 text-white hover:bg-capsule-600 focus:ring-capsule-500",smart:"bg-smart-500 text-white hover:bg-smart-600 focus:ring-smart-500",sanctuary:"bg-sanctuary-500 text-white hover:bg-sanctuary-600 focus:ring-sanctuary-500",sauna:"bg-sauna-500 text-white hover:bg-sauna-600 focus:ring-sauna-500",ghost:"text-neutral-700 hover:bg-neutral-100 focus:ring-neutral-500"}[t]," ").concat({sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg",xl:"px-10 py-5 text-xl"}[n]," ").concat(s?"w-full":""," ").concat(a),disabled:i,...l,children:o})}},6650:function(e,t,n){"use strict";var r=n(5893);n(7294),t.Z=e=>{let{children:t,variant:n="default",padding:s="md",hover:o=!1,className:a="",onClick:i}=e;return(0,r.jsx)("div",{className:"".concat("bg-white rounded-card overflow-hidden"," ").concat({default:"shadow-card",elevated:"shadow-card-hover",bordered:"border border-neutral-200"}[n]," ").concat({none:"",sm:"p-4",md:"p-6",lg:"p-8"}[s]," ").concat(o?"hover:shadow-card-hover transition-shadow duration-300 cursor-pointer":""," ").concat(i?"cursor-pointer":""," ").concat(a),onClick:i,children:t})}},8937:function(e,t,n){"use strict";async function r(e,t){let n="".concat("").concat(e),r=await fetch(n,{...t,headers:{"Content-Type":"application/json",...null==t?void 0:t.headers}});if(!r.ok){let e=await r.json().catch(()=>({error:"HTTP ".concat(r.status,": ").concat(r.statusText)}));throw Error(e.error||e.message||"API request failed")}return r.json()}n.d(t,{N:function(){return r}}),n(3454)},6311:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var r=n(5893),s=n(7294),o=n(1163),a=n(9008),i=n.n(a),l=n(7360),c=n(4410),u=n(6650),d=n(8937);function m(){let e=(0,o.useRouter)(),[t,n]=(0,s.useState)(""),[a,m]=(0,s.useState)(["","","","","",""]),[f,x]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!1),[g,b]=(0,s.useState)(""),[v,y]=(0,s.useState)(60),j=[(0,s.useRef)(null),(0,s.useRef)(null),(0,s.useRef)(null),(0,s.useRef)(null),(0,s.useRef)(null),(0,s.useRef)(null)],{callbackUrl:w}=e.query;(0,s.useEffect)(()=>{if(h&&v>0){let e=setTimeout(()=>y(v-1),1e3);return()=>clearTimeout(e)}},[h,v]);let N=async e=>{e.preventDefault(),b(""),x(!0);try{let e=await (0,d.N)("/api/otp/send",{method:"POST",body:JSON.stringify({email:t})});e.success?(p(!0),y(60),b(""),setTimeout(()=>{var e;return null===(e=j[0].current)||void 0===e?void 0:e.focus()},100)):b(e.error||"Failed to send OTP. Please try again.")}catch(e){console.error("Send OTP error:",e),b("Unable to send OTP. Please check your connection and try again.")}finally{x(!1)}},T=(e,t)=>{if(t&&!/^\d$/.test(t))return;let n=[...a];if(n[e]=t,m(n),t&&e<5){var r;null===(r=j[e+1].current)||void 0===r||r.focus()}if(5===e&&t){let e=n.join("");6===e.length&&P(e)}},k=(e,t)=>{if("Backspace"===t.key&&!a[e]&&e>0){var n;null===(n=j[e-1].current)||void 0===n||n.focus()}},D=e=>{e.preventDefault();let t=e.clipboardData.getData("text/plain").trim();if(/^\d{6}$/.test(t)){var n;m(t.split("")),null===(n=j[5].current)||void 0===n||n.focus(),setTimeout(()=>{P(t)},100)}},P=async e=>{let n=e||a.join("");if(6!==n.length){b("Please enter all 6 digits");return}b(""),x(!0);try{let e=await (0,d.N)("/api/otp/verify",{method:"POST",credentials:"include",body:JSON.stringify({email:t,otp:n})});if(e.success&&e.sessionToken){console.log("\uD83D\uDCDD Storing session token:",e.sessionToken.substring(0,20)+"..."),localStorage.setItem("pod-session-token",e.sessionToken);let t=localStorage.getItem("pod-session-token");console.log("✅ Session token verified in localStorage:",t?"YES":"NO"),console.log("\uD83D\uDD0D Stored value:",(null==t?void 0:t.substring(0,20))+"..."),await new Promise(e=>setTimeout(e,300)),console.log("\uD83D\uDE80 Redirecting to:",e.redirectTo||"/admin"),window.location.href=e.redirectTo||"/admin"}else throw console.error("❌ No session token in response:",e),Error("No session token received")}catch(t){var r;console.error("Verify OTP error:",t);let e="Verification failed. Please try again.";t.message.includes("Invalid OTP")?e=t.message:t.message.includes("expired")?e="OTP expired. Please request a new code.":t.message.includes("attempts")?e=t.message:t.message.includes("not found")&&(e="OTP not found. Please request a new code."),b(e),m(["","","","","",""]),null===(r=j[0].current)||void 0===r||r.focus()}finally{x(!1)}},S=async()=>{b(""),y(60),await N({preventDefault:()=>{}})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i(),{children:[(0,r.jsx)("title",{children:"Admin Login | POD N BEYOND"}),(0,r.jsx)("meta",{name:"robots",content:"noindex,nofollow"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-neutral-900 via-neutral-800 to-neutral-900 flex items-center justify-center px-4",children:(0,r.jsx)(l.Z,{children:(0,r.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("a",{href:"/",children:(0,r.jsx)("img",{src:"/logo-podnbeyond.png",alt:"POD N BEYOND",className:"h-12 mx-auto mb-4"})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Admin Portal"}),(0,r.jsx)("p",{className:"text-neutral-400",children:"POD N BEYOND GROUP Management"})]}),(0,r.jsx)(u.Z,{variant:"elevated",padding:"lg",children:h?(0,r.jsxs)("div",{className:"py-4",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,r.jsx)("h3",{className:"text-2xl font-bold text-neutral-900 mb-2",children:"Enter Verification Code"}),(0,r.jsx)("p",{className:"text-neutral-600 mb-1",children:"We sent a 6-digit code to:"}),(0,r.jsx)("p",{className:"text-lg font-semibold text-neutral-900 mb-4",children:t})]}),(0,r.jsx)("div",{className:"flex justify-center gap-2 mb-6",children:a.map((e,t)=>(0,r.jsx)("input",{ref:j[t],type:"text",inputMode:"numeric",maxLength:1,value:e,onChange:e=>T(t,e.target.value),onKeyDown:e=>k(t,e),onPaste:0===t?D:void 0,className:"w-12 h-14 text-center text-2xl font-bold border-2 border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-neutral-900",disabled:f},t))}),g&&(0,r.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm mb-4",children:g}),(0,r.jsx)(c.Z,{variant:"primary",size:"lg",fullWidth:!0,onClick:()=>P(),disabled:f||6!==a.join("").length,children:f?"Verifying...":"Verify Code"}),(0,r.jsxs)("div",{className:"mt-6 pt-6 border-t border-neutral-200 text-center",children:[(0,r.jsx)("p",{className:"text-sm text-neutral-600 mb-2",children:"Didn't receive the code?"}),v>0?(0,r.jsxs)("p",{className:"text-sm text-neutral-500",children:["Resend in ",v,"s"]}):(0,r.jsx)("button",{onClick:S,className:"text-sm text-neutral-900 hover:underline font-semibold",children:"Resend Code"}),(0,r.jsx)("button",{onClick:()=>{p(!1),m(["","","","","",""]),b("")},className:"block mx-auto mt-4 text-sm text-neutral-600 hover:text-neutral-900",children:"Use Different Email"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-neutral-900 mb-2",children:"Sign In"}),(0,r.jsx)("p",{className:"text-neutral-600 mb-6",children:"Enter your email to receive a login code"}),(0,r.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Email Address"}),(0,r.jsx)("input",{type:"email",value:t,onChange:e=>n(e.target.value),placeholder:"admin@podnbeyond.com",required:!0,className:"w-full px-4 py-3 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900",disabled:f})]}),g&&(0,r.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:g}),(0,r.jsx)(c.Z,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,disabled:f,children:f?"Sending...":"Send Login Code"})]}),(0,r.jsx)("div",{className:"mt-6 pt-6 border-t border-neutral-200",children:(0,r.jsx)("p",{className:"text-sm text-neutral-600 text-center",children:(0,r.jsx)("a",{href:"/",className:"text-neutral-900 hover:underline",children:"← Back to Website"})})})]})}),(0,r.jsxs)("div",{className:"mt-6 text-center text-sm text-neutral-400",children:[(0,r.jsx)("p",{children:"\uD83D\uDD12 Secure authentication via 6-digit code"}),(0,r.jsx)("p",{className:"mt-1",children:"Code expires in 10 minutes"})]})]})})})]})}},7663:function(e){!function(){var t={229:function(e){var t,n,r,s=e.exports={};function o(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var l=[],c=!1,u=-1;function d(){c&&r&&(c=!1,r.length?l=r.concat(l):u=-1,l.length&&m())}function m(){if(!c){var e=i(d);c=!0;for(var t=l.length;t;){for(r=l,l=[];++u<t;)r&&r[u].run();u=-1,t=l.length}r=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function x(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||c||i(m)},f.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=x,s.addListener=x,s.once=x,s.off=x,s.removeListener=x,s.removeAllListeners=x,s.emit=x,s.prependListener=x,s.prependOnceListener=x,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},n={};function r(e){var s=n[e];if(void 0!==s)return s.exports;var o=n[e]={exports:{}},a=!0;try{t[e](o,o.exports,r),a=!1}finally{a&&delete n[e]}return o.exports}r.ab="//";var s=r(229);e.exports=s}()},9008:function(e,t,n){e.exports=n(3867)},1163:function(e,t,n){e.exports=n(3079)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=6177)}),_N_E=e.O()}]);