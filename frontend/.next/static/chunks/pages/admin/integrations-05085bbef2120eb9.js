(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[747],{7251:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/integrations",function(){return a(348)}])},5732:function(e,t,a){"use strict";var s=a(5893);a(7294),t.Z=e=>{let{children:t,variant:a="neutral",size:r="md",className:n=""}=e;return(0,s.jsx)("span",{className:"inline-flex items-center font-medium rounded-full ".concat({capsule:"bg-capsule-100 text-capsule-800 border border-capsule-200",smart:"bg-smart-100 text-smart-800 border border-smart-200",sanctuary:"bg-sanctuary-100 text-sanctuary-800 border border-sanctuary-200",sauna:"bg-sauna-100 text-sauna-800 border border-sauna-200",neutral:"bg-neutral-100 text-neutral-800 border border-neutral-200",success:"bg-green-100 text-green-800 border border-green-200",warning:"bg-yellow-100 text-yellow-800 border border-yellow-200",error:"bg-red-100 text-red-800 border border-red-200"}[a]," ").concat({sm:"px-2 py-0.5 text-xs",md:"px-3 py-1 text-sm",lg:"px-4 py-1.5 text-base"}[r]," ").concat(n),children:t})}},4410:function(e,t,a){"use strict";var s=a(5893);a(7294),t.Z=e=>{let{variant:t="primary",size:a="md",fullWidth:r=!1,children:n,className:l="",disabled:i=!1,...o}=e;return(0,s.jsx)("button",{className:"".concat("font-semibold rounded-button transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-neutral-900 text-white hover:bg-neutral-800 focus:ring-neutral-900",secondary:"border-2 border-neutral-900 text-neutral-900 hover:bg-neutral-900 hover:text-white focus:ring-neutral-900",capsule:"bg-capsule-500 text-white hover:bg-capsule-600 focus:ring-capsule-500",smart:"bg-smart-500 text-white hover:bg-smart-600 focus:ring-smart-500",sanctuary:"bg-sanctuary-500 text-white hover:bg-sanctuary-600 focus:ring-sanctuary-500",sauna:"bg-sauna-500 text-white hover:bg-sauna-600 focus:ring-sauna-500",ghost:"text-neutral-700 hover:bg-neutral-100 focus:ring-neutral-500"}[t]," ").concat({sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg",xl:"px-10 py-5 text-xl"}[a]," ").concat(r?"w-full":""," ").concat(l),disabled:i,...o,children:n})}},5811:function(e,t,a){"use strict";var s=a(5893);a(7294),t.Z=e=>{let{label:t,error:a,helperText:r,fullWidth:n=!1,className:l="",id:i,...o}=e,c=i||(null==t?void 0:t.toLowerCase().replace(/\s+/g,"-")),d=n?"w-full":"";return(0,s.jsxs)("div",{className:"".concat(d),children:[t&&(0,s.jsx)("label",{htmlFor:c,className:"block text-sm font-semibold text-neutral-700 mb-2",children:t}),(0,s.jsx)("input",{id:c,className:"\n          px-4 py-3 \n          border rounded-lg \n          ".concat(a?"border-red-500":"border-neutral-300","\n          focus:outline-none focus:ring-2 \n          ").concat(a?"focus:ring-red-500":"focus:ring-neutral-900","\n          focus:border-transparent\n          disabled:bg-neutral-100 disabled:cursor-not-allowed\n          transition-all duration-200\n          ").concat(d,"\n          ").concat(l,"\n        "),...o}),a&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:a}),r&&!a&&(0,s.jsx)("p",{className:"mt-1 text-sm text-neutral-600",children:r})]})}},348:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var s=a(5893),r=a(7294),n=a(5094),l=a(1163),i=a(9008),o=a.n(i),c=a(2734),d=a(8073),u=a(7360),x=a(6650),m=a(5732),h=a(4410),g=a(5811);let p={RAZORPAY:{provider:"RAZORPAY",name:"Razorpay Payment Gateway",category:"PAYMENT",config:{keyId:"",keySecret:""},description:"Payment processing via Razorpay",documentationUrl:"https://razorpay.com/docs/"},POSTMARK:{provider:"POSTMARK",name:"Postmark Email Service",category:"EMAIL",config:{serverToken:"",webhookSecret:"",mailFrom:"support@capsulepodhotel.com"},description:"Transactional email delivery via Postmark",documentationUrl:"https://postmarkapp.com/developer"},GUPSHUP:{provider:"GUPSHUP",name:"Gupshup WhatsApp/SMS",category:"MESSAGING",config:{apiKey:"",appId:"",appName:"podnbeyond",source:"",webhookSecret:"",webhookUrl:""},description:"WhatsApp and SMS messaging via Gupshup",documentationUrl:"https://docs.gupshup.io/"},EXOTEL:{provider:"EXOTEL",name:"Exotel Voice/SMS",category:"VOICE",config:{sid:"",apiKey:"",apiToken:"",subdomain:"",fromNumber:"",webhookSecret:"",webhookUrl:""},description:"Voice calls and SMS via Exotel",documentationUrl:"https://developer.exotel.com/"},GO_MMT:{provider:"GO_MMT",name:"Go-MMT",category:"OTA",config:{apiKey:"",apiSecret:"",hotelId:""},description:"Go-MMT channel manager integration"},BOOKING_COM:{provider:"BOOKING_COM",name:"Booking.com",category:"OTA",config:{apiKey:"",apiSecret:"",hotelId:""},description:"Booking.com channel manager integration"},EASEMYTRIP:{provider:"EASEMYTRIP",name:"EaseMyTrip.com",category:"OTA",config:{apiKey:"",apiSecret:"",hotelId:""},description:"EaseMyTrip.com channel manager integration"},CLEARTRIP:{provider:"CLEARTRIP",name:"Cleartrip.com",category:"OTA",config:{apiKey:"",apiSecret:"",hotelId:""},description:"Cleartrip.com channel manager integration"}};function b(){var e,t,a,i,b,v,f;let{data:j,status:y,signOut:N}=(0,n.a)(),w=(0,l.useRouter)(),[k,C]=(0,r.useState)([]),[S,E]=(0,r.useState)(!0),[T,A]=(0,r.useState)(!1),[M,Z]=(0,r.useState)(null),[O,I]=(0,r.useState)(null),[P,R]=(0,r.useState)(!1),[D,U]=(0,r.useState)(null),[L,G]=(0,r.useState)(null),[_,F]=(0,r.useState)(null),[K,Y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if("loading"!==y){if("unauthenticated"===y)w.push("/admin/login");else if("authenticated"===y){var e,t,a;((null==j?void 0:null===(e=j.user)||void 0===e?void 0:e.roles)||[]).some(e=>["ADMIN","SUPERADMIN","MANAGER"].includes(e.key))||(null==j?void 0:null===(t=j.user)||void 0===t?void 0:t.email)==="admin@podnbeyond.com"||(null==j?void 0:null===(a=j.user)||void 0===a?void 0:a.email)==="shwet@thedesi.email"||w.push("/admin/forbidden")}}},[y,j,w]),(0,r.useEffect)(()=>{"authenticated"===y&&z()},[y]);let z=async()=>{try{E(!0),G(null);let e=await fetch("/api/integrations",{credentials:"include",headers:{Accept:"application/json"}});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.json();t.success?C(t.integrations||[]):G(t.error||"Failed to load integrations")}catch(e){console.error("Failed to load integrations:",e),G("Failed to load integrations: ".concat(e.message||"Unknown error"))}finally{E(!1)}},B=e=>{I(e),U({...e,config:{...e.config}}),R(!0),G(null),F(null)},V=e=>{let t=p[e];t&&(I({id:-1,provider:t.provider,name:t.name,category:t.category,enabled:!1,config:t.config,description:t.description,documentationUrl:t.documentationUrl,webhookUrl:"",testMode:!1,status:"INACTIVE",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),U({...t,enabled:!1,testMode:!1}),R(!0),G(null),F(null))},W=async e=>{if(e.preventDefault(),D){A(!0),G(null),F(null);try{var t,a;let e=await fetch("/api/integrations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...D,createdBy:(null==j?void 0:null===(t=j.user)||void 0===t?void 0:t.id)||(null==j?void 0:null===(a=j.user)||void 0===a?void 0:a.email)})}),s=await e.json();s.success?(F("Integration saved successfully"),R(!1),U(null),I(null),await z(),await fetch("/api/integrations/clear-cache",{method:"POST"}).catch(()=>{})):G(s.error||"Failed to save integration")}catch(e){G(e.message||"Failed to save integration")}finally{A(!1)}}},H=async(e,t)=>{try{let a=await fetch("/api/integrations/".concat(e,"/toggle"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:!t})});(await a.json()).success&&(await z(),await fetch("/api/integrations/clear-cache",{method:"POST"}).catch(()=>{}))}catch(e){console.error("Failed to toggle integration:",e)}},q=async e=>{Z(e),G(null),F(null);try{let t=await fetch("/api/integrations/".concat(e,"/test"),{method:"POST"}),a=await t.json();a.success&&a.testResult?(a.testResult.success?F("Connection test successful: ".concat(a.testResult.message)):G("Connection test failed: ".concat(a.testResult.message)),await z()):G("Failed to test integration")}catch(e){G(e.message||"Failed to test integration")}finally{Z(null)}},X=e=>{if(!e.enabled)return(0,s.jsx)(m.Z,{variant:"neutral",children:"Disabled"});switch(e.status){case"ACTIVE":return(0,s.jsx)(m.Z,{variant:"success",children:"Active"});case"ERROR":return(0,s.jsx)(m.Z,{variant:"error",children:"Error"});case"TESTING":return(0,s.jsx)(m.Z,{variant:"warning",children:"Testing"});default:return(0,s.jsx)(m.Z,{variant:"neutral",children:"Inactive"})}},$=e=>({PAYMENT:"bg-blue-100 text-blue-800",EMAIL:"bg-purple-100 text-purple-800",MESSAGING:"bg-green-100 text-green-800",VOICE:"bg-orange-100 text-orange-800",OTA:"bg-pink-100 text-pink-800"})[e]||"bg-gray-100 text-gray-800",J=k.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{}),Q=new Set(k.map(e=>e.provider)),ee=Object.keys(p).filter(e=>!Q.has(e)).reduce((e,t)=>{let a=p[t];return a&&(e[a.category]||(e[a.category]=[]),e[a.category].push({providerKey:t,name:a.name,description:a.description,category:a.category,provider:a.provider,config:a.config,...a.documentationUrl&&{documentationUrl:a.documentationUrl}})),e},{});return"loading"===y||S?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-lg",children:"Loading..."})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o(),{children:(0,s.jsx)("title",{children:"Third-Party Integrations - Admin"})}),(0,s.jsx)(c.Z,{}),(0,s.jsx)("section",{className:"pt-24 pb-6 bg-gradient-to-br from-neutral-900 to-neutral-800 text-white",children:(0,s.jsxs)(u.Z,{children:[(0,s.jsxs)("div",{className:"flex items-start justify-between flex-wrap gap-4 mb-6",children:[(0,s.jsx)("div",{className:"flex items-start gap-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("p",{className:"text-xs text-neutral-400 uppercase tracking-wide",children:"Signed in as"}),(0,s.jsx)("p",{className:"text-white font-semibold text-sm mt-0.5",children:(null==j?void 0:null===(e=j.user)||void 0===e?void 0:e.email)||"Loading..."}),(0,s.jsx)("p",{className:"text-xs text-neutral-500 mt-0.5",children:(null==j?void 0:null===(b=j.user)||void 0===b?void 0:null===(i=b.roles)||void 0===i?void 0:null===(a=i[0])||void 0===a?void 0:null===(t=a.key)||void 0===t?void 0:t.replace(/_/g," "))||"MEMBER"})]}),(0,s.jsx)("div",{className:"h-12 w-px bg-neutral-700"}),(0,s.jsx)("button",{onClick:()=>N({callbackUrl:"/"}),className:"px-4 py-2 bg-white/10 border border-white/20 text-white rounded-button text-sm font-semibold hover:bg-white hover:text-neutral-900 transition-all",children:"Sign Out"})]})}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-1",children:"Third-Party Integrations"}),(0,s.jsx)("p",{className:"text-neutral-300 text-sm",children:"Manage API keys, credentials, and enable/disable integrations"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,s.jsx)("a",{href:"/admin/communication-hub",children:(0,s.jsx)("button",{className:"px-6 py-2 rounded-button font-semibold transition-all ".concat((null===(v=w.asPath)||void 0===v?void 0:v.startsWith("/admin/communication-hub"))?"bg-white text-neutral-900":"bg-white/10 border border-white/20 text-white hover:bg-white hover:text-neutral-900"),children:"\uD83D\uDCAC Communication Hub"})}),(0,s.jsx)("a",{href:"/admin/integrations",children:(0,s.jsx)("button",{className:"px-6 py-2 rounded-button font-semibold transition-all ".concat((null===(f=w.asPath)||void 0===f?void 0:f.startsWith("/admin/integrations"))?"bg-white text-neutral-900":"bg-white/10 border border-white/20 text-white hover:bg-white hover:text-neutral-900"),children:"⚙️ Integrations"})}),(0,s.jsx)("a",{href:"/admin",children:(0,s.jsx)("button",{className:"px-6 py-2 rounded-button font-semibold transition-all bg-white/10 border border-white/20 text-white hover:bg-white hover:text-neutral-900",children:"← Admin Dashboard"})})]})]})}),(0,s.jsx)(u.Z,{children:(0,s.jsxs)("div",{className:"py-8",children:[L&&(0,s.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:L}),_&&(0,s.jsx)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg text-green-700",children:_}),Object.keys(ee).length>0&&(0,s.jsx)(s.Fragment,{children:Object.entries(ee).map(e=>{let[t,a]=e;return(0,s.jsxs)(x.Z,{className:"mb-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsx)("h2",{className:"text-xl font-semibold",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat($(t)),children:t})})}),(0,s.jsx)("div",{className:"space-y-4",children:a.map(e=>{let{providerKey:t,name:a,description:r}=e,n=(null==O?void 0:O.provider)===t&&-1===O.id;return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("h3",{className:"font-semibold text-lg text-gray-900",children:a}),(0,s.jsx)(m.Z,{variant:"neutral",children:"Not Configured"})]}),r&&(0,s.jsx)("p",{className:"text-sm text-gray-600",children:r})]}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)(h.Z,{variant:"primary",size:"sm",onClick:()=>{n?(R(!1),U(null),I(null)):V(t)},children:n?"Cancel":"Enable & Configure"})})]})}),n&&P&&D&&(0,s.jsx)("div",{className:"mt-4 border-t border-gray-200 pt-4",children:(0,s.jsxs)(x.Z,{className:"border-2 border-blue-200 bg-blue-50/30",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-gray-200",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-bold text-neutral-900",children:["Configure ",D.name]}),(0,s.jsxs)("p",{className:"text-sm text-neutral-500 mt-0.5",children:[D.category," • ",D.provider]})]})}),(0,s.jsxs)("form",{onSubmit:W,children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-semibold text-neutral-700 mb-1.5 uppercase tracking-wide",children:"Display Name"}),(0,s.jsx)(g.Z,{type:"text",value:D.name,onChange:e=>U({...D,name:e.target.value}),required:!0,className:"text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-semibold text-neutral-700 mb-1.5 uppercase tracking-wide",children:"Description"}),(0,s.jsx)(g.Z,{type:"text",value:D.description||"",onChange:e=>U({...D,description:e.target.value}),placeholder:"Brief description (optional)",className:"text-sm"})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)("div",{className:"h-px bg-neutral-200 flex-1"}),(0,s.jsx)("span",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wide",children:"Credentials & Configuration"}),(0,s.jsx)("div",{className:"h-px bg-neutral-200 flex-1"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.keys(D.config||{}).map(e=>{let t=e.toLowerCase().includes("secret")||e.toLowerCase().includes("password")||e.toLowerCase().includes("token");return(0,s.jsxs)("div",{className:t?"md:col-span-2":"",children:[(0,s.jsxs)("label",{className:"block text-xs font-semibold text-neutral-700 mb-1.5",children:[e.charAt(0).toUpperCase()+e.slice(1).replace(/([A-Z])/g," $1"),t&&(0,s.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(g.Z,{type:t?"password":"text",value:D.config[e]||"",onChange:t=>U({...D,config:{...D.config,[e]:t.target.value}}),placeholder:"Enter ".concat(e.replace(/([A-Z])/g," $1").toLowerCase()),className:"text-sm pr-10",required:t}),t&&D.config[e]&&(0,s.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-neutral-400",children:"\uD83D\uDD12"})]})]},e)})})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)("div",{className:"h-px bg-neutral-200 flex-1"}),(0,s.jsx)("span",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wide",children:"Settings"}),(0,s.jsx)("div",{className:"h-px bg-neutral-200 flex-1"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-semibold text-neutral-700 mb-1.5",children:"Webhook URL"}),(0,s.jsx)(g.Z,{type:"url",value:D.webhookUrl||"",onChange:e=>U({...D,webhookUrl:e.target.value}),placeholder:"https://your-domain.com/webhooks/...",className:"text-sm"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4",children:["PAYMENT"===D.category&&(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer group",children:[(0,s.jsx)("input",{type:"checkbox",checked:D.testMode||!1,onChange:e=>U({...D,testMode:e.target.checked}),className:"w-4 h-4 text-blue-600 border-neutral-300 rounded focus:ring-2 focus:ring-blue-500"}),(0,s.jsx)("span",{className:"text-sm text-neutral-700 group-hover:text-neutral-900",children:"Test Mode (Sandbox)"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer group",children:[(0,s.jsx)("input",{type:"checkbox",checked:D.enabled||!1,onChange:e=>U({...D,enabled:e.target.checked}),className:"w-4 h-4 text-blue-600 border-neutral-300 rounded focus:ring-2 focus:ring-blue-500"}),(0,s.jsx)("span",{className:"text-sm font-medium text-neutral-700 group-hover:text-neutral-900",children:"Enable Integration"})]})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4 border-t",children:[(0,s.jsx)(h.Z,{type:"submit",disabled:T,className:"flex-1",children:T?"Saving...":"Save & Enable"}),(0,s.jsx)(h.Z,{type:"button",variant:"secondary",onClick:()=>{R(!1),U(null),I(null)},children:"Cancel"})]})]})]})})]},t)})})]},"available-".concat(t))})}),0===Object.keys(J).length&&0===k.length&&!S&&(0,s.jsx)(x.Z,{children:(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Integrations Configured"}),(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:"You haven't configured any integrations yet. Add one from the available integrations above, or migrate existing configurations from environment variables."}),(0,s.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg text-left",children:[(0,s.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"\uD83D\uDCA1 Migrate Existing Configurations"}),(0,s.jsx)("p",{className:"text-sm text-blue-800 mb-3",children:"If you have integrations configured via environment variables (Razorpay, Postmark, etc.), you can migrate them to the database:"}),(0,s.jsx)("code",{className:"block text-xs bg-blue-100 p-2 rounded mb-2",children:"cd backend && node scripts/migrate-integrations-from-env.js"}),(0,s.jsx)("p",{className:"text-xs text-blue-700",children:"This will automatically import your existing configurations into this unified management system."})]})]})}),Object.entries(J).map(e=>{let[t,a]=e;return(0,s.jsxs)(x.Z,{className:"mb-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsx)("h2",{className:"text-xl font-semibold",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat($(t)),children:t})})}),(0,s.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("h3",{className:"font-semibold text-lg",children:e.name}),X(e),e.testMode&&(0,s.jsx)(m.Z,{variant:"warning",children:"Test Mode"})]}),e.description&&(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),e.lastError&&(0,s.jsxs)("p",{className:"text-sm text-red-600 mb-2",children:["Last Error: ",e.lastError]}),e.lastTestedAt&&(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Last tested: ",new Date(e.lastTestedAt).toLocaleString()]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(h.Z,{variant:"secondary",size:"sm",onClick:()=>{(null==O?void 0:O.id)===e.id?(R(!1),U(null),I(null)):B(e)},children:(null==O?void 0:O.id)===e.id?"Cancel":"Edit"}),(0,s.jsx)(h.Z,{variant:e.enabled?"secondary":"primary",size:"sm",onClick:()=>H(e.provider,e.enabled),disabled:(null==O?void 0:O.id)===e.id,children:e.enabled?"Disable":"Enable"}),(0,s.jsx)(h.Z,{variant:"secondary",size:"sm",onClick:()=>q(e.provider),disabled:M===e.provider||(null==O?void 0:O.id)===e.id,children:M===e.provider?"Testing...":"Test"})]})]})}),(null==O?void 0:O.id)===e.id&&P&&D&&(0,s.jsx)("div",{className:"mt-4 border-t border-gray-200 pt-4",children:(0,s.jsxs)(x.Z,{className:"border-2 border-blue-200 bg-blue-50/30",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-gray-200",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-bold text-neutral-900",children:["Edit ",D.name]}),(0,s.jsxs)("p",{className:"text-sm text-neutral-500 mt-0.5",children:[D.category," • ",D.provider]})]})}),(0,s.jsxs)("form",{onSubmit:W,children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-semibold text-neutral-700 mb-1.5 uppercase tracking-wide",children:"Display Name"}),(0,s.jsx)(g.Z,{type:"text",value:D.name,onChange:e=>U({...D,name:e.target.value}),required:!0,className:"text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-semibold text-neutral-700 mb-1.5 uppercase tracking-wide",children:"Description"}),(0,s.jsx)(g.Z,{type:"text",value:D.description||"",onChange:e=>U({...D,description:e.target.value}),placeholder:"Brief description (optional)",className:"text-sm"})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)("div",{className:"h-px bg-neutral-200 flex-1"}),(0,s.jsx)("span",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wide",children:"Credentials & Configuration"}),(0,s.jsx)("div",{className:"h-px bg-neutral-200 flex-1"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.keys(D.config||{}).map(e=>{let t=e.toLowerCase().includes("secret")||e.toLowerCase().includes("password")||e.toLowerCase().includes("token");return(0,s.jsxs)("div",{className:t?"md:col-span-2":"",children:[(0,s.jsxs)("label",{className:"block text-xs font-semibold text-neutral-700 mb-1.5",children:[e.charAt(0).toUpperCase()+e.slice(1).replace(/([A-Z])/g," $1"),t&&(0,s.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(g.Z,{type:t?"password":"text",value:D.config[e]||"",onChange:t=>U({...D,config:{...D.config,[e]:t.target.value}}),placeholder:"Enter ".concat(e.replace(/([A-Z])/g," $1").toLowerCase()),className:"text-sm pr-10",required:t}),t&&D.config[e]&&(0,s.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-neutral-400",children:"\uD83D\uDD12"})]})]},e)})})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)("div",{className:"h-px bg-neutral-200 flex-1"}),(0,s.jsx)("span",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wide",children:"Settings"}),(0,s.jsx)("div",{className:"h-px bg-neutral-200 flex-1"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-semibold text-neutral-700 mb-1.5",children:"Webhook URL"}),(0,s.jsx)(g.Z,{type:"url",value:D.webhookUrl||"",onChange:e=>U({...D,webhookUrl:e.target.value}),placeholder:"https://your-domain.com/webhooks/...",className:"text-sm"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4",children:["PAYMENT"===D.category&&(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer group",children:[(0,s.jsx)("input",{type:"checkbox",checked:D.testMode||!1,onChange:e=>U({...D,testMode:e.target.checked}),className:"w-4 h-4 text-blue-600 border-neutral-300 rounded focus:ring-2 focus:ring-blue-500"}),(0,s.jsx)("span",{className:"text-sm text-neutral-700 group-hover:text-neutral-900",children:"Test Mode (Sandbox)"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer group",children:[(0,s.jsx)("input",{type:"checkbox",checked:D.enabled||!1,onChange:e=>U({...D,enabled:e.target.checked}),className:"w-4 h-4 text-blue-600 border-neutral-300 rounded focus:ring-2 focus:ring-blue-500"}),(0,s.jsx)("span",{className:"text-sm font-medium text-neutral-700 group-hover:text-neutral-900",children:"Enable Integration"})]})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4 border-t",children:[(0,s.jsx)(h.Z,{type:"submit",disabled:T,className:"flex-1",children:T?"Saving...":"Save Changes"}),(0,s.jsx)(h.Z,{type:"button",variant:"secondary",onClick:()=>{R(!1),U(null),I(null)},children:"Cancel"})]})]})]})})]},e.id))})]},t)})]})}),(0,s.jsx)(d.Z,{})]})}},1163:function(e,t,a){e.exports=a(3079)}},function(e){e.O(0,[996,177,888,774,179],function(){return e(e.s=7251)}),_N_E=e.O()}]);