(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[425],{6889:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/book",function(){return s(5305)}])},5305:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var l=s(5893),a=s(7294),n=s(1163),r=s(9008),i=s.n(r),c=s(2734),o=s(8073),d=s(7360),u=s(6650),m=s(4410),x=e=>{let{label:t,error:s,helperText:a,fullWidth:n=!1,className:r="",id:i,...c}=e,o=i||(null==t?void 0:t.toLowerCase().replace(/\s+/g,"-")),d=n?"w-full":"";return(0,l.jsxs)("div",{className:"".concat(d),children:[t&&(0,l.jsx)("label",{htmlFor:o,className:"block text-sm font-semibold text-neutral-700 mb-2",children:t}),(0,l.jsx)("input",{id:o,className:"\n          px-4 py-3 \n          border rounded-lg \n          ".concat(s?"border-red-500":"border-neutral-300","\n          focus:outline-none focus:ring-2 \n          ").concat(s?"focus:ring-red-500":"focus:ring-neutral-900","\n          focus:border-transparent\n          disabled:bg-neutral-100 disabled:cursor-not-allowed\n          transition-all duration-200\n          ").concat(d,"\n          ").concat(r,"\n        "),...c}),s&&(0,l.jsx)("p",{className:"mt-1 text-sm text-red-600",children:s}),a&&!s&&(0,l.jsx)("p",{className:"mt-1 text-sm text-neutral-600",children:a})]})};function h(){var e;let{property:t,room:s}=(0,n.useRouter)().query,[r,h]=(0,a.useState)(1),[p,j]=(0,a.useState)([]),[f,b]=(0,a.useState)(!0),[g,N]=(0,a.useState)({propertyId:"",checkIn:"",checkOut:"",guests:"1",guestName:"",email:"",phone:"",specialRequests:"",paymentMethod:"razorpay"});(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat("http://localhost:4000","/api/properties")),s=await e.json();if(s.success&&(j(s.properties),t)){let e=s.properties.find(e=>e.slug===t);e&&N(t=>({...t,propertyId:e.id.toString()}))}}catch(e){console.error("Failed to fetch properties:",e)}finally{b(!1)}})()},[t]);let y=e=>{let{name:t,value:s}=e.target;N(e=>({...e,[t]:s}))},v=()=>{if(!g.propertyId||!g.checkIn||!g.checkOut)return alert("Please fill in all required fields"),!1;let e=new Date(g.checkIn);return!(new Date(g.checkOut)<=e)||(alert("Check-out date must be after check-in date"),!1)},k=()=>g.guestName&&g.email&&g.phone?!!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g.email)||(alert("Please enter a valid email address"),!1):(alert("Please fill in all required fields"),!1),w=()=>{1===r&&v()?h(2):2===r&&k()&&h(3)},C=async e=>{e.preventDefault(),alert("Booking functionality will be integrated with payment gateway (Razorpay). For now, this is a demo."),console.log("Booking data:",g)},I=p.find(e=>e.id.toString()===g.propertyId),D=g.checkIn&&g.checkOut?Math.ceil((new Date(g.checkOut).getTime()-new Date(g.checkIn).getTime())/864e5):0;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(i(),{children:[(0,l.jsx)("title",{children:"Book Your Stay | POD N BEYOND"}),(0,l.jsx)("meta",{name:"description",content:"Book your pod at POD N BEYOND. Easy, fast, and secure booking process."}),(0,l.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,l.jsx)("link",{rel:"apple-touch-icon",href:"/logo-podnbeyond.png"})]}),(0,l.jsx)(c.Z,{}),(0,l.jsx)("section",{className:"pt-24 pb-12 bg-neutral-50 min-h-screen",children:(0,l.jsxs)(d.Z,{children:[(0,l.jsxs)("div",{className:"mb-12",children:[(0,l.jsx)("div",{className:"flex items-center justify-center space-x-4",children:[1,2,3].map(e=>(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-full font-bold transition-colors ".concat(r>=e?"bg-neutral-900 text-white":"bg-white text-neutral-400 border-2 border-neutral-300"),children:e}),e<3&&(0,l.jsx)("div",{className:"h-1 w-16 transition-colors ".concat(r>e?"bg-neutral-900":"bg-neutral-300")})]},e))}),(0,l.jsxs)("div",{className:"flex justify-center mt-4 space-x-20 text-sm",children:[(0,l.jsx)("span",{className:r>=1?"font-semibold text-neutral-900":"text-neutral-500",children:"Property & Dates"}),(0,l.jsx)("span",{className:r>=2?"font-semibold text-neutral-900":"text-neutral-500",children:"Guest Info"}),(0,l.jsx)("span",{className:r>=3?"font-semibold text-neutral-900":"text-neutral-500",children:"Payment"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,l.jsx)("div",{className:"lg:col-span-2",children:(0,l.jsx)(u.Z,{variant:"default",padding:"lg",children:(0,l.jsxs)("form",{onSubmit:C,children:[1===r&&(0,l.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-neutral-900 mb-6",children:"Select Property & Dates"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Property *"}),(0,l.jsxs)("select",{name:"propertyId",value:g.propertyId,onChange:y,required:!0,className:"w-full px-4 py-3 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900",children:[(0,l.jsx)("option",{value:"",children:"Select a property"}),p.map(e=>(0,l.jsxs)("option",{value:e.id,children:[e.name," - ",e.location,", ",e.city]},e.id))]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)(x,{type:"date",name:"checkIn",label:"Check-in *",value:g.checkIn,onChange:y,min:new Date().toISOString().split("T")[0],required:!0,fullWidth:!0}),(0,l.jsx)(x,{type:"date",name:"checkOut",label:"Check-out *",value:g.checkOut,onChange:y,min:g.checkIn||new Date().toISOString().split("T")[0],required:!0,fullWidth:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Number of Guests *"}),(0,l.jsxs)("select",{name:"guests",value:g.guests,onChange:y,required:!0,className:"w-full px-4 py-3 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900",children:[(0,l.jsx)("option",{value:"1",children:"1 Guest"}),(0,l.jsx)("option",{value:"2",children:"2 Guests"}),(0,l.jsx)("option",{value:"3",children:"3 Guests"}),(0,l.jsx)("option",{value:"4",children:"4+ Guests"})]})]}),(0,l.jsx)("div",{className:"pt-6",children:(0,l.jsx)(m.Z,{type:"button",variant:"primary",size:"lg",fullWidth:!0,onClick:w,children:"Continue to Guest Information"})})]}),2===r&&(0,l.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-neutral-900 mb-6",children:"Guest Information"}),(0,l.jsx)(x,{type:"text",name:"guestName",label:"Full Name *",value:g.guestName,onChange:y,placeholder:"John Doe",required:!0,fullWidth:!0}),(0,l.jsx)(x,{type:"email",name:"email",label:"Email Address *",value:g.email,onChange:y,placeholder:"john@example.com",required:!0,fullWidth:!0}),(0,l.jsx)(x,{type:"tel",name:"phone",label:"Phone Number *",value:g.phone,onChange:y,placeholder:"+91 98765 43210",required:!0,fullWidth:!0}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Special Requests (Optional)"}),(0,l.jsx)("textarea",{name:"specialRequests",value:g.specialRequests,onChange:y,rows:4,placeholder:"Any special requests or requirements...",className:"w-full px-4 py-3 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})]}),(0,l.jsxs)("div",{className:"flex gap-4 pt-6",children:[(0,l.jsx)(m.Z,{type:"button",variant:"secondary",size:"lg",onClick:()=>h(1),children:"Back"}),(0,l.jsx)(m.Z,{type:"button",variant:"primary",size:"lg",fullWidth:!0,onClick:w,children:"Continue to Payment"})]})]}),3===r&&(0,l.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-neutral-900 mb-6",children:"Payment"}),(0,l.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:(0,l.jsxs)("div",{className:"flex items-start",children:[(0,l.jsx)("svg",{className:"w-6 h-6 text-blue-600 mr-3 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"Demo Mode"}),(0,l.jsx)("p",{className:"text-blue-800 text-sm",children:"Payment integration is ready but not activated in demo mode. In production, this would integrate with Razorpay for secure payment processing."})]})]})}),(0,l.jsxs)("div",{className:"border-2 border-neutral-300 rounded-lg p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("span",{className:"font-semibold text-neutral-900",children:"Payment Method"}),(0,l.jsx)("img",{src:"https://razorpay.com/assets/razorpay-glyph.svg",alt:"Razorpay",className:"h-6"})]}),(0,l.jsx)("p",{className:"text-neutral-600 text-sm",children:"Secure payment powered by Razorpay. We accept all major credit cards, debit cards, UPI, and net banking."})]}),(0,l.jsxs)("div",{className:"flex gap-4 pt-6",children:[(0,l.jsx)(m.Z,{type:"button",variant:"secondary",size:"lg",onClick:()=>h(2),children:"Back"}),(0,l.jsx)(m.Z,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,children:"Complete Booking (Demo)"})]})]})]})})}),(0,l.jsx)("div",{className:"lg:col-span-1",children:(0,l.jsxs)(u.Z,{variant:"bordered",padding:"lg",className:"sticky top-24",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-neutral-900 mb-6",children:"Booking Summary"}),I?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("div",{className:"aspect-video rounded-lg overflow-hidden mb-3",children:(0,l.jsx)("img",{src:(null===(e=I.images)||void 0===e?void 0:e[0])||"/placeholder.jpg",alt:I.name,className:"w-full h-full object-cover"})}),(0,l.jsx)("h4",{className:"font-semibold text-neutral-900",children:I.name}),(0,l.jsxs)("p",{className:"text-sm text-neutral-600",children:[I.location,", ",I.city]}),I.rating&&(0,l.jsxs)("div",{className:"flex items-center mt-2",children:[(0,l.jsx)("svg",{className:"w-4 h-4 text-smart-500 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,l.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),(0,l.jsx)("span",{className:"text-sm font-semibold",children:I.rating}),(0,l.jsxs)("span",{className:"text-sm text-neutral-600 ml-1",children:["(",I.totalRatings," reviews)"]})]})]}),(0,l.jsx)("div",{className:"border-t border-neutral-200 pt-6 space-y-3",children:g.checkIn&&g.checkOut&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-neutral-600",children:"Check-in"}),(0,l.jsx)("span",{className:"font-semibold text-neutral-900",children:new Date(g.checkIn).toLocaleDateString()})]}),(0,l.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-neutral-600",children:"Check-out"}),(0,l.jsx)("span",{className:"font-semibold text-neutral-900",children:new Date(g.checkOut).toLocaleDateString()})]}),(0,l.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-neutral-600",children:"Guests"}),(0,l.jsx)("span",{className:"font-semibold text-neutral-900",children:g.guests})]}),D>0&&(0,l.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-neutral-600",children:"Nights"}),(0,l.jsx)("span",{className:"font-semibold text-neutral-900",children:D})]})]})}),D>0&&(0,l.jsxs)("div",{className:"border-t border-neutral-200 mt-6 pt-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-lg font-bold text-neutral-900",children:"Estimated Total"}),(0,l.jsxs)("span",{className:"text-2xl font-bold text-neutral-900",children:["â‚¹",(2e3*D).toLocaleString()]})]}),(0,l.jsx)("p",{className:"text-xs text-neutral-600 mt-2",children:"*Final price will be confirmed based on selected room type"})]})]}):(0,l.jsx)("div",{className:"text-center py-8 text-neutral-500",children:(0,l.jsx)("p",{children:"Select a property to see booking summary"})}),r>=2&&g.guestName&&(0,l.jsxs)("div",{className:"border-t border-neutral-200 mt-6 pt-6",children:[(0,l.jsx)("h4",{className:"font-semibold text-neutral-900 mb-3",children:"Guest Details"}),(0,l.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,l.jsx)("p",{className:"text-neutral-700",children:g.guestName}),(0,l.jsx)("p",{className:"text-neutral-600",children:g.email}),(0,l.jsx)("p",{className:"text-neutral-600",children:g.phone})]})]})]})})]})]})}),(0,l.jsx)(o.Z,{})]})}},1163:function(e,t,s){e.exports=s(3079)}},function(e){e.O(0,[996,926,888,774,179],function(){return e(e.s=6889)}),_N_E=e.O()}]);