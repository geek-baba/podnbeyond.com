(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{682:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account",function(){return s(3654)}])},5732:function(e,t,s){"use strict";var a=s(5893);s(7294),t.Z=e=>{let{children:t,variant:s="neutral",size:r="md",className:n=""}=e;return(0,a.jsx)("span",{className:"inline-flex items-center font-medium rounded-full ".concat({capsule:"bg-capsule-100 text-capsule-800 border border-capsule-200",smart:"bg-smart-100 text-smart-800 border border-smart-200",sanctuary:"bg-sanctuary-100 text-sanctuary-800 border border-sanctuary-200",sauna:"bg-sauna-100 text-sauna-800 border border-sauna-200",neutral:"bg-neutral-100 text-neutral-800 border border-neutral-200",success:"bg-green-100 text-green-800 border border-green-200",warning:"bg-yellow-100 text-yellow-800 border border-yellow-200",error:"bg-red-100 text-red-800 border border-red-200"}[s]," ").concat({sm:"px-2 py-0.5 text-xs",md:"px-3 py-1 text-sm",lg:"px-4 py-1.5 text-base"}[r]," ").concat(n),children:t})}},4410:function(e,t,s){"use strict";var a=s(5893);s(7294),t.Z=e=>{let{variant:t="primary",size:s="md",fullWidth:r=!1,children:n,className:l="",disabled:i=!1,...c}=e;return(0,a.jsx)("button",{className:"".concat("font-semibold rounded-button transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-neutral-900 text-white hover:bg-neutral-800 focus:ring-neutral-900",secondary:"border-2 border-neutral-900 text-neutral-900 hover:bg-neutral-900 hover:text-white focus:ring-neutral-900",capsule:"bg-capsule-500 text-white hover:bg-capsule-600 focus:ring-capsule-500",smart:"bg-smart-500 text-white hover:bg-smart-600 focus:ring-smart-500",sanctuary:"bg-sanctuary-500 text-white hover:bg-sanctuary-600 focus:ring-sanctuary-500",sauna:"bg-sauna-500 text-white hover:bg-sauna-600 focus:ring-sauna-500",ghost:"text-neutral-700 hover:bg-neutral-100 focus:ring-neutral-500"}[t]," ").concat({sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg",xl:"px-10 py-5 text-xl"}[s]," ").concat(r?"w-full":""," ").concat(l),disabled:i,...c,children:n})}},3654:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var a=s(5893),r=s(7294),n=s(5094),l=s(1163),i=s(9008),c=s.n(i),o=s(2734),d=s(8073),x=s(7360),u=s(6650),m=s(5732),h=s(4410);function p(){var e,t,s,i,p,b,g,j;let{data:v,status:f,signOut:N}=(0,n.a)(),y=(0,l.useRouter)(),[w,k]=(0,r.useState)("overview"),[Z,E]=(0,r.useState)([]),[O,S]=(0,r.useState)([]),[D,L]=(0,r.useState)(!0);(0,r.useEffect)(()=>{"loading"!==f&&("unauthenticated"===f?y.push("/admin/login?callbackUrl=/account"):"authenticated"===f&&P())},[f]);let P=async()=>{try{let e=await fetch("/api/account/bookings");if(e.ok){let t=await e.json();E(t.bookings||[])}let t=await fetch("/api/account/points-ledger");if(t.ok){let e=await t.json();S(e.ledger||[])}}catch(e){console.error("Error fetching account data:",e)}finally{L(!1)}};if("loading"===f||D)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-neutral-900"})});if(!v)return null;let _=null===(e=v.user)||void 0===e?void 0:e.loyaltyAccount;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c(),{children:[(0,a.jsx)("title",{children:"My Account | POD N BEYOND"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,a.jsx)("link",{rel:"apple-touch-icon",href:"/logo-podnbeyond.png"})]}),(0,a.jsxs)("div",{className:"min-h-screen bg-neutral-50",children:[(0,a.jsx)(o.Z,{}),(0,a.jsx)("section",{className:"bg-gradient-to-r from-neutral-900 to-neutral-800 py-12",children:(0,a.jsx)(x.Z,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"My Account"}),(0,a.jsxs)("p",{className:"text-neutral-300",children:["Welcome back, ",(null===(t=v.user)||void 0===t?void 0:t.name)||(null===(s=v.user)||void 0===s?void 0:s.email)]})]}),(0,a.jsx)(h.Z,{variant:"secondary",onClick:()=>N({callbackUrl:"/"}),children:"Sign Out"})]})})}),_&&(0,a.jsx)("section",{className:"py-8 bg-white border-b border-neutral-200",children:(0,a.jsx)(x.Z,{children:(0,a.jsx)(u.Z,{variant:"elevated",padding:"lg",children:(0,a.jsxs)("div",{className:"space-y-6",children:[_.memberNumber&&(0,a.jsxs)("div",{className:"text-center pb-4 border-b border-neutral-200",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-wider text-neutral-500 mb-1",children:"Member Number"}),(0,a.jsx)("p",{className:"text-lg font-mono font-bold text-neutral-900",children:_.memberNumber})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"text-center md:text-left",children:[(0,a.jsx)("p",{className:"text-sm text-neutral-600 mb-1",children:"Membership Tier"}),(0,a.jsx)(m.Z,{variant:"PLATINUM"===_.tier?"neutral":"GOLD"===_.tier?"smart":"capsule",size:"lg",children:_.tier})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-neutral-600 mb-1",children:"Points Balance"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-neutral-900",children:null===(i=_.points)||void 0===i?void 0:i.toLocaleString()})]}),(0,a.jsx)("div",{className:"text-center md:text-right",children:(0,a.jsx)("a",{href:"/membership",children:(0,a.jsx)(h.Z,{variant:"primary",children:"View Benefits"})})})]})]})})})}),(0,a.jsx)("section",{className:"bg-white border-b border-neutral-200 sticky top-0 z-10",children:(0,a.jsx)(x.Z,{children:(0,a.jsx)("div",{className:"flex space-x-8 overflow-x-auto py-4",children:["overview","bookings","points","profile"].map(e=>(0,a.jsx)("button",{onClick:()=>k(e),className:"pb-2 px-1 font-semibold capitalize whitespace-nowrap transition-colors border-b-2 ".concat(w===e?"border-neutral-900 text-neutral-900":"border-transparent text-neutral-500 hover:text-neutral-700"),children:e},e))})})}),(0,a.jsx)("section",{className:"py-12",children:(0,a.jsxs)(x.Z,{children:["overview"===w&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-neutral-900",children:"Account Overview"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)(u.Z,{variant:"default",padding:"lg",children:[(0,a.jsx)("p",{className:"text-sm text-neutral-600 mb-2",children:"Total Bookings"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-neutral-900",children:Z.length})]}),(0,a.jsxs)(u.Z,{variant:"default",padding:"lg",children:[(0,a.jsx)("p",{className:"text-sm text-neutral-600 mb-2",children:"Points Earned"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-neutral-900",children:O.filter(e=>e.points>0).reduce((e,t)=>e+t.points,0)})]}),(0,a.jsxs)(u.Z,{variant:"default",padding:"lg",children:[(0,a.jsx)("p",{className:"text-sm text-neutral-600 mb-2",children:"Current Tier"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-neutral-900",children:(null==_?void 0:_.tier)||"SILVER"}),(0,a.jsx)("p",{className:"text-xs text-neutral-500 mt-1",children:(null==_?void 0:_.tier)==="SILVER"?"Next: GOLD at 25,000 pts":(null==_?void 0:_.tier)==="GOLD"?"Next: PLATINUM at 75,000 pts":"Highest tier achieved!"})]})]})]}),"bookings"===w&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-neutral-900 mb-6",children:"My Bookings"}),0===Z.length?(0,a.jsx)(u.Z,{variant:"default",padding:"lg",children:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("p",{className:"text-neutral-600 mb-4",children:"No bookings yet"}),(0,a.jsx)("a",{href:"/book",children:(0,a.jsx)(h.Z,{variant:"primary",children:"Book Your First Stay"})})]})}):(0,a.jsx)("div",{className:"space-y-4",children:Z.map(e=>{var t,s,r;return(0,a.jsx)(u.Z,{variant:"default",padding:"lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-lg text-neutral-900",children:null===(s=e.room)||void 0===s?void 0:null===(t=s.property)||void 0===t?void 0:t.name}),(0,a.jsx)("p",{className:"text-sm text-neutral-600",children:null===(r=e.room)||void 0===r?void 0:r.name}),(0,a.jsxs)("p",{className:"text-sm text-neutral-500 mt-1",children:[new Date(e.checkIn).toLocaleDateString()," - ",new Date(e.checkOut).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)(m.Z,{variant:"CONFIRMED"===e.status?"success":"PENDING"===e.status?"warning":(e.status,"neutral"),children:e.status}),(0,a.jsxs)("p",{className:"text-lg font-bold text-neutral-900 mt-2",children:["â‚¹",e.totalPrice.toLocaleString()]})]})]})},e.id)})})]}),"points"===w&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-neutral-900",children:"Points History"}),(0,a.jsxs)("p",{className:"text-lg",children:[(0,a.jsx)("span",{className:"text-neutral-600",children:"Current Balance:"})," ",(0,a.jsx)("span",{className:"font-bold text-neutral-900",children:null==_?void 0:null===(p=_.points)||void 0===p?void 0:p.toLocaleString()})]})]}),0===O.length?(0,a.jsx)(u.Z,{variant:"default",padding:"lg",children:(0,a.jsx)("div",{className:"text-center py-12 text-neutral-600",children:"No points activity yet. Book a stay to start earning!"})}):(0,a.jsx)("div",{className:"space-y-3",children:O.map(e=>(0,a.jsx)(u.Z,{variant:"default",padding:"md",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-neutral-900",children:e.reason}),(0,a.jsx)("p",{className:"text-sm text-neutral-500",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-lg font-bold ".concat(e.points>0?"text-green-600":"text-red-600"),children:[e.points>0?"+":"",e.points]}),(0,a.jsxs)("p",{className:"text-xs text-neutral-500",children:["Balance: ",e.balanceAfter]})]})]})},e.id))})]}),"profile"===w&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-neutral-900 mb-6",children:"Profile Information"}),(0,a.jsx)(u.Z,{variant:"default",padding:"lg",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Name"}),(0,a.jsx)("input",{type:"text",value:(null===(b=v.user)||void 0===b?void 0:b.name)||"",readOnly:!0,className:"w-full px-4 py-3 border border-neutral-300 rounded-lg bg-neutral-50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Email"}),(0,a.jsx)("input",{type:"email",value:(null===(g=v.user)||void 0===g?void 0:g.email)||"",readOnly:!0,className:"w-full px-4 py-3 border border-neutral-300 rounded-lg bg-neutral-50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Phone"}),(0,a.jsx)("input",{type:"tel",value:(null===(j=v.user)||void 0===j?void 0:j.phone)||"",readOnly:!0,className:"w-full px-4 py-3 border border-neutral-300 rounded-lg bg-neutral-50"})]}),(0,a.jsxs)("p",{className:"text-sm text-neutral-600",children:["To update your profile, please contact support at"," ",(0,a.jsx)("a",{href:"mailto:info@podnbeyond.com",className:"text-neutral-900 hover:underline",children:"info@podnbeyond.com"})]})]})})]})]})}),(0,a.jsx)(d.Z,{})]})]})}},1163:function(e,t,s){e.exports=s(3079)}},function(e){e.O(0,[996,177,888,774,179],function(){return e(e.s=682)}),_N_E=e.O()}]);