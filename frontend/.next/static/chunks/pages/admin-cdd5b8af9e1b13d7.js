(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{577:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return l(4298)}])},5732:function(e,t,l){"use strict";var s=l(5893);l(7294),t.Z=e=>{let{children:t,variant:l="neutral",size:a="md",className:r=""}=e;return(0,s.jsx)("span",{className:"inline-flex items-center font-medium rounded-full ".concat({capsule:"bg-capsule-100 text-capsule-800 border border-capsule-200",smart:"bg-smart-100 text-smart-800 border border-smart-200",sanctuary:"bg-sanctuary-100 text-sanctuary-800 border border-sanctuary-200",sauna:"bg-sauna-100 text-sauna-800 border border-sauna-200",neutral:"bg-neutral-100 text-neutral-800 border border-neutral-200",success:"bg-green-100 text-green-800 border border-green-200",warning:"bg-yellow-100 text-yellow-800 border border-yellow-200",error:"bg-red-100 text-red-800 border border-red-200"}[l]," ").concat({sm:"px-2 py-0.5 text-xs",md:"px-3 py-1 text-sm",lg:"px-4 py-1.5 text-base"}[a]," ").concat(r),children:t})}},4410:function(e,t,l){"use strict";var s=l(5893);l(7294),t.Z=e=>{let{variant:t="primary",size:l="md",fullWidth:a=!1,children:r,className:n="",disabled:i=!1,...o}=e;return(0,s.jsx)("button",{className:"".concat("font-semibold rounded-button transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-neutral-900 text-white hover:bg-neutral-800 focus:ring-neutral-900",secondary:"border-2 border-neutral-900 text-neutral-900 hover:bg-neutral-900 hover:text-white focus:ring-neutral-900",capsule:"bg-capsule-500 text-white hover:bg-capsule-600 focus:ring-capsule-500",smart:"bg-smart-500 text-white hover:bg-smart-600 focus:ring-smart-500",sanctuary:"bg-sanctuary-500 text-white hover:bg-sanctuary-600 focus:ring-sanctuary-500",sauna:"bg-sauna-500 text-white hover:bg-sauna-600 focus:ring-sauna-500",ghost:"text-neutral-700 hover:bg-neutral-100 focus:ring-neutral-500"}[t]," ").concat({sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg",xl:"px-10 py-5 text-xl"}[l]," ").concat(a?"w-full":""," ").concat(n),disabled:i,...o,children:r})}},5811:function(e,t,l){"use strict";var s=l(5893);l(7294),t.Z=e=>{let{label:t,error:l,helperText:a,fullWidth:r=!1,className:n="",id:i,...o}=e,d=i||(null==t?void 0:t.toLowerCase().replace(/\s+/g,"-")),c=r?"w-full":"";return(0,s.jsxs)("div",{className:"".concat(c),children:[t&&(0,s.jsx)("label",{htmlFor:d,className:"block text-sm font-semibold text-neutral-700 mb-2",children:t}),(0,s.jsx)("input",{id:d,className:"\n          px-4 py-3 \n          border rounded-lg \n          ".concat(l?"border-red-500":"border-neutral-300","\n          focus:outline-none focus:ring-2 \n          ").concat(l?"focus:ring-red-500":"focus:ring-neutral-900","\n          focus:border-transparent\n          disabled:bg-neutral-100 disabled:cursor-not-allowed\n          transition-all duration-200\n          ").concat(c,"\n          ").concat(n,"\n        "),...o}),l&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l}),a&&!l&&(0,s.jsx)("p",{className:"mt-1 text-sm text-neutral-600",children:a})]})}},4298:function(e,t,l){"use strict";l.r(t),l.d(t,{__N_SSP:function(){return v},default:function(){return b}});var s=l(5893),a=l(7294),r=l(5094),n=l(1163),i=l(9008),o=l.n(i),d=l(2734),c=l(8073),u=l(7360),x=l(6650),m=l(5732),p=l(4410),h=l(5811),v=!0;function b(e){var t,l,i,v,b,f,g,j,N,y,w,S,k,C,P,T,A,R,D,E,I,O,F;let{brands:Z,properties:B,bookings:M,loyalty:L,users:z,roomTypes:K,stats:_}=e,{data:G,signOut:U}=(0,r.a)(),W=(0,n.useRouter)(),[Y,H]=(0,a.useState)(B||[]),[J,q]=(0,a.useState)(K||[]),[V,X]=(0,a.useState)({}),[Q,$]=(0,a.useState)(!1),[ee,et]=(0,a.useState)(!1),[el,es]=(0,a.useState)(!1),[ea,er]=(0,a.useState)(!1),[en,ei]=(0,a.useState)(!1),[eo,ed]=(0,a.useState)(null),[ec,eu]=(0,a.useState)(null),[ex,em]=(0,a.useState)(null),[ep,eh]=(0,a.useState)([]),[ev,eb]=(0,a.useState)("overview"),[ef,eg]=(0,a.useState)(""),ej=(null==Y?void 0:null===(t=Y[0])||void 0===t?void 0:t.id)||null,eN=(null==Z?void 0:null===(l=Z[0])||void 0===l?void 0:l.id)||null,ey=ej?"PROPERTY":eN?"BRAND":"ORG",ew="PROPERTY"===ey?ej:"BRAND"===ey?eN:null,[eS,ek]=(0,a.useState)({razorpayKeyId:"rzp_test_placeholder",isTestMode:!0,autoCapture:!0}),[eC,eP]=(0,a.useState)([{id:1,name:"Booking.com",enabled:!1,connected:!1,apiKey:""},{id:2,name:"MakeMyTrip",enabled:!1,connected:!1,apiKey:""},{id:3,name:"Airbnb",enabled:!1,connected:!1,apiKey:""},{id:4,name:"Goibibo",enabled:!1,connected:!1,apiKey:""}]),[eT,eA]=(0,a.useState)({email:"",roleKey:"STAFF_FRONTDESK",scopeType:ey,scopeId:ew}),[eR,eD]=(0,a.useState)(!1),[eE,eI]=(0,a.useState)(null),[eO,eF]=(0,a.useState)(null),[eZ,eB]=(0,a.useState)(!1),[eM,eL]=(0,a.useState)(""),[ez,eK]=(0,a.useState)(null),[e_,eG]=(0,a.useState)(!1),[eU,eW]=(0,a.useState)(0),[eY,eH]=(0,a.useState)(0),[eJ,eq]=(0,a.useState)(""),[eV,eX]=(0,a.useState)(z||[]),[eQ,e$]=(0,a.useState)(""),[e0,e2]=(0,a.useState)(null),[e4,e1]=(0,a.useState)(!1),[e6,e3]=(0,a.useState)(!1),[e9,e5]=(0,a.useState)("STAFF_FRONTDESK"),[e7,e8]=(0,a.useState)("ORG"),[te,tt]=(0,a.useState)(null),[tl,ts]=(0,a.useState)(""),[ta,tr]=(0,a.useState)(""),[tn,ti]=(0,a.useState)(""),[to,td]=(0,a.useState)({firstName:"",lastName:"",email:"",phone:"",roleKey:"STAFF_FRONTDESK",scopeType:ey,scopeId:ew}),tc=(0,a.useMemo)(()=>{let e=new Map;return(J||[]).forEach(t=>{var l,s;let a=null==t?void 0:null===(l=t.property)||void 0===l?void 0:l.id;a&&(e.has(a)||e.set(a,[]),null===(s=e.get(a))||void 0===s||s.push(t))}),e},[J]);(0,a.useEffect)(()=>{if(Q||!Y||0===Y.length)return;let e=!1;return(async()=>{et(!0);try{let t=await Promise.all(Y.map(async e=>{let t=await fetch("/api/admin/properties/".concat(e.id,"/room-types"),{credentials:"include",headers:{Accept:"application/json"}});if(!t.ok){let l=await t.text();throw Error(l||"Failed to load room types for property ".concat(e.id))}let l=await t.json();return{propertyId:e.id,payload:null==l?void 0:l.data}}));if(e)return;let l=[],s={};t.forEach(e=>{if(!(null==e?void 0:e.payload))return;s[e.propertyId]=e.payload;let t=e.payload.property;(e.payload.roomTypes||[]).forEach(e=>{l.push({...e,property:{id:null==t?void 0:t.id,name:null==t?void 0:t.name}})})}),X(s),q(l),H(e=>e.map(e=>{var t,l,a,r,n,i,o,d;let c=s[e.id];return c?{...e,defaultBuffer:null!==(n=null===(t=c.property)||void 0===t?void 0:t.defaultBuffer)&&void 0!==n?n:e.defaultBuffer,timezone:null!==(i=null===(l=c.property)||void 0===l?void 0:l.timezone)&&void 0!==i?i:e.timezone,currency:null!==(o=null===(a=c.property)||void 0===a?void 0:a.currency)&&void 0!==o?o:e.currency,overbookingEnabled:null!==(d=null===(r=c.property)||void 0===r?void 0:r.overbookingEnabled)&&void 0!==d?d:e.overbookingEnabled}:e})),$(!0)}catch(t){e||console.error("Failed to load property room types",t)}finally{e||et(!1)}})(),()=>{e=!0}},[Y,Q]);let[tu,tx]=(0,a.useState)(ej),[tm,tp]=(0,a.useState)(7),[th,tv]=(0,a.useState)(null),[tb,tf]=(0,a.useState)(!1),[tg,tj]=(0,a.useState)(null),[tN,ty]=(0,a.useState)(0),tw=e=>new Date(e).toLocaleDateString("en-IN",{month:"short",day:"numeric"}),tS=e=>new Date(e).toLocaleDateString("en-IN",{weekday:"short"}),tk=tu&&Y.find(e=>e.id===tu)||null,tC=tu&&tc.get(tu)||[],tP=ec?V[ec]:null,tT=()=>{es(!1),er(!1),ei(!1),ed(null),eu(null),em(null),eh([])},tA=()=>{tT()},tR=async e=>{es(!0),er(!0),ed(null),eu(e);let t=Y.find(t=>t.id===e)||null;em({name:(null==t?void 0:t.name)||"",phone:(null==t?void 0:t.phone)||"",email:(null==t?void 0:t.email)||"",defaultBuffer:(null==t?void 0:t.defaultBuffer)!==void 0&&(null==t?void 0:t.defaultBuffer)!==null?String(t.defaultBuffer):"0",timezone:(null==t?void 0:t.timezone)||"Asia/Kolkata",overbookingEnabled:(null==t?void 0:t.overbookingEnabled)!==!1,address:(null==t?void 0:t.address)||"",city:(null==t?void 0:t.city)||"",state:(null==t?void 0:t.state)||"",pincode:(null==t?void 0:t.pincode)||"",currency:(null==t?void 0:t.currency)||"INR"});try{let t=await fetch("/api/admin/properties/".concat(e,"/room-types"),{credentials:"include",headers:{Accept:"application/json"}});if(!t.ok){let e=await t.text();throw Error(e||"Failed to load property room types")}let l=await t.json(),s=null==l?void 0:l.data;(null==s?void 0:s.property)&&em(e=>{var t,l;return{...e||{},defaultBuffer:void 0!==s.property.defaultBuffer&&null!==s.property.defaultBuffer?String(s.property.defaultBuffer):null!==(t=null==e?void 0:e.defaultBuffer)&&void 0!==t?t:"0",timezone:s.property.timezone||(null==e?void 0:e.timezone)||"Asia/Kolkata",overbookingEnabled:void 0!==s.property.overbookingEnabled?s.property.overbookingEnabled:null===(l=null==e?void 0:e.overbookingEnabled)||void 0===l||l,currency:s.property.currency||(null==e?void 0:e.currency)||"INR"}});let a=((null==s?void 0:s.roomTypes)||[]).map((e,t)=>{var l,s;return{id:e.id,tempId:"existing-".concat(e.id),name:e.name||"",code:e.code||"",baseRooms:void 0!==e.baseRooms&&null!==e.baseRooms?String(e.baseRooms):"0",capacity:void 0!==e.capacity&&null!==e.capacity?String(e.capacity):"1",description:e.description||"",isActive:!1!==e.isActive,ratePlanPrice:(null==e?void 0:null===(l=e.ratePlan)||void 0===l?void 0:l.seasonalPrice)!==void 0&&(null==e?void 0:null===(s=e.ratePlan)||void 0===s?void 0:s.seasonalPrice)!==null?String(Number(e.ratePlan.seasonalPrice)):"",sortOrder:void 0!==e.sortOrder&&null!==e.sortOrder?String(e.sortOrder):String(t),inventorySummary:e.inventorySummary||null}});eh(a),X(t=>({...t,[e]:s}))}catch(e){console.error("Failed to load property editor data",e),ed((null==e?void 0:e.message)||"Failed to load property data")}finally{er(!1)}},tD=(e,t)=>{em(l=>({...l||{},[e]:t}))},tE=(e,t,l)=>{eh(s=>{let a=[...s];return a[e]={...a[e],[t]:l},a})},tI=e=>{eh(t=>t.filter((t,l)=>l!==e))},tO=async()=>{if(ec&&ex){if(!ep||0===ep.length){ed("Add at least one room type before saving.");return}if(ep.find(e=>!e.name||!e.name.trim())){ed("Every room type needs a name.");return}if(ep.some(e=>""!==e.ratePlanPrice&&null!==e.ratePlanPrice&&void 0!==e.ratePlanPrice&&Number.isNaN(Number(e.ratePlanPrice)))){ed("BAR price must be a valid number.");return}ei(!0),ed(null);try{var e,t,l,s,a,r,n,i,o;let d={name:(null===(e=ex.name)||void 0===e?void 0:e.trim())||ex.name,phone:(null===(t=ex.phone)||void 0===t?void 0:t.trim())||null,email:(null===(l=ex.email)||void 0===l?void 0:l.trim())||null,defaultBuffer:Number(null!==(o=ex.defaultBuffer)&&void 0!==o?o:0)||0,timezone:ex.timezone||"Asia/Kolkata",overbookingEnabled:!1!==ex.overbookingEnabled,address:(null===(s=ex.address)||void 0===s?void 0:s.trim())||null,city:(null===(a=ex.city)||void 0===a?void 0:a.trim())||null,state:(null===(r=ex.state)||void 0===r?void 0:r.trim())||null,pincode:(null===(n=ex.pincode)||void 0===n?void 0:n.trim())||null,currency:ex.currency||"INR"},c=await fetch("/api/properties/".concat(ec),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(d)});if(!c.ok){let e=await c.text();throw Error(e||"Failed to update property details.")}let u=await c.json(),x=(null==u?void 0:u.property)||(null==u?void 0:null===(i=u.data)||void 0===i?void 0:i.property)||null,m=ep.map((e,t)=>{var l,s,a,r,n,i;return{...e.id?{id:e.id}:{},name:null===(l=e.name)||void 0===l?void 0:l.trim(),code:(null===(s=e.code)||void 0===s?void 0:s.trim())||void 0,baseRooms:Number(null!==(r=e.baseRooms)&&void 0!==r?r:0)||0,capacity:Number(null!==(n=e.capacity)&&void 0!==n?n:1)||1,isActive:!1!==e.isActive,description:(null===(a=e.description)||void 0===a?void 0:a.trim())||null,sortOrder:Number(null!==(i=e.sortOrder)&&void 0!==i?i:t),ratePlanPrice:""===e.ratePlanPrice||null===e.ratePlanPrice?null:Number(e.ratePlanPrice)}}),p=await fetch("/api/admin/properties/".concat(ec,"/room-types"),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({roomTypes:m})});if(!p.ok){let e=await p.text();throw Error(e||"Failed to save room types.")}let h=await p.json(),v=null==h?void 0:h.data;(null==v?void 0:v.roomTypes)&&(eh(v.roomTypes.map((e,t)=>{var l,s;return{id:e.id,tempId:"existing-".concat(e.id),name:e.name||"",code:e.code||"",baseRooms:void 0!==e.baseRooms&&null!==e.baseRooms?String(e.baseRooms):"0",capacity:void 0!==e.capacity&&null!==e.capacity?String(e.capacity):"1",description:e.description||"",isActive:!1!==e.isActive,ratePlanPrice:(null==e?void 0:null===(l=e.ratePlan)||void 0===l?void 0:l.seasonalPrice)!==void 0&&(null==e?void 0:null===(s=e.ratePlan)||void 0===s?void 0:s.seasonalPrice)!==null?String(Number(e.ratePlan.seasonalPrice)):"",sortOrder:void 0!==e.sortOrder&&null!==e.sortOrder?String(e.sortOrder):String(t),inventorySummary:e.inventorySummary||null}})),X(e=>({...e,[ec]:v})),q(e=>{let t=e.filter(e=>{var t;return(null==e?void 0:null===(t=e.property)||void 0===t?void 0:t.id)!==ec}),l=v.roomTypes.map(e=>({...e,property:{id:v.property.id,name:v.property.name}}));return[...t,...l]})),x&&H(e=>e.map(e=>e.id===ec?{...e,...x}:e)),ty(e=>e+1),tT()}catch(e){console.error("Failed to save property configuration",e),ed((null==e?void 0:e.message)||"Failed to save property configuration.")}finally{ei(!1)}}},tF=L.filter(e=>{var t,l,s;if(!eM)return!0;let a=eM.toLowerCase();return(null===(t=e.userName)||void 0===t?void 0:t.toLowerCase().includes(a))||(null===(l=e.userEmail)||void 0===l?void 0:l.toLowerCase().includes(a))||(null===(s=e.memberNumber)||void 0===s?void 0:s.includes(a))}),tZ=eV.filter(e=>{var t,l;if(!eQ)return!0;let s=eQ.toLowerCase();return e.name&&e.name.toLowerCase().includes(s)||(null===(t=e.email)||void 0===t?void 0:t.toLowerCase().includes(s))||e.phone&&e.phone.toLowerCase().includes(s)||(null===(l=e.roleName)||void 0===l?void 0:l.toLowerCase().includes(s))});(0,a.useEffect)(()=>{eg(new Date().toLocaleString());let e=setInterval(()=>{eg(new Date().toLocaleString())},6e4);return()=>clearInterval(e)},[]),(0,a.useEffect)(()=>{console.log("Admin Data Received:",{brands:null==Z?void 0:Z.length,properties:null==Y?void 0:Y.length,bookings:null==M?void 0:M.length,loyalty:null==L?void 0:L.length,users:null==z?void 0:z.length,stats:_})},[Z,Y,M,L,z,_]),(0,a.useEffect)(()=>{eX(z||[])},[z]),(0,a.useEffect)(()=>{"PROPERTY"===eT.scopeType?eT.scopeId&&Y.find(e=>e.id===eT.scopeId)||!(Y.length>0)||eA(e=>({...e,scopeId:Y[0].id})):"BRAND"===eT.scopeType?eT.scopeId&&Z.find(e=>e.id===eT.scopeId)||!(Z.length>0)||eA(e=>({...e,scopeId:Z[0].id})):null!==eT.scopeId&&eA(e=>({...e,scopeId:null}))},[eT.scopeType,eT.scopeId,Y,Z]),(0,a.useEffect)(()=>{"PROPERTY"===to.scopeType?to.scopeId&&Y.find(e=>e.id===to.scopeId)||!(Y.length>0)||td(e=>({...e,scopeId:Y[0].id})):"BRAND"===to.scopeType?to.scopeId&&Z.find(e=>e.id===to.scopeId)||!(Z.length>0)||td(e=>({...e,scopeId:Z[0].id})):null!==to.scopeId&&td(e=>({...e,scopeId:null}))},[to.scopeType,to.scopeId,Y,Z]),(0,a.useEffect)(()=>{if(!tu){tv(null);return}let e=new AbortController;return(async()=>{tf(!0),tj(null);try{let t=new Date;t.setHours(0,0,0,0);let l=new Date(t);l.setDate(l.getDate()+tm);let s=new URLSearchParams({propertyId:tu.toString(),start:t.toISOString(),end:l.toISOString()}),a="/api/inventory/availability?".concat(s.toString()),r=await fetch(a,{signal:e.signal,credentials:"include",headers:{Accept:"application/json"}}),n=r.headers.get("content-type")||"",i=null;try{if(n.includes("application/json"))i=await r.json();else{let e=await r.text();throw Error(r.ok?"Inventory API returned an unexpected response format.":e||"Failed to load inventory (status ".concat(r.status,")"))}}catch(e){if(!n.includes("application/json"))throw e;throw Error("Unable to parse inventory data from the server.")}if(!r.ok||(null==i?void 0:i.success)===!1)throw Error((null==i?void 0:i.error)||"Failed to load inventory (status ".concat(r.status,")"));tv(i)}catch(e){if("AbortError"===e.name)return;console.error("Inventory fetch error:",e),tj(e.message||"Failed to load inventory data"),tv(null)}finally{tf(!1)}})(),()=>e.abort()},[tu,tm,tN]);let tB=async e=>{e.preventDefault(),eD(!0),eI(null),eF(null);let t=eT.email.trim();if(!t){eI({type:"error",text:"Email address is required."}),eD(!1);return}try{let e=await fetch("/api/admin/invites",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...eT,email:t})}),s=await e.json();if(e.ok){var l;let e=null==s?void 0:null===(l=s.invite)||void 0===l?void 0:l.inviteUrl;eI({type:"success",text:"Invite sent to ".concat(eT.email,"!")}),eF(e||null),eA({email:"",roleKey:"STAFF_FRONTDESK",scopeType:ey,scopeId:ew})}else eI({type:"error",text:s.error||"Failed to send invite"}),eF(null)}catch(e){eI({type:"error",text:"Network error. Please try again."}),eF(null)}finally{eD(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-neutral-50",children:[(0,s.jsxs)(o(),{children:[(0,s.jsx)("title",{children:"Admin Dashboard | POD N BEYOND"}),(0,s.jsx)("meta",{name:"description",content:"POD N BEYOND Admin Dashboard"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,s.jsx)("link",{rel:"apple-touch-icon",href:"/logo-podnbeyond.png"})]}),(0,s.jsx)(d.Z,{}),(0,s.jsx)("section",{className:"pt-24 pb-6 bg-gradient-to-br from-neutral-900 to-neutral-800 text-white",children:(0,s.jsxs)(u.Z,{children:[(0,s.jsxs)("div",{className:"flex items-start justify-between flex-wrap gap-4 mb-6",children:[(0,s.jsx)("div",{className:"flex items-start gap-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("p",{className:"text-xs text-neutral-400 uppercase tracking-wide",children:"Signed in as"}),(0,s.jsx)("p",{className:"text-white font-semibold text-sm mt-0.5",children:(null==G?void 0:null===(i=G.user)||void 0===i?void 0:i.email)||"Loading..."}),(0,s.jsx)("p",{className:"text-xs text-neutral-500 mt-0.5",children:(null==G?void 0:null===(g=G.user)||void 0===g?void 0:null===(f=g.roles)||void 0===f?void 0:null===(b=f[0])||void 0===b?void 0:null===(v=b.key)||void 0===v?void 0:v.replace(/_/g," "))||"MEMBER"})]}),(0,s.jsx)("div",{className:"h-12 w-px bg-neutral-700"}),(0,s.jsx)("button",{onClick:()=>U({callbackUrl:"/"}),className:"px-4 py-2 bg-white/10 border border-white/20 text-white rounded-button text-sm font-semibold hover:bg-white hover:text-neutral-900 transition-all",children:"Sign Out"})]})}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-1",children:"Admin Dashboard"}),(0,s.jsx)("p",{className:"text-neutral-300 text-sm",children:"POD N BEYOND Group Management"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,s.jsx)("a",{href:"/admin/communication-hub",children:(0,s.jsx)("button",{className:"px-6 py-2 rounded-button font-semibold transition-all ".concat((null===(j=W.asPath)||void 0===j?void 0:j.startsWith("/admin/communication-hub"))?"bg-white text-neutral-900":"bg-white/10 border border-white/20 text-white hover:bg-white hover:text-neutral-900"),children:"\uD83D\uDCAC Communication Hub"})}),(0,s.jsx)("a",{href:"/admin/integrations",children:(0,s.jsx)("button",{className:"px-6 py-2 rounded-button font-semibold transition-all ".concat((null===(N=W.asPath)||void 0===N?void 0:N.startsWith("/admin/integrations"))?"bg-white text-neutral-900":"bg-white/10 border border-white/20 text-white hover:bg-white hover:text-neutral-900"),children:"⚙️ Integrations"})})]})]})}),(0,s.jsx)("section",{className:"bg-white border-b border-neutral-200 sticky top-0 z-20",children:(0,s.jsx)(u.Z,{children:(0,s.jsx)("div",{className:"flex space-x-8 overflow-x-auto py-4",children:["overview","brands","properties","bookings","loyalty","users","cms"].map(e=>(0,s.jsx)("button",{onClick:()=>eb(e),className:"pb-2 px-1 font-semibold capitalize whitespace-nowrap transition-colors border-b-2 ".concat(ev===e?"border-neutral-900 text-neutral-900":"border-transparent text-neutral-500 hover:text-neutral-700"),children:"cms"===e?"CMS":e},e))})})}),(0,s.jsx)("section",{className:"py-12",children:(0,s.jsxs)(u.Z,{children:["overview"===ev&&(0,s.jsxs)("div",{className:"space-y-8 animate-fade-in",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-neutral-900 mb-6",children:"Dashboard Overview"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[(0,s.jsxs)(x.Z,{variant:"default",padding:"lg",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-neutral-600 mb-2",children:"Total Brands"}),(0,s.jsx)("div",{className:"text-4xl font-bold text-capsule-500",children:_.brands}),(0,s.jsxs)("div",{className:"text-sm text-neutral-500 mt-2",children:[Z.filter(e=>"ACTIVE"===e.status).length," active"]})]}),(0,s.jsxs)(x.Z,{variant:"default",padding:"lg",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-neutral-600 mb-2",children:"Total Properties"}),(0,s.jsx)("div",{className:"text-4xl font-bold text-smart-500",children:_.properties}),(0,s.jsxs)("div",{className:"text-sm text-neutral-500 mt-2",children:["Across ",Z.length," brands"]})]}),(0,s.jsxs)(x.Z,{variant:"default",padding:"lg",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-neutral-600 mb-2",children:"Total Bookings"}),(0,s.jsx)("div",{className:"text-4xl font-bold text-sanctuary-500",children:(null==M?void 0:M.length)||0}),(0,s.jsxs)("div",{className:"text-sm text-neutral-500 mt-2",children:[(null==M?void 0:M.filter(e=>"CONFIRMED"===e.status).length)||0," confirmed"]})]}),(0,s.jsxs)(x.Z,{variant:"default",padding:"lg",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-neutral-600 mb-2",children:"Loyalty Members"}),(0,s.jsx)("div",{className:"text-4xl font-bold text-sauna-500",children:(null==L?void 0:L.length)||0}),(0,s.jsxs)("div",{className:"text-sm text-neutral-500 mt-2",children:[(null==L?void 0:L.filter(e=>"PLATINUM"===e.tier).length)||0," platinum"]})]}),(0,s.jsxs)(x.Z,{variant:"default",padding:"lg",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-neutral-600 mb-2",children:"Staff Members"}),(0,s.jsx)("div",{className:"text-4xl font-bold text-neutral-900",children:(null==eV?void 0:eV.length)||0}),(0,s.jsxs)("div",{className:"text-sm text-neutral-500 mt-2",children:[(null==eV?void 0:eV.filter(e=>"SUPERADMIN"===e.roleKey||"ADMIN"===e.roleKey).length)||0," admins"]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-neutral-900 mb-4",children:"Recent Bookings"}),(0,s.jsx)(x.Z,{variant:"default",padding:"none",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-neutral-100 border-b border-neutral-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-700 uppercase tracking-wider",children:"Guest"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-700 uppercase tracking-wider",children:"Check-in"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-700 uppercase tracking-wider",children:"Room"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-700 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-700 uppercase tracking-wider",children:"Total"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-neutral-200",children:M&&M.length>0?M.slice(0,5).map(e=>{var t,l,a;return(0,s.jsxs)("tr",{className:"hover:bg-neutral-50",children:[(0,s.jsxs)("td",{className:"px-6 py-4",children:[(0,s.jsx)("div",{className:"font-medium text-neutral-900",children:e.guestName}),(0,s.jsx)("div",{className:"text-sm text-neutral-500",children:e.email})]}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-neutral-700",children:new Date(e.checkIn).toLocaleDateString()}),(0,s.jsxs)("td",{className:"px-6 py-4 text-sm text-neutral-700",children:[(0,s.jsx)("div",{className:"font-medium text-neutral-900",children:(null===(t=e.roomType)||void 0===t?void 0:t.name)||(null===(l=e.roomType)||void 0===l?void 0:l.type)||"N/A"}),(0,s.jsx)("div",{className:"text-xs text-neutral-500",children:(null===(a=e.property)||void 0===a?void 0:a.name)||e.source||"Direct"})]}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)(m.Z,{variant:"CONFIRMED"===e.status?"success":"HOLD"===e.status?"warning":"PENDING"===e.status?"warning":"CANCELLED"===e.status?"error":"FAILED"===e.status?"error":"NO_SHOW"===e.status?"error":"neutral",size:"sm",children:e.status})}),(0,s.jsxs)("td",{className:"px-6 py-4 font-semibold text-neutral-900",children:["₹",Number(e.totalPrice||0).toLocaleString()]})]},e.id)}):(0,s.jsx)("tr",{children:(0,s.jsxs)("td",{colSpan:5,className:"px-6 py-12 text-center text-neutral-500",children:[(0,s.jsx)("p",{className:"mb-2",children:"No bookings data available"}),(0,s.jsxs)("p",{className:"text-sm",children:["Test data: ",(null==M?void 0:M.length)||0," bookings in database"]})]})})})]})})})]})]}),"brands"===ev&&(0,s.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-neutral-900 mb-6",children:"Brand Management"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Z.map(e=>{var t;return(0,s.jsxs)(x.Z,{variant:"default",padding:"lg",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[e.logoUrl&&(0,s.jsx)("img",{src:e.logoUrl,alt:e.name,className:"h-10"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-lg text-neutral-900",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-neutral-600",children:e.tagline})]})]}),(0,s.jsx)(m.Z,{variant:"ACTIVE"===e.status?"success":"warning",size:"sm",children:e.status})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-neutral-600",children:"Properties:"}),(0,s.jsx)("span",{className:"ml-2 font-semibold",children:(null===(t=e._count)||void 0===t?void 0:t.properties)||0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-neutral-600",children:"Color:"}),(0,s.jsx)("div",{className:"inline-flex items-center ml-2",children:(0,s.jsx)("div",{className:"w-4 h-4 rounded-full border border-neutral-300",style:{backgroundColor:e.primaryColor}})})]})]}),e.targetAudience&&(0,s.jsxs)("p",{className:"text-sm text-neutral-700 border-t border-neutral-100 pt-4",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Target:"})," ",e.targetAudience]}),(0,s.jsx)("div",{className:"mt-4 pt-4 border-t border-neutral-100",children:(0,s.jsx)("a",{href:"/brands/".concat(e.slug),children:(0,s.jsx)(p.Z,{variant:"ghost",size:"sm",fullWidth:!0,children:"View Brand Page →"})})})]},e.id)})})]}),"properties"===ev&&(0,s.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-neutral-900 mb-6",children:"Property Management"}),ee&&(0,s.jsx)("div",{className:"rounded-lg border border-neutral-200 bg-neutral-50 px-4 py-3 text-sm text-neutral-600",children:"Syncing latest room types and inventory data..."}),(0,s.jsx)("div",{className:"grid grid-cols-1 gap-6",children:Y.map(e=>{let t=tc.get(e.id)||[],l=t.reduce((e,t)=>e+(t.baseRooms||0),0);return(0,s.jsxs)(x.Z,{variant:"default",padding:"lg",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,s.jsx)("h3",{className:"font-bold text-xl text-neutral-900",children:e.name}),e.brand&&(0,s.jsx)(m.Z,{variant:"neutral",size:"sm",children:e.brand.name})]}),(0,s.jsxs)("p",{className:"text-neutral-600",children:["\uD83D\uDCCD ",e.address||e.location,", ",e.city,", ",e.state]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1 mb-1",children:[(0,s.jsx)("span",{className:"text-smart-500",children:"⭐"}),(0,s.jsx)("span",{className:"font-semibold",children:e.rating}),(0,s.jsxs)("span",{className:"text-sm text-neutral-500",children:["(",e.totalRatings,")"]})]}),(0,s.jsx)(m.Z,{variant:"success",size:"sm",children:e.status})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-neutral-600",children:"Room Types:"}),(0,s.jsx)("span",{className:"ml-2 font-semibold",children:t.length})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-neutral-600",children:"Base Pods:"}),(0,s.jsx)("span",{className:"ml-2 font-semibold",children:l})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-neutral-600",children:"Phone:"}),(0,s.jsx)("span",{className:"ml-2 font-semibold",children:e.phone})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-neutral-600",children:"Email:"}),(0,s.jsx)("span",{className:"ml-2 font-semibold text-xs",children:e.email})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-neutral-100",children:[(0,s.jsx)("a",{href:"/locations/".concat(e.slug),className:"flex-1",children:(0,s.jsx)(p.Z,{variant:"ghost",size:"sm",fullWidth:!0,children:"View Page"})}),(0,s.jsx)(p.Z,{variant:"primary",size:"sm",onClick:()=>tR(e.id),children:"Edit"})]})]},e.id)})}),Y.length>0&&(0,s.jsxs)(x.Z,{variant:"default",padding:"lg",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-neutral-900",children:"Inventory Snapshot"}),(0,s.jsxs)("p",{className:"text-sm text-neutral-500",children:["Buffer-aware availability for the next ",tm," days."]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,s.jsx)("select",{className:"px-3 py-2 border border-neutral-200 rounded-md text-sm bg-white",value:null!=tu?tu:"",onChange:e=>{let t=e.target.value;tx(t?Number(t):null)},children:Y.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,s.jsx)("select",{className:"px-3 py-2 border border-neutral-200 rounded-md text-sm bg-white",value:tm,onChange:e=>tp(Number(e.target.value)),children:[7,14,30].map(e=>(0,s.jsxs)("option",{value:e,children:[e," days"]},e))}),(0,s.jsx)(p.Z,{variant:"ghost",size:"sm",onClick:()=>ty(e=>e+1),children:"Refresh"})]})]}),tg&&(0,s.jsx)("div",{className:"mb-4 text-sm text-red-600 bg-red-50 border border-red-100 rounded-md px-3 py-2",children:tg}),tb&&(0,s.jsx)("div",{className:"py-6 text-sm text-neutral-500",children:"Loading inventory..."}),!tb&&th&&th.roomTypes&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-sm text-neutral-600",children:[(0,s.jsxs)("span",{children:["Window:"," ",(0,s.jsxs)("strong",{children:[tw(th.range.start)," → ",tw(th.range.end)]})]}),tk&&(0,s.jsxs)("span",{children:["Timezone: ",(0,s.jsx)("strong",{children:tk.timezone||"Asia/Kolkata"})]}),(0,s.jsxs)("span",{children:["Buffer: ",(0,s.jsxs)("strong",{children:[null!==(k=null!==(S=null===(y=th.property)||void 0===y?void 0:y.defaultBuffer)&&void 0!==S?S:null==tk?void 0:tk.defaultBuffer)&&void 0!==k?k:0,"%"]})]}),(0,s.jsxs)("span",{children:["Room types tracked:"," ",(0,s.jsx)("strong",{children:tC.length})]})]}),0===th.roomTypes.length&&(0,s.jsx)("div",{className:"text-sm text-neutral-500",children:"No inventory configured for this property."}),(0,s.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:th.roomTypes.map(e=>(0,s.jsxs)("div",{className:"border border-neutral-200 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-neutral-900",children:e.name}),(0,s.jsxs)("p",{className:"text-xs text-neutral-500",children:["Capacity ",e.capacity," \xb7 Base ",e.baseRooms]})]}),(0,s.jsxs)("div",{className:"text-right text-xs text-neutral-500",children:[(0,s.jsxs)("div",{children:["Free to sell total:"," ",(0,s.jsx)("span",{className:"font-semibold text-neutral-900",children:e.summary.totalFreeToSell})]}),(0,s.jsxs)("div",{children:["Booked:"," ",(0,s.jsx)("span",{className:"font-semibold text-neutral-900",children:e.summary.totalBooked})]}),(0,s.jsxs)("div",{children:["Holds:"," ",(0,s.jsx)("span",{className:"font-semibold text-neutral-900",children:e.summary.totalHolds})]})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2 text-xs",children:e.availability.slice(0,Math.min(tm,9)).map(e=>(0,s.jsxs)("div",{className:"border border-neutral-200 rounded-md px-3 py-2 bg-neutral-50",children:[(0,s.jsx)("div",{className:"font-semibold text-neutral-900",children:tS(e.date)}),(0,s.jsx)("div",{className:"text-neutral-500",children:tw(e.date)}),(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-neutral-500",children:"Sellable"}),(0,s.jsx)("span",{className:"font-semibold text-neutral-900",children:e.sellable})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-neutral-500",children:"Booked"}),(0,s.jsx)("span",{className:"font-semibold text-neutral-900",children:e.booked})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-neutral-500",children:"Holds"}),(0,s.jsx)("span",{className:"font-semibold text-neutral-900",children:e.holds})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-neutral-500",children:"Free"}),(0,s.jsx)("span",{className:"font-semibold text-sanctuary-500",children:e.freeToSell})]})]})]},e.date))})]},e.roomTypeId))})]}),!tb&&!th&&!tg&&(0,s.jsx)("div",{className:"text-sm text-neutral-500",children:"Select a property to view inventory."})]})]}),"bookings"===ev&&(0,s.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-neutral-900",children:"Bookings Management"}),(0,s.jsxs)("div",{className:"text-sm text-neutral-600",children:["Total: ",M.length," bookings"]})]}),(0,s.jsx)(x.Z,{variant:"default",padding:"none",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-neutral-900 text-white",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"ID"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Guest"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Room"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Check-in"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Nights"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Total"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-neutral-200",children:M.map(e=>{var t,l,a;let r=Math.ceil((new Date(e.checkOut).getTime()-new Date(e.checkIn).getTime())/864e5);return(0,s.jsxs)("tr",{className:"hover:bg-neutral-50 transition-colors",children:[(0,s.jsxs)("td",{className:"px-6 py-4 text-sm font-mono text-neutral-500",children:["#",e.id]}),(0,s.jsxs)("td",{className:"px-6 py-4",children:[(0,s.jsx)("div",{className:"font-medium text-neutral-900",children:e.guestName}),(0,s.jsx)("div",{className:"text-sm text-neutral-500",children:e.email}),e.phone&&(0,s.jsx)("div",{className:"text-xs text-neutral-400",children:e.phone})]}),(0,s.jsxs)("td",{className:"px-6 py-4 text-sm text-neutral-700",children:[(0,s.jsx)("div",{className:"font-medium text-neutral-900",children:(null===(t=e.roomType)||void 0===t?void 0:t.name)||(null===(l=e.roomType)||void 0===l?void 0:l.type)||"N/A"}),(0,s.jsx)("div",{className:"text-xs text-neutral-500",children:(null===(a=e.property)||void 0===a?void 0:a.name)||e.source||"Direct"})]}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-neutral-700",children:new Date(e.checkIn).toLocaleDateString()}),(0,s.jsxs)("td",{className:"px-6 py-4 text-sm text-neutral-700",children:[r," ",1===r?"night":"nights"]}),(0,s.jsxs)("td",{className:"px-6 py-4",children:[(0,s.jsx)(m.Z,{variant:"CONFIRMED"===e.status?"success":"HOLD"===e.status?"warning":"PENDING"===e.status?"warning":"CANCELLED"===e.status?"error":"FAILED"===e.status?"error":"NO_SHOW"===e.status?"error":"neutral",size:"sm",children:e.status}),e.externalChannel&&(0,s.jsxs)("div",{className:"text-xs text-neutral-500 mt-1",children:["via ",e.externalChannel]})]}),(0,s.jsxs)("td",{className:"px-6 py-4",children:[(0,s.jsxs)("div",{className:"font-bold text-neutral-900",children:["₹",Number(e.totalPrice||0).toLocaleString()]}),e.specialRequests&&(0,s.jsx)("div",{className:"text-xs text-neutral-500 mt-1",children:"Has special requests"})]})]},e.id)})})]})})}),0===M.length&&(0,s.jsx)("div",{className:"text-center py-12 text-neutral-500",children:"No bookings yet. Test data should be seeded."})]}),"loyalty"===ev&&(0,s.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-neutral-900",children:"Loyalty Program"}),(0,s.jsxs)("div",{className:"text-sm text-neutral-600 mt-1",children:[L.length," total members"]})]})}),(0,s.jsx)(x.Z,{variant:"default",padding:"md",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("input",{type:"text",placeholder:"Search by name, email, or member number...",value:eM,onChange:e=>eL(e.target.value),className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})}),(0,s.jsxs)("div",{className:"text-sm text-neutral-600",children:[tF.length," results"]})]})}),tF.length>0?(0,s.jsx)(x.Z,{variant:"default",padding:"none",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-neutral-50 border-b border-neutral-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-600 uppercase tracking-wider",children:"Member"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-600 uppercase tracking-wider",children:"Contact"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-600 uppercase tracking-wider",children:"Tier"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-semibold text-neutral-600 uppercase tracking-wider",children:"Points"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-semibold text-neutral-600 uppercase tracking-wider",children:"Stays"}),(0,s.jsx)("th",{className:"px-6 py-3 text-center text-xs font-semibold text-neutral-600 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-neutral-200",children:tF.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-neutral-50 transition-colors",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-semibold text-neutral-900",children:e.userName||"N/A"}),(0,s.jsxs)("div",{className:"text-sm text-neutral-500",children:["Member #",e.memberNumber]})]})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("div",{className:"text-neutral-900",children:e.userEmail}),e.userPhone&&(0,s.jsx)("div",{className:"text-neutral-500",children:e.userPhone})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)(m.Z,{variant:"PLATINUM"===e.tier?"neutral":"GOLD"===e.tier?"smart":"capsule",size:"sm",children:e.tier})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,s.jsx)("div",{className:"font-semibold text-neutral-900",children:e.points.toLocaleString()})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,s.jsx)("div",{className:"text-neutral-900",children:e.lifetimeStays||0})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,s.jsx)("button",{onClick:()=>{eK(e),eW(0),eH(0),eq(""),eG(!0)},className:"text-neutral-900 hover:text-neutral-700 font-semibold text-sm",children:"Manage Member"})})]},e.id))})]})})}):(0,s.jsx)("div",{className:"text-center py-12 text-neutral-500",children:eM?"No members found matching your search.":"No loyalty members yet."})]}),"users"===ev&&(0,s.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-neutral-900",children:"User Management"}),(0,s.jsx)("p",{className:"text-neutral-600 mt-1",children:"Invite staff members, manage permissions, and track access scopes."})]}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[(0,s.jsx)(p.Z,{variant:"secondary",onClick:()=>{eI(null),eB(!0)},children:"Invite User"}),(0,s.jsx)(p.Z,{variant:"primary",onClick:()=>e3(!0),children:"Add User"})]})]}),(0,s.jsx)(x.Z,{variant:"default",padding:"md",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("input",{type:"text",placeholder:"Search by name, email, phone, or role...",value:eQ,onChange:e=>e$(e.target.value),className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})}),(0,s.jsxs)("div",{className:"text-sm text-neutral-600",children:[tZ.length," of ",eV.length," users"]})]})}),tZ.length>0?(0,s.jsx)(x.Z,{variant:"default",padding:"none",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-neutral-50 border-b border-neutral-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-600 uppercase tracking-wider",children:"User"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-600 uppercase tracking-wider",children:"Role"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-600 uppercase tracking-wider",children:"Scope"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-600 uppercase tracking-wider",children:"Contact"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold text-neutral-600 uppercase tracking-wider",children:"Joined"}),(0,s.jsx)("th",{className:"px-6 py-3 text-center text-xs font-semibold text-neutral-600 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-neutral-200",children:tZ.map(e=>{var t,l;let a="ORG"===e.scopeType?"All Locations":"PROPERTY"===e.scopeType?(null===(t=Y.find(t=>t.id===e.scopeId))||void 0===t?void 0:t.name)||"Property #".concat(e.scopeId):(null===(l=Z.find(t=>t.id===e.scopeId))||void 0===l?void 0:l.name)||"Brand #".concat(e.scopeId);return(0,s.jsxs)("tr",{className:"hover:bg-neutral-50 transition-colors",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-semibold text-neutral-900",children:e.name||"Unnamed User"}),(0,s.jsx)("div",{className:"text-sm text-neutral-500",children:e.email})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)(m.Z,{variant:"neutral",size:"sm",children:e.roleName||e.roleKey})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsx)("div",{className:"text-sm text-neutral-900",children:a}),(0,s.jsx)("div",{className:"text-xs text-neutral-500 uppercase",children:e.scopeType})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-neutral-900",children:e.phone||"—"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-neutral-500",children:new Date(e.createdAt).toLocaleDateString()}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,s.jsx)("button",{onClick:()=>{let t=(e.name||"").trim().split(/\s+/),l=t.shift()||"",s=t.join(" ");e2(e),e5(e.roleKey||"STAFF_FRONTDESK"),e8(e.scopeType||"ORG"),tt("ORG"===e.scopeType?null:e.scopeId||null),ts(l),tr(s),ti(e.phone||""),e1(!0)},className:"text-neutral-900 hover:text-neutral-700 font-semibold text-sm",children:"Manage User"})})]},e.id)})})]})})}):(0,s.jsx)("div",{className:"text-center py-12 text-neutral-500",children:eQ?"No users found for this search.":"No staff members yet."}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)(x.Z,{variant:"bordered",padding:"lg",children:[(0,s.jsx)("h4",{className:"font-bold text-sm text-neutral-700 mb-2",children:"\uD83D\uDCE7 Invite Process"}),(0,s.jsx)("p",{className:"text-sm text-neutral-600",children:"Users receive an email with a secure link valid for 7 days"})]}),(0,s.jsxs)(x.Z,{variant:"bordered",padding:"lg",children:[(0,s.jsx)("h4",{className:"font-bold text-sm text-neutral-700 mb-2",children:"\uD83D\uDD12 Security"}),(0,s.jsx)("p",{className:"text-sm text-neutral-600",children:"Magic links for authentication - no passwords required"})]}),(0,s.jsxs)(x.Z,{variant:"bordered",padding:"lg",children:[(0,s.jsx)("h4",{className:"font-bold text-sm text-neutral-700 mb-2",children:"⚡ Instant Access"}),(0,s.jsx)("p",{className:"text-sm text-neutral-600",children:"Staff can log in immediately after accepting the invite"})]})]}),(0,s.jsxs)(x.Z,{variant:"default",padding:"lg",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-neutral-900 mb-4",children:"Role Permissions"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"bg-neutral-100 px-3 py-1 rounded-lg font-mono text-sm font-semibold text-neutral-900 mt-0.5",children:"STAFF_FRONTDESK"}),(0,s.jsx)("p",{className:"text-sm text-neutral-600 flex-1",children:"Check-in/out guests, view bookings, basic room status (property-scoped)"})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"bg-neutral-100 px-3 py-1 rounded-lg font-mono text-sm font-semibold text-neutral-900 mt-0.5",children:"STAFF_OPS"}),(0,s.jsx)("p",{className:"text-sm text-neutral-600 flex-1",children:"Manage inventory, update pricing, room availability (property-scoped)"})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"bg-neutral-100 px-3 py-1 rounded-lg font-mono text-sm font-semibold text-neutral-900 mt-0.5",children:"MANAGER"}),(0,s.jsx)("p",{className:"text-sm text-neutral-600 flex-1",children:"Full property management, staff management, revenue reports, refunds"})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"bg-neutral-100 px-3 py-1 rounded-lg font-mono text-sm font-semibold text-neutral-900 mt-0.5",children:"ADMIN"}),(0,s.jsx)("p",{className:"text-sm text-neutral-600 flex-1",children:"Group-wide access: all properties, OTA management, payment settings"})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"bg-neutral-100 px-3 py-1 rounded-lg font-mono text-sm font-semibold text-neutral-900 mt-0.5",children:"SUPERADMIN"}),(0,s.jsx)("p",{className:"text-sm text-neutral-600 flex-1",children:"Platform owner: full system access, feature flags, user impersonation"})]})]})]})]}),"cms"===ev&&(0,s.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-neutral-900 mb-6",children:"Content Management System"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)(x.Z,{variant:"default",padding:"lg",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-neutral-900 mb-4",children:"\uD83D\uDCF8 Image Management"}),(0,s.jsx)("p",{className:"text-neutral-600 mb-6",children:"Upload and manage property images"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"border-2 border-dashed border-neutral-300 rounded-lg p-8 text-center hover:border-neutral-400 transition-colors cursor-pointer",children:[(0,s.jsx)("svg",{className:"w-12 h-12 mx-auto mb-3 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,s.jsx)("p",{className:"text-neutral-600",children:"Click to upload images"}),(0,s.jsx)("p",{className:"text-sm text-neutral-500 mt-1",children:"or drag and drop"})]}),(0,s.jsx)(p.Z,{variant:"primary",fullWidth:!0,children:"Browse Images"})]})]}),(0,s.jsxs)(x.Z,{variant:"default",padding:"lg",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-neutral-900 mb-4",children:"\uD83D\uDCDD Content Sections"}),(0,s.jsx)("p",{className:"text-neutral-600 mb-6",children:"Manage homepage and property content"}),(0,s.jsx)("div",{className:"space-y-3",children:["Hero Section","About Section","Amenities","Testimonials","Contact Info"].map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-neutral-50 rounded-lg hover:bg-neutral-100 transition-colors",children:[(0,s.jsx)("span",{className:"font-medium text-neutral-900",children:e}),(0,s.jsx)(p.Z,{variant:"ghost",size:"sm",children:"Edit"})]},t))})]}),(0,s.jsxs)(x.Z,{variant:"default",padding:"lg",className:"md:col-span-2",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-neutral-900 mb-4",children:"\uD83D\uDDBC️ Gallery"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4,5,6,7,8].map(e=>(0,s.jsx)("div",{className:"aspect-video bg-neutral-100 rounded-lg flex items-center justify-center text-neutral-400 hover:bg-neutral-200 transition-colors cursor-pointer",children:(0,s.jsxs)("span",{className:"text-sm",children:["Slot ",e]})},e))}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(p.Z,{variant:"primary",size:"sm",children:"Upload to Gallery"})})]})]})]}),!1,!1,!1]})}),e_&&ez&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("div",{className:"p-6 border-b border-neutral-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-neutral-900",children:"Manage Member"}),(0,s.jsx)("button",{onClick:()=>{eG(!1),eK(null),eW(0),eH(0),eq("")},className:"text-neutral-500 hover:text-neutral-900 text-2xl font-bold",children:"\xd7"})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-8",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"font-bold text-lg text-neutral-900 border-b pb-2",children:"Contact Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-1",children:"Name"}),(0,s.jsx)("p",{className:"text-neutral-900",children:ez.userName||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-1",children:"Member #"}),(0,s.jsx)("p",{className:"text-neutral-900 font-mono",children:ez.memberNumber})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-1",children:"Member Since"}),(0,s.jsx)("p",{className:"text-neutral-900",children:new Date(ez.createdAt).toLocaleDateString()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-1",children:"Status"}),(0,s.jsx)(m.Z,{variant:"PLATINUM"===ez.tier?"neutral":"GOLD"===ez.tier?"smart":"capsule",size:"sm",children:ez.tier})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Email Address"}),(0,s.jsx)("input",{type:"email",value:ez.userEmail,onChange:e=>eK({...ez,userEmail:e.target.value}),className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Phone Number"}),(0,s.jsx)("input",{type:"tel",value:ez.userPhone||"",onChange:e=>eK({...ez,userPhone:e.target.value}),placeholder:"+91 98765 43210",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})]})]}),(0,s.jsx)("div",{className:"flex justify-end pt-2",children:(0,s.jsx)(p.Z,{variant:"primary",size:"sm",onClick:async()=>{try{let e=await fetch("/api/loyalty/accounts/".concat(ez.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:ez.userEmail,phone:ez.userPhone})});if(e.ok)alert("Contact info updated successfully!"),window.location.reload();else{let t=await e.json();alert("Failed to update: "+t.error)}}catch(e){alert("Error updating contact info"),console.error(e)}},children:"Update Contact Info"})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"font-bold text-lg text-neutral-900 border-b pb-2",children:"Loyalty Management"}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 bg-neutral-50 p-4 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-neutral-600 mb-1",children:"Current Points"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-neutral-900",children:ez.points.toLocaleString()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-neutral-600 mb-1",children:"Lifetime Stays"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-neutral-900",children:ez.lifetimeStays||0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-neutral-600 mb-1",children:"Current Tier"}),(0,s.jsx)(m.Z,{variant:"PLATINUM"===ez.tier?"neutral":"GOLD"===ez.tier?"smart":"capsule",size:"md",children:ez.tier})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Add Bonus Points"}),(0,s.jsx)("input",{type:"number",value:eU,onChange:e=>eW(parseInt(e.target.value)||0),placeholder:"0",min:"0",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"}),(0,s.jsxs)("p",{className:"text-xs text-neutral-500 mt-1",children:["New balance: ",(ez.points+eU).toLocaleString()]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Add Bonus Stays"}),(0,s.jsx)("input",{type:"number",value:eY,onChange:e=>eH(parseInt(e.target.value)||0),placeholder:"0",min:"0",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"}),(0,s.jsxs)("p",{className:"text-xs text-neutral-500 mt-1",children:["New total: ",ez.lifetimeStays+eY]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Reason for Adjustment"}),(0,s.jsx)("textarea",{value:eJ,onChange:e=>eq(e.target.value),placeholder:"E.g., Compensation for service issue, promotional bonus, etc.",rows:2,className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Membership Tier"}),(0,s.jsxs)("select",{value:ez.tier,onChange:e=>eK({...ez,tier:e.target.value}),className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900",children:[(0,s.jsx)("option",{value:"SILVER",children:"Silver"}),(0,s.jsx)("option",{value:"GOLD",children:"Gold"}),(0,s.jsx)("option",{value:"PLATINUM",children:"Platinum"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-neutral-200",children:[(0,s.jsx)(p.Z,{variant:"secondary",onClick:()=>{eG(!1),eK(null),eW(0),eH(0),eq("")},children:"Cancel"}),(0,s.jsx)(p.Z,{variant:"primary",onClick:async()=>{try{if(0!==eU||0!==eY||eJ){let e=await fetch("/api/loyalty/accounts/".concat(ez.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({addPoints:eU,addStays:eY,reason:eJ||"Admin adjustment",tier:ez.tier})});if(e.ok)alert("Member updated successfully!"),eG(!1),eK(null),eW(0),eH(0),eq(""),window.location.reload();else{let t=await e.json();alert("Failed to update: "+t.error)}}else{let e=await fetch("/api/loyalty/accounts/".concat(ez.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({tier:ez.tier})});if(e.ok)alert("Tier updated successfully!"),eG(!1),eK(null),window.location.reload();else{let t=await e.json();alert("Failed to update: "+t.error)}}}catch(e){alert("Error updating member"),console.error(e)}},children:"Save Changes"})]})]})]})}),eZ&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-neutral-200 flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-neutral-900",children:"Invite Staff Member"}),(0,s.jsx)("button",{onClick:()=>{eB(!1),eI(null),eF(null),eA({email:"",roleKey:"STAFF_FRONTDESK",scopeType:ey,scopeId:ew})},className:"text-neutral-500 hover:text-neutral-900 text-2xl font-bold",children:"\xd7"})]}),(0,s.jsxs)("form",{onSubmit:tB,className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Email Address *"}),(0,s.jsx)("input",{type:"email",required:!0,value:eT.email,onChange:e=>eA({...eT,email:e.target.value}),placeholder:"staff@podnbeyond.com",className:"w-full px-4 py-3 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Role *"}),(0,s.jsxs)("select",{value:eT.roleKey,onChange:e=>eA({...eT,roleKey:e.target.value}),className:"w-full px-4 py-3 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900",children:[(0,s.jsx)("option",{value:"STAFF_FRONTDESK",children:"Front Desk Staff"}),(0,s.jsx)("option",{value:"STAFF_OPS",children:"Operations Staff"}),(0,s.jsx)("option",{value:"MANAGER",children:"Property Manager"}),(0,s.jsx)("option",{value:"ADMIN",children:"Group Administrator"}),(0,s.jsx)("option",{value:"SUPERADMIN",children:"Super Administrator"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Access Scope *"}),(0,s.jsxs)("select",{value:eT.scopeType,onChange:e=>{var t,l;let s=e.target.value;eA({...eT,scopeType:s,scopeId:"ORG"===s?null:"PROPERTY"===s?(null==Y?void 0:null===(t=Y[0])||void 0===t?void 0:t.id)||null:(null==Z?void 0:null===(l=Z[0])||void 0===l?void 0:l.id)||null})},className:"w-full px-4 py-3 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900",children:[(0,s.jsx)("option",{value:"PROPERTY",children:"Single Property"}),(0,s.jsx)("option",{value:"BRAND",children:"Brand-Wide"}),(0,s.jsx)("option",{value:"ORG",children:"Organization-Wide"})]})]})]}),"ORG"!==eT.scopeType&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:["PROPERTY"===eT.scopeType?"Property":"Brand"," *"]}),(0,s.jsx)("select",{value:eT.scopeId||"",onChange:e=>{let t=e.target.value;eA({...eT,scopeId:t?parseInt(t,10):null})},className:"w-full px-4 py-3 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900",children:("PROPERTY"===eT.scopeType?Y:Z).map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))})]}),eE&&(0,s.jsxs)("div",{className:"p-4 rounded-lg ".concat("success"===eE.type?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"),children:[(0,s.jsx)("p",{children:eE.text}),"success"===eE.type&&eO&&(0,s.jsxs)("p",{className:"mt-2 text-sm",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Invite Link:"})," ",(0,s.jsx)("a",{href:eO,target:"_blank",rel:"noopener noreferrer",className:"underline break-all",children:eO})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)(p.Z,{variant:"secondary",onClick:()=>{eB(!1),eI(null),eF(null),eA({email:"",roleKey:"STAFF_FRONTDESK",scopeType:ey,scopeId:ew})},type:"button",children:"Cancel"}),(0,s.jsx)(p.Z,{type:"submit",variant:"primary",size:"lg",disabled:eR,children:eR?"Sending Invitation...":"Send Invitation"})]})]})]})}),e4&&e0&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-neutral-200 flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-neutral-900",children:"Manage User"}),(0,s.jsx)("button",{onClick:()=>{e1(!1),e2(null),ts(""),tr(""),ti("")},className:"text-neutral-500 hover:text-neutral-900 text-2xl font-bold",children:"\xd7"})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsx)("div",{className:"bg-neutral-50 p-4 rounded-lg",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-neutral-500 uppercase tracking-wide",children:"Name"}),(0,s.jsx)("p",{className:"text-neutral-900 font-semibold",children:[tl,ta].filter(Boolean).join(" ")||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-neutral-500 uppercase tracking-wide",children:"Joined"}),(0,s.jsx)("p",{className:"text-neutral-900",children:new Date(e0.createdAt).toLocaleDateString()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-neutral-500 uppercase tracking-wide",children:"Email"}),(0,s.jsx)("p",{className:"text-neutral-900",children:e0.email})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-neutral-500 uppercase tracking-wide",children:"Current Role"}),(0,s.jsx)(m.Z,{variant:"neutral",size:"sm",children:e0.roleName||e0.roleKey})]})]})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"First Name *"}),(0,s.jsx)("input",{type:"text",value:tl,onChange:e=>ts(e.target.value),placeholder:"First name",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Last Name *"}),(0,s.jsx)("input",{type:"text",value:ta,onChange:e=>tr(e.target.value),placeholder:"Last name",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Role"}),(0,s.jsxs)("select",{value:e9,onChange:e=>e5(e.target.value),className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900",children:[(0,s.jsx)("option",{value:"STAFF_FRONTDESK",children:"Front Desk Staff"}),(0,s.jsx)("option",{value:"STAFF_OPS",children:"Operations Staff"}),(0,s.jsx)("option",{value:"MANAGER",children:"Property Manager"}),(0,s.jsx)("option",{value:"ADMIN",children:"Group Administrator"}),(0,s.jsx)("option",{value:"SUPERADMIN",children:"Super Administrator"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Access Scope"}),(0,s.jsxs)("select",{value:e7,onChange:e=>{var t,l;let s=e.target.value;e8(s),"PROPERTY"===s?tt((null==Y?void 0:null===(t=Y[0])||void 0===t?void 0:t.id)||null):"BRAND"===s?tt((null==Z?void 0:null===(l=Z[0])||void 0===l?void 0:l.id)||null):tt(null)},className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900",children:[(0,s.jsx)("option",{value:"PROPERTY",children:"Single Property"}),(0,s.jsx)("option",{value:"BRAND",children:"Brand-Wide"}),(0,s.jsx)("option",{value:"ORG",children:"Organization-Wide"})]})]})]}),"ORG"!==e7&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"PROPERTY"===e7?"Property":"Brand"}),(0,s.jsx)("select",{value:te||"",onChange:e=>{let t=e.target.value;tt(t?parseInt(t):null)},className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900",children:("PROPERTY"===e7?Y:Z).map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Phone Number *"}),(0,s.jsx)("input",{type:"tel",value:tn,onChange:e=>ti(e.target.value),placeholder:"+91 98765 43210",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-neutral-200",children:[(0,s.jsx)(p.Z,{variant:"secondary",onClick:()=>{e1(!1),e2(null),ts(""),tr(""),ti("")},children:"Cancel"}),(0,s.jsx)(p.Z,{variant:"primary",onClick:async()=>{let e=tl.trim(),t=ta.trim(),l=tn.trim();if(!e||!t||!l){alert("First name, last name, and phone number are required.");return}try{let s=await fetch("/api/users/".concat(e0.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({roleKey:e9,scopeType:e7,scopeId:"ORG"===e7?null:te,phone:l,firstName:e,lastName:t})});if(s.ok)alert("User updated successfully!"),e1(!1),e2(null),window.location.reload();else{let e=await s.json();alert("Failed to update user: "+e.error)}}catch(e){alert("Error updating user"),console.error(e)}},children:"Save Changes"})]})]})]})}),e6&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-neutral-200 flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-neutral-900",children:"Add User"}),(0,s.jsx)("button",{onClick:()=>{e3(!1),td({firstName:"",lastName:"",email:"",phone:"",roleKey:"STAFF_FRONTDESK",scopeType:ey,scopeId:ew})},className:"text-neutral-500 hover:text-neutral-900 text-2xl font-bold",children:"\xd7"})]}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"First Name *"}),(0,s.jsx)("input",{type:"text",value:to.firstName,onChange:e=>td({...to,firstName:e.target.value}),placeholder:"First name",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Last Name *"}),(0,s.jsx)("input",{type:"text",value:to.lastName,onChange:e=>td({...to,lastName:e.target.value}),placeholder:"Last name",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Email Address *"}),(0,s.jsx)("input",{type:"email",required:!0,value:to.email,onChange:e=>td({...to,email:e.target.value}),placeholder:"staff@podnbeyond.com",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Phone Number *"}),(0,s.jsx)("input",{type:"tel",value:to.phone,onChange:e=>td({...to,phone:e.target.value}),placeholder:"+91 98765 43210",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Role *"}),(0,s.jsxs)("select",{value:to.roleKey,onChange:e=>td({...to,roleKey:e.target.value}),className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900",children:[(0,s.jsx)("option",{value:"STAFF_FRONTDESK",children:"Front Desk Staff"}),(0,s.jsx)("option",{value:"STAFF_OPS",children:"Operations Staff"}),(0,s.jsx)("option",{value:"MANAGER",children:"Property Manager"}),(0,s.jsx)("option",{value:"ADMIN",children:"Group Administrator"}),(0,s.jsx)("option",{value:"SUPERADMIN",children:"Super Administrator"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Access Scope *"}),(0,s.jsxs)("select",{value:to.scopeType,onChange:e=>{var t,l;let s=e.target.value;td({...to,scopeType:s,scopeId:"ORG"===s?null:"PROPERTY"===s?(null==Y?void 0:null===(t=Y[0])||void 0===t?void 0:t.id)||null:(null==Z?void 0:null===(l=Z[0])||void 0===l?void 0:l.id)||null})},className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900",children:[(0,s.jsx)("option",{value:"PROPERTY",children:"Single Property"}),(0,s.jsx)("option",{value:"BRAND",children:"Brand-Wide"}),(0,s.jsx)("option",{value:"ORG",children:"Organization-Wide"})]})]})]}),"ORG"!==to.scopeType&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:["PROPERTY"===to.scopeType?"Property":"Brand"," *"]}),(0,s.jsx)("select",{value:to.scopeId||"",onChange:e=>{let t=e.target.value;td({...to,scopeId:t?parseInt(t,10):null})},className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900",children:("PROPERTY"===to.scopeType?Y:Z).map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-neutral-200",children:[(0,s.jsx)(p.Z,{variant:"secondary",onClick:()=>{e3(!1),td({firstName:"",lastName:"",email:"",phone:"",roleKey:"STAFF_FRONTDESK",scopeType:ey,scopeId:ew})},children:"Cancel"}),(0,s.jsx)(p.Z,{variant:"primary",onClick:async()=>{let e=to.firstName.trim(),t=to.lastName.trim(),l=to.phone.trim();if(!e||!t||!l){alert("First name, last name, and phone number are required.");return}try{let s=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:e,lastName:t,email:to.email,phone:l,roleKey:to.roleKey,scopeType:to.scopeType,scopeId:"ORG"===to.scopeType?null:to.scopeId})});if(s.ok)alert("User created successfully!"),td({firstName:"",lastName:"",email:"",phone:"",roleKey:"STAFF_FRONTDESK",scopeType:ey,scopeId:ew}),e3(!1),window.location.reload();else{let e=await s.json();alert("Failed to create user: "+e.error)}}catch(e){alert("Error creating user"),console.error(e)}},children:"Create User"})]})]})]})}),el&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-neutral-900/40 backdrop-blur-sm px-4 py-8",children:(0,s.jsxs)("div",{className:"w-full max-w-5xl overflow-hidden rounded-2xl bg-white shadow-2xl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between border-b border-neutral-100 px-6 py-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold text-neutral-900",children:["Edit ",(null==ex?void 0:ex.name)||"Property"]}),(0,s.jsx)("p",{className:"text-sm text-neutral-500",children:"Update property information, room types, and base availability."})]}),(0,s.jsx)("button",{type:"button",onClick:tA,className:"text-sm font-medium text-neutral-500 transition hover:text-neutral-900",disabled:en,children:"Close"})]}),(0,s.jsx)("div",{className:"max-h-[70vh] overflow-y-auto px-6 py-5 space-y-6",children:ea?(0,s.jsx)("div",{className:"py-10 text-center text-sm text-neutral-500",children:"Loading property configuration…"}):(0,s.jsxs)(s.Fragment,{children:[eo&&(0,s.jsx)("div",{className:"rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-600",children:eo}),(0,s.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold uppercase tracking-wide text-neutral-700",children:"Property Details"}),(0,s.jsx)(h.Z,{label:"Property Name",value:null!==(C=null==ex?void 0:ex.name)&&void 0!==C?C:"",onChange:e=>tD("name",e.target.value),fullWidth:!0}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsx)(h.Z,{label:"Phone",value:null!==(P=null==ex?void 0:ex.phone)&&void 0!==P?P:"",onChange:e=>tD("phone",e.target.value),fullWidth:!0}),(0,s.jsx)(h.Z,{label:"Email",type:"email",value:null!==(T=null==ex?void 0:ex.email)&&void 0!==T?T:"",onChange:e=>tD("email",e.target.value),fullWidth:!0}),(0,s.jsx)(h.Z,{label:"Timezone",value:null!==(A=null==ex?void 0:ex.timezone)&&void 0!==A?A:"Asia/Kolkata",onChange:e=>tD("timezone",e.target.value),fullWidth:!0}),(0,s.jsx)(h.Z,{label:"Currency",value:null!==(R=null==ex?void 0:ex.currency)&&void 0!==R?R:"INR",onChange:e=>tD("currency",e.target.value),fullWidth:!0}),(0,s.jsx)(h.Z,{label:"Default Buffer (%)",type:"number",value:null!==(D=null==ex?void 0:ex.defaultBuffer)&&void 0!==D?D:"0",onChange:e=>tD("defaultBuffer",e.target.value),fullWidth:!0})]}),(0,s.jsxs)("label",{className:"flex items-center gap-3 rounded-lg border border-neutral-200 bg-neutral-50 px-4 py-3 text-sm text-neutral-700",children:[(0,s.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-neutral-300 text-neutral-900 focus:ring-neutral-900",checked:(null==ex?void 0:ex.overbookingEnabled)!==!1,onChange:e=>tD("overbookingEnabled",e.target.checked)}),"Allow controlled overbooking (respect property buffer)"]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsx)(h.Z,{label:"City",value:null!==(E=null==ex?void 0:ex.city)&&void 0!==E?E:"",onChange:e=>tD("city",e.target.value),fullWidth:!0}),(0,s.jsx)(h.Z,{label:"State",value:null!==(I=null==ex?void 0:ex.state)&&void 0!==I?I:"",onChange:e=>tD("state",e.target.value),fullWidth:!0}),(0,s.jsx)(h.Z,{label:"Postal Code",value:null!==(O=null==ex?void 0:ex.pincode)&&void 0!==O?O:"",onChange:e=>tD("pincode",e.target.value),fullWidth:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Address"}),(0,s.jsx)("textarea",{className:"w-full rounded-lg border border-neutral-300 px-4 py-3 text-sm text-neutral-800 focus:outline-none focus:ring-2 focus:ring-neutral-900",rows:3,value:null!==(F=null==ex?void 0:ex.address)&&void 0!==F?F:"",onChange:e=>tD("address",e.target.value)})]}),(null==tP?void 0:null===(w=tP.property)||void 0===w?void 0:w.defaultBuffer)!==void 0&&(0,s.jsxs)("div",{className:"rounded-lg bg-neutral-50 px-4 py-3 text-xs text-neutral-600",children:[(0,s.jsx)("span",{className:"font-semibold text-neutral-900",children:"Property Buffer:"}),(0,s.jsxs)("span",{className:"ml-2",children:[tP.property.defaultBuffer,"%"]}),(0,s.jsx)("span",{className:"ml-3 font-semibold text-neutral-900",children:"Timezone:"}),(0,s.jsx)("span",{className:"ml-2",children:tP.property.timezone||"Asia/Kolkata"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold uppercase tracking-wide text-neutral-700",children:"Notes"}),(0,s.jsx)("p",{className:"rounded-lg border border-dashed border-neutral-200 bg-neutral-50 px-4 py-3 text-sm text-neutral-600",children:"Updating property details and room types will regenerate BAR pricing and recalculate inventory buffers for the next 60 days."})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold uppercase tracking-wide text-neutral-700",children:"Room Types & Base Pods"}),(0,s.jsx)("p",{className:"text-xs text-neutral-500",children:"Adjust base availability and BAR (Best Available Rate) pricing. Remove a room type to deactivate it."})]}),(0,s.jsx)(p.Z,{variant:"primary",size:"sm",onClick:()=>{eh(e=>[...e,{id:null,tempId:"new-".concat(Date.now()),name:"",code:"",baseRooms:"0",capacity:"1",description:"",isActive:!0,ratePlanPrice:"",sortOrder:String(e.length),inventorySummary:null}])},children:"Add Room Type"})]}),0===ep.length?(0,s.jsx)("div",{className:"rounded-lg border border-neutral-200 bg-neutral-50 px-4 py-6 text-center text-sm text-neutral-500",children:"No room types configured yet. Add your first room type to begin syncing availability."}):(0,s.jsx)("div",{className:"space-y-4",children:ep.map((e,t)=>{var l,a,r,n,i,o,d,c;let u=null!==(a=null!==(l=e.id)&&void 0!==l?l:e.tempId)&&void 0!==a?a:t;return(0,s.jsxs)("div",{className:"rounded-xl border border-neutral-200 px-4 py-4 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(h.Z,{label:"Room Type Name",value:e.name,onChange:e=>tE(t,"name",e.target.value),fullWidth:!0})}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 text-xs font-medium text-neutral-600",children:[(0,s.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-neutral-300 text-neutral-900 focus:ring-neutral-900",checked:!1!==e.isActive,onChange:e=>tE(t,"isActive",e.target.checked)}),"Active"]}),(0,s.jsx)("button",{type:"button",className:"text-xs font-medium text-red-600 hover:text-red-700",onClick:()=>tI(t),disabled:en,children:"Remove"})]})]}),(0,s.jsxs)("div",{className:"grid gap-4 pt-4 md:grid-cols-5",children:[(0,s.jsx)(h.Z,{label:"Base Pods",type:"number",value:e.baseRooms,onChange:e=>tE(t,"baseRooms",e.target.value),fullWidth:!0}),(0,s.jsx)(h.Z,{label:"Capacity",type:"number",value:e.capacity,onChange:e=>tE(t,"capacity",e.target.value),fullWidth:!0}),(0,s.jsx)(h.Z,{label:"BAR Price (INR)",type:"number",value:null!==(r=e.ratePlanPrice)&&void 0!==r?r:"",onChange:e=>tE(t,"ratePlanPrice",e.target.value),fullWidth:!0}),(0,s.jsx)(h.Z,{label:"Sort Order",type:"number",value:null!==(n=e.sortOrder)&&void 0!==n?n:String(t),onChange:e=>tE(t,"sortOrder",e.target.value),fullWidth:!0}),(0,s.jsx)(h.Z,{label:"Code (optional)",value:null!==(i=e.code)&&void 0!==i?i:"",onChange:e=>tE(t,"code",e.target.value),fullWidth:!0})]}),(0,s.jsxs)("div",{className:"pt-4",children:[(0,s.jsx)("label",{className:"block text-xs font-semibold text-neutral-600 mb-2",children:"Description"}),(0,s.jsx)("textarea",{className:"w-full rounded-lg border border-neutral-200 px-3 py-2 text-sm text-neutral-700 focus:outline-none focus:ring-2 focus:ring-neutral-900",rows:2,value:e.description||"",onChange:e=>tE(t,"description",e.target.value)})]}),e.inventorySummary&&(0,s.jsxs)("div",{className:"mt-4 grid gap-3 rounded-lg bg-neutral-50 px-4 py-3 text-xs text-neutral-600 md:grid-cols-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold text-neutral-900",children:null!==(o=e.inventorySummary.totalFreeToSell)&&void 0!==o?o:0}),(0,s.jsx)("span",{className:"ml-1",children:"free to sell (next window)"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold text-neutral-900",children:null!==(d=e.inventorySummary.totalBooked)&&void 0!==d?d:0}),(0,s.jsx)("span",{className:"ml-1",children:"booked"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold text-neutral-900",children:null!==(c=e.inventorySummary.totalHolds)&&void 0!==c?c:0}),(0,s.jsx)("span",{className:"ml-1",children:"on hold"})]})]})]},u)})})]})]})}),(0,s.jsxs)("div",{className:"flex flex-col gap-3 border-t border-neutral-100 bg-neutral-50 px-6 py-4 text-sm text-neutral-600 md:flex-row md:items-center md:justify-between",children:[(0,s.jsx)("span",{children:"Saving will refresh BAR pricing and re-sync OTA availability automatically."}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(p.Z,{variant:"ghost",size:"sm",onClick:tA,disabled:en,children:"Cancel"}),(0,s.jsx)(p.Z,{variant:"primary",size:"sm",onClick:tO,disabled:en,children:en?"Saving…":"Save Changes"})]})]})]})}),(0,s.jsx)(c.Z,{})]})}},1163:function(e,t,l){e.exports=l(3079)}},function(e){e.O(0,[996,177,888,774,179],function(){return e(e.s=577)}),_N_E=e.O()}]);